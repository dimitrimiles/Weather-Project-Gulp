/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/shared_module/shared_module.app.js. */
window.twc=window.twc||{};window.twc.shared={};window.twc.shared.apps=angular.module("shared",["ngTouch","pascalprecht.translate"]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/shared_module/shared_module.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/config/config.factory.js. */
twc.shared.apps.provider('twcConfig',function(){var config={},overrideList=[];return{__override__:function(settings){overrideList.push(settings)},add:function(settings){angular.extend(config,settings)},$get:["twcUtil",function(twcUtil){angular.forEach(overrideList,function(overridingSettings){twcUtil.deepExtend(config,overridingSettings)});return config}]}});twc.shared.apps.provider('twcMessage',function(){var config={};return{deepExtend:function(destination){var sources=Array.prototype.slice.call(arguments,1),_self=this;angular.forEach(sources,function(source){angular.forEach(source,function(value,property){if(value&&angular.isObject(value)){destination[property]=destination[property]||{};_self.deepExtend(destination[property],value)}else destination[property]=value})})},add:function(settings){this.deepExtend(config,settings)},getAll:function(key){return config},$get:function(){return config}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/config/config.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/instance/instance.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.factory('ViewportDetector',[function(){return{isInViewPort:function(el){if(el instanceof jQuery)el=el[0];var $=window.jQuery,scrollHeight=$(window).scrollTop(),windowHeight=$(window).height(),$el=$(el),offset=$el.data("offset")||$el.offset();$el.data("offset",offset);return(scrollHeight+windowHeight)>(offset.top)}}}]);twc.shared.apps.factory('AsyncLoader',['PromisePool','$q','twcUtil',function(PromisePool,$q,twcUtil){var pmpool=new PromisePool(),fileMap={};return{loadJSFiles:function(fileNames,version){var filteredNames=[],promises=[];for(var idx=0,len=fileNames.length;idx<len;idx++){var slashName="/"+fileNames[idx];if(!fileMap[fileNames[idx]]){filteredNames.push(slashName);fileMap[fileNames[idx]]=1};pmpool.createDefer(slashName);promises.push(pmpool.getPromise(slashName))};if(filteredNames&&filteredNames.length)$LAB.script(twcUtil.map(filteredNames,function(fName){return fName+"?v="+version})).wait(function(){angular.forEach(filteredNames,function(filteredName){pmpool.resolveDefer(filteredName)})});return $q.all(promises)}}}]);twc.shared.apps.directive('twcController',['$controller','DrupalSettings','$log','PcoPage','$interpolate','$rootScope','pcoUser','$q','twcPco','$templateCache','$http','$compile','$timeout','ViewportDetector','throttler','AsyncLoader',function($controller,DrupalSettings,$log,PcoPage,$interpolate,$rootScope,pcoUser,$q,twcPco,$templateCache,$http,$compile,$timeout,ViewportDetector,throttler,AsyncLoader){return{scope:true,replace:false,transclude:false,compile:function(){return{pre:function(scope,elem,attrs){var settings=DrupalSettings.getSettings(attrs.instance),logger=$log.getInstance(attrs.twcController),ret={settings:settings,logger:logger},moduleName=attrs.moduleName,filesMap=((moduleName&&Drupal.settings.twc.files&&Drupal.settings.twc.files[moduleName])||{}),version=settings&&settings.module_version||(new Date().getTime()),filesToLoad=[],createCtrl=function(){var isChildrenNotCompiled=elem.children().attr('data-ng-non-bindable');if(isChildrenNotCompiled){elem.children().children().appendTo(elem);elem.children('[data-ng-non-bindable]').remove()};$controller(attrs.twcController,ret);attrs.$set('twcInit',undefined);elem.removeClass('twc-init');return isChildrenNotCompiled},ajaxPageStateJS=(window.Drupal&&window.Drupal.settings&&window.Drupal.settings.ajaxPageState&&window.Drupal.settings.ajaxPageState.js)||{};angular.forEach(filesMap,function(value,fileName){if(!ajaxPageStateJS[fileName])filesToLoad.push(fileName)});filesToLoad.sort(function(file1,file2){var loadData1=filesMap[file1],loadData2=filesMap[file2];loadData1.group=loadData1.group||5;loadData1.weight=loadData1.weight||10;loadData2.group=loadData2.group||5;loadData2.weight=loadData2.weight||10;return(loadData1.group===loadData2.group)?(function(){return(loadData1.weight===loadData2.weight)?0:((loadData1.weight<loadData2.weight)?-1:1)})():((loadData1.group<loadData2.group)?-1:1)});angular.extend(ret,{$scope:scope});if(TWC.Configs.disable_lazyload){createCtrl()?$compile(elem.contents())(scope):angular.noop();return};if(attrs.templateFile){var onVisibilityChange=function(el){return function(){if(window.callPhantom||(!angular.element(el).attr('data-compiled')&&ViewportDetector.isInViewPort(el))){angular.element(el).attr('data-compiled',true);AsyncLoader.loadJSFiles(filesToLoad,version).then(function(){createCtrl();$http.get(attrs.templateFile,{params:{v:version}}).success(function(htmlStr){$log.debug("Loaded template file for: ",attrs.templateFile);elem.html(htmlStr);$compile(elem.contents())(scope)})})}}},handler=onVisibilityChange(elem[0]);handler();!window.callPhantom&&throttler.onScroll(handler)}else AsyncLoader.loadJSFiles(filesToLoad,version).then(function(){createCtrl()?$compile(elem.contents())(scope):angular.noop()})}}},controller:["$scope","$element","$attrs","DrupalSettings",function($scope,$element,$attrs,DrupalSettings){$scope.getInstance=function(){return DrupalSettings.getSettings($attrs.instance)}}]}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/instance/instance.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/model/model.class.factory.js. */
twc.shared.apps.factory('TwcModel',['TwcClass','twcUtil',function(TwcClass,twcUtil){return TwcClass.extend({requiredAttrs:[],construct:function(attrs,config){this.attrs=angular.copy(this.defaults)||{};angular.forEach(this.requiredAttrs,function(reqAttr){if(attrs[reqAttr]===undefined)throw'Attribute "'+reqAttr+'" is required!'});this.fromDto(attrs);this.init&&this.init(attrs,config)},fromDto:function(dto){this.set(dto);return this},_get:function(key){if(arguments.length===2){var defaultVal=arguments[1],val=this.attrs[key];if(!val&&val!==defaultVal)this._set(key,defaultVal)};return this.attrs[key]},_set:function(key,val){if(angular.isObject(key)){angular.extend(this.attrs,arguments[0])}else this.attrs[key]=val;return this},get:function(key){var method='get'+twcUtil.capitalize(key);if(this[method]){return this[method].apply(this,twcUtil.rest(arguments))}else return this._get.apply(this,arguments)},set:function(key){if(angular.isObject(key)){var attrs=key,additionalSettings=arguments[1]||{},self=this;angular.forEach(attrs,function(val,key){self.set.apply(self,[key,val].concat(additionalSettings[key]||[]))});return this}else if(key){var method='set'+twcUtil.capitalize(key);if(this[method]){return this[method].apply(this,twcUtil.rest(arguments))}else return this._set.apply(this,arguments)}},mapTo:function(model,attrs,mapRules){mapRules=mapRules||{};var self=this;angular.forEach(attrs,function(fromAttr){var toAttr=mapRules[fromAttr]||fromAttr;model.set(toAttr,self.get(fromAttr))});return model}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/model/model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_events/twc_events.run.js. */
twc.shared.apps.run(['$swipe','customEvent','$window','twcUtil','twcConstant','$rootScope',function($swipe,customEvent,$window,twcUtil,twcConstant,$rootScope){(function(){var whiteList=['https://profile.weather.com','https://profile.oqc.weather.com','http://localhost.weather.com:9000'],listener=function(event){if(whiteList.indexOf(event.origin)<0)return;var type=event.data.type;type=type?type+'-post-message':null;if(type)customEvent.getEvent(type).notify(event.data)};if($window.addEventListener){addEventListener("message",listener,false)}else attachEvent("onmessage",listener)})();if('ontouchstart'in document.documentElement){var body=angular.element(document).find('html');$swipe.bind(body,{start:function(pt,e){if(e.currentTarget.nodeName==='HTML')customEvent.getEvent('touch-on-body-event').notify(e)},cancel:function(pt){}})};angular.element($window).resize(twcUtil.debounce(function(evt){angular.element(this).trigger('ScreenResizeEnd')},300));angular.element($window).scroll(twcUtil.debounce(function(evt){angular.element(this).trigger('ScreenScrolled')},1e3));angular.element($window).resize(twcUtil.debounce(function(evt){angular.element(this).trigger('ScreenResizeEnd1Sec')},1e3));if(Boolean(angular.element.cookie('debug'))){var ascii=twcConstant.ascii,beenHere=false;angular.element('body').on('mousedown mousemove',twcUtil.debounce(function(e){twcConstant.holdShiftKey=e.shiftKey;twcConstant.holdAltKey=e.altKey;if(e.which===1&&twcConstant.holdShiftKey&&twcConstant.holdAltKey)if(e.type==='mousemove'){var selectedModule=angular.element(e.target).closest('[data-twc-controller]');if(selectedModule.length>0){$rootScope.$log.log(Drupal.settings.twc.instance[selectedModule.attr('instance')]);if(!beenHere){$rootScope.$log.log('Total of ',Object.keys(Drupal.settings.twc.instance).length,' modules on the page.');beenHere=true}}}},300))}}]);twc.shared.apps.directive('twcClick',function(){return function(scope,element,attrs){element.bind("click",function(evt){evt.preventDefault();scope.$apply(function(){scope.$eval(attrs.twcClick)})})}});twc.shared.apps.directive('documentClick',function($document,$parse){var linkFunction=function($scope,$element,$attributes){var scopeExpression=$attributes.documentClick,invoker=$parse(scopeExpression);$document.on('click',function(event){$scope.$apply(function(){invoker($scope,{$event:event})})})};return linkFunction});twc.shared.apps.directive('twcEnter',['twcConstant',function(twcConstant){return function(scope,element,attrs){element.bind("keydown keypress",function(evt){if(evt.which===twcConstant.ascii.CR){evt.preventDefault();scope.$apply(function(){scope.$eval(attrs.twcEnter)})}})}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_events/twc_events.run.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_modal/twc_modal.directive.js. */
twc.shared.apps.directive('twcModal',['ModalBox','twcConstant',function(ModalBox,twcConstant){'use strict';var ascii=twcConstant.ascii,templatePath='/sites/all/modules/custom/angularmods/app/shared/twc_dialog_box/templates/',defaultTemplate='twc_modal.html';return{template:'<span ng-click="showDialog()" ng-transclude></span>',transclude:true,restrict:'EA',scope:{title:'@',body:'@',okText:'@',cancelText:'@',okAction:'&',cancelAction:'&',showIt:'='},controller:function($scope,$timeout,twcConstant){$scope.hideDialog=function(){$scope.$evalAsync(function(){$scope.show=false;$scope.showIt=false})};$scope.keyPressBindings=[{id:'Escape',keyCode:twcConstant.ascii.ESC,action:function(){$scope.hideDialog()}}];$scope.ok=function(){$scope.hideDialog();$timeout(function(){$scope.okAction()},0,false)};$scope.cancel=function(){$scope.hideDialog();$timeout(function(){$scope.cancelAction()},0,false)}},link:function postLink(scope,element,attrs,controller){scope.$watch('showIt',function(nVal,oVal){if(nVal&&JSON.parse(nVal)===true){var popup=ModalBox.showDialog(scope,attrs)}else scope.hideDialog()});attrs.$observe('dialogTemplate',function(nVal,oVal){scope.$evalAsync(function(){scope.template=attrs.dialogTemplate?attrs.dialogTemplate:templatePath+'dialog.html'})})}}}]).factory('ModalBox',['$compile','$document','$sce',function($compile,$document,$sce){var dialogBox={},templatePath='/sites/all/modules/custom/angularmods/app/shared/twc_dialog_box/templates/',defaultTemplate='twc_modal.html';return{getPopup:function(scope){if(Object.keys(dialogBox).length===0){dialogBox.popup='<div class="twc-modal" data-ng-if="show" data-twc-key-press="keyPressBindings"><div data-ng-include="template"></div>';angular.element($document[0].body).append($compile(dialogBox.popup)(scope));var div=angular.element($document[0].body).find('div');dialogBox.popup=div[div.length-1]};$compile(dialogBox.popup)(scope);return dialogBox.popup},showDialog:function(scope,attrs){var style={width:'500px',height:'100px'},popup=this.getPopup(scope);scope.buttonState=scope.okAction?'ok-cancel':'cancel';scope.okText=attrs.okText?attrs.okText:'OK';scope.cancelText=attrs.cancelText?attrs.cancelText:'Cancel';scope.hasHeader=attrs.header?true:false;scope.headerContent=attrs.header;scope.body=attrs.body?$sce.trustAsHtml(attrs.body):'Body Text Here.';scope.hasFooter=attrs.footer==='has-buttons'?'has-buttons':'has-content';scope.footerContent=attrs.footer;scope.style={width:'500px',height:'100px'};scope.template=attrs.dialogTemplate?attrs.dialogTemplate:templatePath+defaultTemplate;if(attrs.width)style.width=attrs.width;if(attrs.height)style.height=attrs.height;style.height="680px";style.width="844px";scope.style=JSON.stringify(style);scope.$evalAsync(function(){scope.show=true});return popup}}}]).factory('ConfirmDialog',['$rootScope','ModalBox',function($rootScope,ModalBox){var $scope=$rootScope.$new();$scope.hideDialog=function(){$scope.show=false};$scope.ok=function(){$scope.show=false};$scope.cancel=function(){$scope.show=false};return{showDialog:function(attrs){ModalBox.showDialog($scope,attrs)}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_modal/twc_modal.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_keypress/twc_keypress.directive.js. */
twc.shared.apps.directive('twcKeyPress',["$document",function($document){'use strict';return{scope:{keyBindings:'=twcKeyPress',twcEventNamespace:'@twcEventNamespace',twcEventNamespaceSuspended:'=twcEventNamespaceSuspended'},link:function(scope,element,attrs){var activeElement=element[0].tagName==='INPUT'?angular.element(element[0]):$document,kd='keydown'+(scope.twcEventNamespace?'.'+scope.twcEventNamespace:'')
function mapEventToFunction(event){angular.forEach(scope.keyBindings,function(keyObj){if(event.which===parseInt(keyObj.keyCode)){event.preventDefault();scope.$apply(keyObj.action)}})};activeElement.on(kd,function(evt){if(!scope.twcEventNamespaceSuspended)mapEventToFunction(evt)});scope.$on('$destroy',function(){activeElement.off('.'+scope.twcEventNamespace)})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_keypress/twc_keypress.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/q.loc.js. */
twc.shared.apps.factory('QLocModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({recordType:'QLocRecord',getKey:function(){return this._get('key')},getName:function(){return this._get('name')},setResponse:function(response){this.data=response;this.header="NA"}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/q.loc.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/pco.config.js. */
twc.shared.apps.config(['twcConfigProvider',function(twcConfigProvider){twcConfigProvider.add({pco:{models:{savedLocation:'PcoSavedLocationModel',recentSearchLocation:'PcoSavedLocationModel',wxdMORecordModel:'WxdMORecordModelClass'},createFullUserLocationList:function(user){return(user.getSavedLocations()||[]).concat(user.getRecentSearchLocations()||[])}}})}]).run(['pcoUser',function(pcoUser){window.user=pcoUser}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/pco.config.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/metrics_control/metrics_control.factory.js. */
twc.shared.apps.factory('MetricsControl',['twcPco','twcUtil','customEvent',function(twcPco,twcUtil,customEvent){var func,$=jQuery,metricsReady=customEvent.getEvent('utagReady');func={resetPCO:function($){pcoPage=twcPco.get('page');pcoPage.setUpFV($);pcoPage.setUpPartner($,[null,twcPco.get('user')])},resetMetrics:function(){s.prop39="";s.eVar39=twcPco.getNodeValue("user","partner");s.eVar60=twcPco.getNodeValue("page","partner")}};return{pageView:function(){metricsReady.done(function(){func.resetPCO($);func.resetMetrics();s.t()})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/metrics_control/metrics_control.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_microdata/twc_microdata.factory.js. */
twc.shared.apps.factory('TwcMicrodata',['twcConstant','$q','$http',function(twcConstant,$q,$http){'use strict';var getDescription=function(){var meta=angular.element(document.querySelector('meta[name="description"]'));return meta&&meta.length>0?meta.attr('content'):'Brought to you by The Weather Channel'},createMicrodata=function(md){angular.forEach(md,function(val,key){if(key==='schema'){updateItemScope(val)}else if(angular.isObject(val)){angular.forEach(val,function(value,key){if(key==='schema'){updateItemScope(value)}else addOrUpdateMeta(value,key)})}else addOrUpdateMeta(val,key)})},updateItemScope=function(val){var html=angular.element(document.querySelector('html'));if(html){html.attr('itemscope','');html.attr('itemtype',val)}},addOrUpdateMeta=function(val,key){if(val===null)return;var meta,mask={fbShareCount:{itemProp:'interactionCount',content:'FacebookLikes'},gplusShareCount:{itemProp:'interactionCount',content:'GooglePlus'}},keyVal={};if(key.indexOf('ShareCount')>0&&mask[key]){keyVal.key=mask[key].itemProp;keyVal.val=mask[key].content+':'+val;meta=angular.element(document.querySelector("meta[content^='"+mask[key].content+"']"))}else{keyVal.key=key;keyVal.val=val;meta=angular.element(document.querySelector('meta[itemprop="'+key+'"]'))};if(meta&&meta.length===0){meta=angular.element('<meta itemprop="'+keyVal.key+'" content="'+keyVal.val+'" />');angular.element('head').append(meta)}else{meta.attr('itemprop',keyVal.key);meta.attr('content',keyVal.val)}},createSecurityPolicy=function(){var meta=angular.element('<meta http-equiv="Content-Security-Policy" content="script-src \'self\' https:\/\/plusone.google.com">');angular.element('head').append(meta)},getShareCount=function(url){var dffb=$q.defer();dffb.resolve({});return[dffb.promise]},twcMicrodata={injectMicrodata:function(obj){var md=obj?obj:{},url=md.url?md.url:window.location.href;$q.all(getShareCount(url)).then(function(response){var fbCount=response&&response.length>0?response[0].total_count:'N/A',twcMd=twcConstant.microdata,schema=md.schema?md.schema:'Organization',schemaUrl=twcMd.url,commonProps={schema:schemaUrl+schema,name:md.name?md.name:'The Weather Channel',description:md.description?md.description:getDescription(),image:md.image?md.image:'http://s.w-x.co/TWC_logo_100x100.gif'},creativeCommon={fbShareCount:fbCount},addressProps={streetAddress:'300 Interstate North Pkwy',addressLocality:'Atlanta, Georgia',postalCode:'30339'},itemType={Organization:{schema:schemaUrl+schema,common:commonProps},VideoObject:{common:commonProps,duration:md.duration?md.duration:null,thumbnailUrl:md.thumbnailUrl?md.thumbnailUrl:null,contentUrl:md.contentUrl?md.contentUrl:null,embedUrl:md.embedUrl?md.embedUrl:null,uploadDate:md.uploadDate?md.uploadDate:null,expires:md.expires?md.expires:null},ImageObject:{common:commonProps,author:md.author?md.author:'The Weather Channel',contentLocation:md.contentLocation?md.contentLocation:'',publishDate:md.publishDate?md.publishDate:''},Article:{schema:schemaUrl+schema,common:commonProps}};createMicrodata(itemType[schema])})}};return twcMicrodata}]);twc.shared.apps.run(['twcConstant','TwcMicrodata','customEvent',function(twcConstant,TwcMicrodata,customEvent){customEvent.getEvent('pcoReady').done(function(){var schema=twcConstant.microdata.schema,meta=angular.element(document.querySelector('meta[property="og:image"]')),canonical=angular.element(document.querySelector('link[rel="canonical"]')),type=TWC.pco.getNodeValue('page','content');switch(type){case'article':case'news':TwcMicrodata.injectMicrodata({schema:schema[type].name,image:meta?meta.attr('content'):null});break;case'video':TwcMicrodata.injectMicrodata({schema:schema[type].name,image:meta?meta.attr('content'):null,thumbnailUrl:meta?meta.attr('content'):null,embedUrl:canonical?canonical.attr('href'):null});break;case'other':if(TWC.pco.getNodeValue('page','pathname')==='ugc'){TwcMicrodata.injectMicrodata({schema:schema.image.name,image:meta?meta.attr('content'):null})}else TwcMicrodata.injectMicrodata();break;default:TwcMicrodata.injectMicrodata();break}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_microdata/twc_microdata.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_ups_alert/twc_ups_alert.directive.js. */
twc.shared.apps.directive('twcUpsAlert',["customEvent",function(customEvent){'use strict';return{link:function(scope,element,attrs){var type=attrs.twcUpsAlert;element.on('click',function(){customEvent.getEvent('twc-ups-alert').notify({data:{type:type}})});scope.$on('$destroy',function(){$el.off('click')})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_ups_alert/twc_ups_alert.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/back_button_broadcast/back_button_broadcast.factory.js. */
twc.shared.apps.run(["customEvent",function(customEvent){angular.element(window).bind("pageshow",function(event){if(event.originalEvent.persisted)customEvent.getEvent("page-back-event").notify()})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/back_button_broadcast/back_button_broadcast.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/alert_factory/alert_factory.factory.js. */
twc.shared.apps.factory('alertFactory',['$rootScope','$q','PcoPage','twcConfig','dsxclient','twcUtil','datefactory','nwsOfficeIDMapping','wxReadyLinkMapping','$http','customEvent',function($rootScope,$q,PcoPage,twcConfig,dsxclient,twcUtil,datefactory,nwsOfficeIDMapping,wxReadyLinkMapping,$http,customEvent){'use strict';var statusCodes=twcConfig.module_status_codes,moduleStatus=statusCodes.LOADING,bulletinItem,otherAlerts=[],dataRequested=false,nationalAlertsRecord,keys,alertDetails={wxdRecords:twcConfig.dsxclient.wxd.records,config:[],records:[]},alertStatesRecord={wxdRecords:twcConfig.dsxclient.wxd.records,config:[],records:{}},api={getURLSignificance:function(){return TWC.PcoUtils.getURLParameter('significance')||''},getURLPhenomena:function(){return TWC.PcoUtils.getURLParameter('phenomena')||''},getURLEtn:function(){return TWC.PcoUtils.getURLParameter('etn')||''},getAreaId:function(){return TWC.PcoUtils.getURLParameter('areaid')||''},getTWCIId:function(){return TWC.PcoUtils.getURLParameter('tid')||''},getRecordPhenomena:function(){return bulletinItem.getEventPhenomena()},getRecordSignificance:function(){return bulletinItem.getEventSignificance()},getBulletinItem:function(){return bulletinItem},getModuleStatus:function(){return moduleStatus},dataRequested:function(){return dataRequested},configureAlertRecord:function(){alertDetails.bulletin={type:'bulletin',config:{recordType:'wxd',recordName:alertDetails.wxdRecords.alertArea,fullLocId:this.getAreaId()}};alertDetails.alertLocations={type:'alertLocations',config:{recordType:'wxd',recordName:alertDetails.wxdRecords.alertLocations,twcIId:this.getTWCIId()}};keys=twcUtil.keys(alertDetails);twcUtil.each(keys,function(key){if(twcUtil.has(alertDetails[key],'config'))alertDetails.config.push(alertDetails[key].config)})},getHeadline:function(){if(bulletinItem){var headline={desc:function(){return bulletinItem.getEventDescription()},cnty:function(){return bulletinItem.getLocationCounty()},stcd:function(){return bulletinItem.getLocationStateCd()}},fullHeadline=headline.desc()+' for '+headline.cnty()+', '+headline.stcd();return fullHeadline}},getFromString:function(){return PcoPage.attrs.fromStr},getStartTime:function(){var format='';if(bulletinItem&&bulletinItem.getEventStartLocalTime()){var regex=/00/gi,result,indicies=[];while((result=regex.exec(bulletinItem.getEventStartLocalTime())))indicies.push(result.index);if(indicies[0]===11||indicies[0]===14||indicies[0]===11&&indicies[1]===14){format='ha z, EEE, MMM d'}else format='h:mma z, EEE, MMM d';var timeZone=bulletinItem.getLocationTimeZone(),startTime=bulletinItem.getEventStartLocalTime(),validTime=this.getValidTime(startTime,timeZone,format);return validTime}},getEndTime:function(){var format='';if(bulletinItem&&bulletinItem.getEventEndLocalTime()){var regex=/00/gi,result,indicies=[];while((result=regex.exec(bulletinItem.getEventEndLocalTime())))indicies.push(result.index);if(indicies[0]===11||indicies[0]===14||indicies[0]===11&&indicies[1]===14){format='ha z, EEE, MMM d'}else format='h:mma z, EEE, MMM d';var timeZone=bulletinItem.getLocationTimeZone(),endTime=bulletinItem.getEventEndLocalTime(),validTime=this.getValidTime(endTime,timeZone,format);return validTime}},getSeverity:function(){if(bulletinItem)return bulletinItem.getEventSeverity()},getPhenomena:function(){if(bulletinItem)return bulletinItem.getEventPhenomena()},getSignificance:function(){if(bulletinItem)return bulletinItem.getEventSignificance()},getIssTime:function(){if(bulletinItem){var timeZone=bulletinItem.getLocationTimeZone(),issTime=bulletinItem.getIssueTimeLocalISO(),format='EEE, MMM d, h:mm a z',validTime=this.getValidTime(issTime,timeZone,format);return validTime}},getIssuer:function(){if(bulletinItem){var phenomena=this.getRecordPhenomena(),significance=this.getRecordSignificance(),provider='',twc='The Weather Channel',nws='The National Weather Service';if((phenomena!=null&&significance!=null)&&((phenomena==='TTW'&&significance==='TB')||(phenomena==='TEM'&&significance==='TB')||(phenomena==='TLL'&&significance==='TR')||(phenomena==='TWX'&&significance==='TR'))){provider=twc}else provider=nws;return provider}},getIssuerLoc:function(){if(bulletinItem){var officeId=bulletinItem.getEventOfficeId();return nwsOfficeIDMapping.getOfficeName(officeId)}},getValidTime:function(timestamp,timezone,format){var dsxdate=datefactory;if(!timestamp)return null;var date=dsxdate['new'](timestamp,timezone);if(!date)return null;return date.format(format)},verifyRecords:function(){var isValid=true;twcUtil.each(keys,function(key){if(twcUtil.has(alertDetails[key],'config'))if(key==='bulletin')if(!alertDetails.records[key]||!alertDetails.records[key].alerts||!alertDetails.records[key].alerts.length){moduleStatus='expired';customEvent.getEvent('localAlertDetails_alertExpired-event').resolve(true);isValid=false}});return isValid},buildResponseModel:function(response){twcUtil.each(keys,function(key){if(twcUtil.has(alertDetails[key],'config'))alertDetails.records[key]=response.getModel(alertDetails[key].config)})},getLocObject:function(){var loc=alertDetails.records['bulletin'].location;customEvent.getEvent('currentLocInfo-event').resolve(loc);return loc},getCountryCode:function(){return this.getLocObject().countryCode},getValidBulletin:function(){var alertRecords=alertDetails.records['bulletin'].alerts;for(var i=0;i<alertRecords.length;i++){var record=alertRecords[i];if(record.getEventPhenomena()===this.getURLPhenomena()&&record.getEventSignificance()===this.getURLSignificance()&&record.getEventTrackingNumber()===this.getURLEtn()){bulletinItem=record;break}};if(!bulletinItem){moduleStatus='expired';customEvent.getEvent('localAlertDetails_alertExpired-event').resolve(true)}},getOtherAlertsInfo:function(){if(alertDetails.records['bulletin']){var alertRecords=alertDetails.records['bulletin'].alerts;for(var i=0;i<alertRecords.length;i++){var record=alertRecords[i];if(!(record.getEventPhenomena()===this.getURLPhenomena()&&record.getEventSignificance()===this.getURLSignificance()&&record.getEventTrackingNumber()===this.getURLEtn()))otherAlerts.push(record)};var vicinityAlertRecords=alertDetails.records['bulletin'].otherAlerts;for(var j=0;j<vicinityAlertRecords.length;j++)otherAlerts.push(vicinityAlertRecords[j]);otherAlerts=twcUtil.sortBy(otherAlerts,function(o){return o.event.eActionCd__eActionPriority})}else otherAlerts=null},convertBulletinToAlert:function(bulletin,locId){var phenomena=bulletin.getEventPhenomena(),areaId=bulletin.getLocationCd(),etn=bulletin.getEventTrackingNumber(),officeId=bulletin.getEventOfficeId(),significance=bulletin.getEventSignificance(),startTime=bulletin.getEventStartLocalTime(),endTime=bulletin.getEventEndLocalTime(),timeZone=bulletin.getLocationTimeZone(),twciId=bulletin.getTwcIId(),issTime=bulletin.getIssueTimeLocalISO(),alert={},sFormat='',eFormat='',regex=/00/gi,result,startTimeIndex=[],endTimeIndex=[];while((result=regex.exec(startTime)))startTimeIndex.push(result.index);while((result=regex.exec(endTime)))endTimeIndex.push(result.index);if(bulletin.event.eFld){var suffix=bulletin.getFloodEventDescriptionSuffix(),floodLocation=bulletin.getFloodRiverName();if(floodLocation){alert.description=suffix?bulletin.getEventDescription()+' ('+floodLocation+')'+" #"+suffix:bulletin.getEventDescription()+' ('+floodLocation+')'}else alert.description=suffix?bulletin.getEventDescription()+" #"+suffix:bulletin.getEventDescription()}else alert.description=bulletin.getEventDescriptionSuffix()?bulletin.getEventDescription()+' #'+bulletin.getEventDescriptionSuffix():bulletin.getEventDescription();if(startTime)if(startTimeIndex[0]===11||startTimeIndex[0]===14||startTimeIndex[0]===11&&startTimeIndex[1]===14){sFormat='ha z, EEE, MMM d'}else sFormat='h:mma z, EEE, MMM d';if(endTime)if(endTimeIndex[0]===11||endTimeIndex[0]===14||endTimeIndex[0]===11&&endTimeIndex[1]===14){eFormat='ha z, EEE, MMM d'}else eFormat='h:mma z, EEE, MMM d';alert.severity=bulletin.getEventSeverity();alert.validStartTime=this.getValidTime(startTime,timeZone,sFormat);alert.validEndTime=this.getValidTime(endTime,timeZone,eFormat);alert.url=['/weather/alerts/localalerts/l',locId!==null?"/"+locId:'','?phenomena=',phenomena,'&significance=',significance,'&areaid=',areaId,'&office=',officeId,'&etn=',etn,'&tid=',twciId].join('');alert.type='bulletin';alert.issTime=issTime;alert.fromStr=phenomena+"-"+significance;return alert},getHighestPollenIndexValue:function(tree,grass,weed){var maxPollen=0;if(tree)maxPollen=Math.max(maxPollen,tree.getSeverity());if(grass)maxPollen=Math.max(maxPollen,grass.getSeverity());if(weed)maxPollen=Math.max(maxPollen,weed.getSeverity());return maxPollen},getVicinityAlerts:function(){this.getOtherAlertsInfo();return otherAlerts},formatTextForAlerts:function(textBody){var formattedText=[''],index=0;for(var i=0;i<textBody.length;i++){textBody[i]=textBody[i].replace(/[.]{3}/g,'... ');formattedText[index]=formattedText[index]?formattedText[index]+textBody[i]:textBody[i];formattedText[index]+=" ";formattedText[index]=formattedText[index].replace(/amp/,'&&');if(textBody[i+1]===" ")index++};return formattedText},getAlertNarrative:function(){if(bulletinItem){var locale=PcoPage.getLocale(),narrative=bulletinItem.getNarrativeTextByLanguage(locale);narrative=narrative&&this.formatTextForAlerts(narrative);return narrative||null}},getAlertSynopsis:function(){if(bulletinItem){var param=bulletinItem.data.bParameter,synopsis='',self=this,check=function(index){if(param[index]&&param[index].bLabel==='SYNOPSIS'){synopsis=self.formatTextForAlerts(param[index].bLn,param[index].bLn.length)}else synopsis=null};if(check(0)===null)check(1);return synopsis}},getAlertData:function(){dataRequested=true;var self=this;this.configureAlertRecord();var promise=dsxclient.execute(alertDetails.config);promise.then(function(response){self.buildResponseModel(response);if(!(self.getAreaId()&&self.getURLPhenomena()&&self.getURLSignificance())){moduleStatus='expired'}else{if(self.verifyRecords()){self.getValidBulletin();if(self.getModuleStatus()!=='expired')moduleStatus=statusCodes.DEFAULT}else customEvent.getEvent('localAlertDetails_alertExpired-event').resolve(true);customEvent.getEvent('alertFactoryResponse-event').resolve(api)}})['catch'](function(response){moduleStatus='expired'})},setMapLayer:function(){var self=this;$http.get('/sites/all/modules/custom/angularmods/app/shared/alert_factory/alerts_inventory.json').success(function(mapAlertInfo){var layer='radar',zoom,stateCode,alertLayers=[{title:'RADAR',layerName:'radar',type:'ginsu',weight:5,legend:"215x41_radar"},{title:'CLOUDS',layerName:'sat',type:'ginsu',weight:5,legend:"215x41_clouds"},{title:'CLOUDS',layerName:'ussat',type:'ginsu',weight:5,legend:"215x41_clouds"},{title:'FORECASTTEMPS',layerName:'temp',type:'ginsu',weight:5,legend:"215x41_temp",unit:true},{title:'WIND',layerName:'windspeed',type:'ginsu',weight:5,legend:"215x41_wind_speed",unit:true},{title:'DEWPOINT',layerName:'dewpoint',type:'ginsu',weight:5,legend:"215x41_dew_point",unit:true},{title:'RAIN',layerName:'rain',type:'ginsu',weight:5,legend:"215x41_estimated_24hr_precip",unit:true}],mapInfo;mapInfo=twcUtil.findWhere(mapAlertInfo,{phenomena:self.getPhenomena(),significance:self.getSignificance()});if(mapInfo){stateCode=self.getAreaId().length>2?self.getAreaId().substring(0,2):'';if(twcUtil.isConusByCountryState(stateCode,self.getCountryCode())){layer=twcUtil.findWhere(alertLayers,{layerName:mapInfo.conus_overlay||'radar'})}else layer=twcUtil.findWhere(alertLayers,{layerName:mapInfo.nonconus_overlay||'sat'});zoom=mapInfo.default_zoom_level;zoom=zoom>3?zoom:6};if(bulletinItem)customEvent.getEvent('localAlertDetails_info-event').resolve({significance:self.getSignificance(),phenomena:self.getPhenomena(),alertMapLayer:layer,zoom:zoom,offset:bulletinItem.getLocationUTCOffset(),tz:bulletinItem.getLocationTimeZone()})})},dynamicSort:function(property){var sortOrder=1;if(property[0]==="-"){sortOrder=-1;property=property.substr(1)};return function(a,b){var result=(a[property]<b[property])?-1:(a[property]>b[property])?1:0;return result*sortOrder}},getAlertStatesData:function(){alertStatesRecord.config.push({recordType:'wxd',recordName:'AlertsStates'});var promise=dsxclient.execute(alertStatesRecord.config);promise.then(function(response){nationalAlertsRecord=response.getModel(alertStatesRecord.config[0]);if(nationalAlertsRecord&&nationalAlertsRecord.length>1)customEvent.getEvent('nationalAlertStatesReady-event').resolve()})['catch'](function(){moduleStatus='expired'})},getStates:function(){var states=[];if(nationalAlertsRecord.length>0){for(var i=0;i<=nationalAlertsRecord.length-1;i++){var state={stateName:nationalAlertsRecord[i].getStateName(),stateCode:nationalAlertsRecord[i].getStateCode()};states.push(state)};return states.sort(this.dynamicSort("stateName"))}else return null},getAlertLocations:function(){var affectedLocations=alertDetails.records['alertLocations']&&alertDetails.records['alertLocations'].locations,locArray=[];if(affectedLocations)for(var i=0;i<=affectedLocations.length-1;i++){var location=affectedLocations[i].bLoc+", "+affectedLocations[i].bSt+"; ";locArray.push(location)};return affectedLocations?locArray:[]},getEventCategory:function(){return wxReadyLinkMapping.getCategory(this.getURLPhenomena(),this.getURLSignificance())},getEventLinks:function(){var category=this.getEventCategory(),q=$q.defer();customEvent.getEvent('linker_factory_tempScope').then(function(){return q.resolve(wxReadyLinkMapping.getLinks(category))});return q.promise}};return api}]).factory('nwsOfficeIDMapping',function(){nwsOfficeIDMapping={KALY:"Albany, NY",KLWX:"Baltimore/Washington, MD",KBGM:"Binghamton, NY",KBOX:"Boston, MA",KTAR:"Boston, NERFC MA",KBUF:"Buffalo, NY",KBTV:"Burlington, VT",KCAR:"Caribou, ME",KCTP:"State College, PA",KRHA:"State College, MARFC PA",KCHS:"Charleston, SC",KRLX:"Charleston, WV",KILN:"Cincinnati/Wilmington, OH",KTIR:"Cincinnati, OHRFC OH",KCLE:"Cleveland, OH",KCAE:"Columbia, SC",KGSP:"Greenville-Spartanburg, SC",KMHX:"Newport, NC",KOKX:"New York City, NY",KPHI:"Philadelphia, PA",KPBZ:"Pittsburgh, PA",KGYX:"Portland, ME",KRAH:"Raleigh/Durham, NC",KRNK:"Roanoke/Blacksburg, VA",KAKQ:"Wakefield, VA",KILM:"Wilmington, NC",KABQ:"Albuquerque, NM",KAMA:"Amarillo, TX",KFFC:"Atlanta, GA",KALR:"Atlanta, SERFC GA",KEWX:"Austin/San Antonio, TX",KBMX:"Birmingham, AL",KBRO:"Brownsville, TX",KCRP:"Corpus Christi, TX",KFWD:"Dallas/Fort Worth, TX",KFWR:"Fort Worth, WGRFC TX",KEPZ:"El Paso, TX",KHGX:"Houston/Galveston, TX",KHUN:"Huntsville, AL",KJAN:"Jackson, MS",KJAX:"Jacksonville, FL",KMRX:"Knoxville/Tri-Cities, TN",KEYX:"Key West, FL",KKEY:"Key West, FL",KEYW:"Key West, FL",KLCH:"Lake Charles, LA",KLZK:"Little Rock, AR",KLUB:"Lubbock, TX",KMLB:"Melbourne, FL",KMEG:"Memphis, TN",KMFL:"Miami, FL",KMAF:"Midland/Odessa, TX",KMOB:"Mobile, AL",KOHX:"Nashville, TN",KLIX:"New Orleans/Baton Rouge, LA",KORN:"Slidell, LMRFC LA",KOUN:"Oklahoma City, OK",KSJT:"San Angelo, TX",TJSJ:"San Juan, PR",KSHV:"Shreveport, LA",KTAE:"Tallahassee, FL",KTBW:"Tampa Bay/Ruskin, FL",KTSA:"Tulsa, OK",KTUA:"Tulsa, ABRFC OK",KABR:"Aberdeen, SD",KAPX:"Alpena/Gaylord, MI",KBIS:"Bismarck, ND",KCYS:"Cheyenne, WY",KLOT:"Chicago, IL",KDVN:"Davenport/Quad Cities, IA",KBOU:"Denver/Boulder, CO",KDMX:"Des Moines, IA",KDTX:"Detroit, MI",KDDC:"Dodge City, KS",KDLH:"Duluth, MN",KEVV:"Evansville, IN",KFGF:"Fargo/Grand Forks, ND",KGLD:"Goodland, KS",KGJT:"Grand Junction, CO",KGRR:"Grand Rapids, MI",KGRB:"Green Bay, WI",KGID:"Hastings, NE",KIND:"Indianapolis, IN",KJKL:"Jackson, KY",KEAX:"Kansas City/Pleasant Hill, MO",KKRF:"Pleasant Hill, MBRFC MO",KARX:"LaCrosse, WI",KILX:"Lincoln, IL",KLMK:"Louisville, KY",KMQT:"Marquette, MI",KMKX:"Milwaukee/Sullivan, WI",KMPX:"Minneapolis, MN",KMSR:"Chanhassen, NCRFC MN",KLBF:"North Platte, NE",KIWX:"North Webster, IN",KOAX:"Omaha, NE",KPAH:"Paducah, KY",KPUB:"Pueblo, CO",KUNR:"Rapid City, SD",KRIW:"Riverton, WY",KFSD:"Sioux Falls, SD",KSGF:"Springfield, MO",KLSX:"St. Louis, MO",KTOP:"Topeka, KS",KICT:"Wichita, KS",KBYZ:"Billings, MT",KBOI:"Boise, ID",KLKN:"Elko, NV",KEKA:"Eureka, CA",KFGZ:"Flagstaff, AZ",KGGW:"Glasgow, MT",KTFX:"Great Falls, MT",KHNX:"Hanford, CA",KVEF:"Las Vegas, NV",KLOX:"Los Angeles, CA",KMFR:"Medford, OR",KMSO:"Missoula, MT",KPDT:"Pendleton, OR",KPSR:"Phoenix, AZ",KPIH:"Pocatello/Idaho Falls, ID",KPQR:"Portland, OR",KPTR:"Portland, NWRFC OR",KREV:"Reno, NV",KSTO:"Sacramento, CA",KRSA:"Sacramento, CNRFC CA",KSLC:"Salt Lake City, UT",KSTR:"Salt Lake City, CBRFC UT",KSGX:"San Diego, CA",KMTR:"San Francisco/Monterey, CA",KSEW:"Seattle/Tacoma, WA",KOTX:"Spokane, WA",KTWC:"Tucson, AZ",PAFC:"Anchorage, AK",PACR:"Anchorage, APRFC AK",PANT:"Annette Island, AK",PABR:"Barrow, AK",PABE:"Bethel, AK",PACD:"Cold Bay, AK",PAFG:"Fairbanks, AK",PAJK:"Juneau, AK",PAKN:"King Salmon, AK",PADQ:"Kodiak, AK",PAOT:"Kotzebue, AK",PAMC:"McGrath, AK",PAOM:"Nome, AK",PASN:"St. Paul Island, AK",PAVW:"Valdez, AK",PAYA:"Yakutat, AK",PHFO:"Honolulu, HI",PGUM:"Tiyan, GU",NSTU:"Pago Pago, AS",NCDC:"National Climatic Data Center, NC",NCEP:"National Centers for Environmental Prediction, MD",NSSL:"National Severe Storms Laboratory, OK",NDBC:"National Data Buoy Center, MS",KTPC:"Tropical Prediction Center, FL",KNHC:"National Hurricane Center, FL",KHPC:"Hydrometeorological Prediction Center, MD",KWNH:"Hydrometeorological Prediction Center, MD",KAWC:"Aviation Weather Center, MO",KSPC:"Storm Prediction Center, OK",SWPC:"Space Weather Prediction Center, CO",KCPC:"Climate Prediction Center, MD",KOPC:"Ocean (Marine) Prediction Center, MD",KMPC:"Marine (Ocean) Prediction Center, MD",KWNM:"Marine (Ocean) Prediction Center, MD",KWBC:"Telecommunications Operations Center, MD",KWBN:"Telecommunications Operations Center, MD",PAAQ:"West Coast/Alaska Tsunami Warning Center, AK",PHEB:"Pacific Tsunami Warning Center, HI",AAWU:"Alaska Aviation Weather Unit, AK",CPHC:"Central Pacific Hurricane Center, HI",ITIC:"International Tsunami Information Center, HI",KZZZ:"The Weather Channel, GA"};return{getOfficeName:function(officeId){return nwsOfficeIDMapping[officeId]}}}).factory('wxReadyLinkMapping',['linkerFactory',function(linkerFactory){var phenomSigMapping=[["Air Quality","TAP","W"],["Air Quality","TAP","A"],["Air Quality","TAQ","Y"],["Air Quality","TAQ","TL"],["Air Quality","TAQ","W"],["Air Quality","TAQ","A"],["Air Quality","AS","Y"],["Air Quality","TOZ","TA"],["Air Quality","TOZ","TL"],["Air Quality","TOZ","W"],["Earthquakes","TEQ","W"],["Extreme Cold","EC","W"],["Extreme Cold","EC","A"],["Extreme Cold","WC","Y"],["Extreme Cold","WC","W"],["Extreme Cold","WC","A"],["Extreme Heat","EH","W"],["Extreme Heat","EH","A"],["Extreme Heat","HT","Y"],["Flooding","CF","Y"],["Flooding","CF","S"],["Flooding","CF","W"],["Flooding","CF","A"],["Flooding","FF","W"],["Flooding","FF","A"],["Flooding","FA","Y"],["Flooding","FA","TB"],["Flooding","FA","W"],["Flooding","FA","A"],["Flooding","HY","S"],["Flooding","LS","Y"],["Flooding","LS","S"],["Flooding","LS","W"],["Flooding","LS","A"],["Flooding","FL","Y"],["Flooding","FL","W"],["Flooding","FL","A"],["Fog","FG","Y"],["Fog","MF","Y"],["Fog","ZF","Y"],["Frost/Freezes","FZ","W"],["Frost/Freezes","FZ","A"],["Frost/Freezes","FR","Y"],["Frost/Freezes","HZ","W"],["Frost/Freezes","HZ","A"],["General Significant Weather","TNO","TE"],["General Significant Weather","AF","Y"],["General Significant Weather","MH","Y"],["General Significant Weather","AF","W"],["General Significant Weather","TCA","TE"],["General Significant Weather","TCD","W"],["General Significant Weather","TCE","TM"],["General Significant Weather","TEM","TB"],["General Significant Weather","TEV","TB"],["General Significant Weather","THM","W"],["General Significant Weather","TLA","W"],["General Significant Weather","TLC","TE"],["General Significant Weather","LO","Y"],["General Significant Weather","TNU","W"],["General Significant Weather","TRH","W"],["General Significant Weather","TSP","W"],["General Significant Weather","TSG","TL"],["General Significant Weather","TSL","S"],["General Significant Weather","TTW","TB"],["General Significant Weather","-","-"],["General Significant Weather","TVO","W"],["General Significant Weather","TWX","TB"],["General Significant Weather","TWX","TR"],["High Winds","DU","Y"],["High Winds","DS","W"],["High Winds","EW","W"],["High Winds","HW","W"],["High Winds","HW","A"],["High Winds","WI","Y"],["Hurricanes","HU","W"],["Hurricanes","HU","A"],["Hurricanes","HI","W"],["Hurricanes","HI","A"],["Hurricanes","HU","S"],["Hurricanes","TTP","S"],["Hurricanes","TY","W"],["Hurricanes","TY","A"],["Marine","BH","S"],["Marine","BW","Y"],["Marine","TCL","TB"],["Marine","UP","Y"],["Marine","GL","W"],["Marine","GL","A"],["Marine","SE","W"],["Marine","SE","A"],["Marine","UP","W"],["Marine","UP","A"],["Marine","SU","Y"],["Marine","SU","W"],["Marine","HF","W"],["Marine","HF","A"],["Marine","LW","Y"],["Marine","MA","TM"],["Marine","MA","S"],["Marine","RP","S"],["Marine","RB","Y"],["Marine","SC","Y"],["Marine","SI","Y"],["Marine","SW","Y"],["Marine","MA","W"],["Marine","SR","W"],["Marine","SR","A"],["Marine","TS","Y"],["Marine","TS","TB"],["Marine","TS","W"],["Marine","TS","A"],["Severe Weather","TAW","W"],["Severe Weather","TLM","TR"],["Severe Weather","SV","W"],["Severe Weather","SV","A"],["Severe Weather","TSA","W"],["Severe Weather","TSA","A"],["Severe Weather","TSG","Y"],["Tornadoes","TO","W"],["Tornadoes","TO","A"],["Tropical Storms","TR","W"],["Tropical Storms","TR","A"],["Tropical Storms","TI","W"],["Tropical Storms","TI","A"],["Winds/Wildfires","MS","Y"],["Winds/Wildfires","SM","Y"],["Winds/Wildfires","TFI","W"],["Winds/Wildfires","FW","TB"],["Winds/Wildfires","FW","W"],["Winds/Wildfires","FW","A"],["Winter Weather","TAV","TB"],["Winter Weather","TAV","W"],["Winter Weather","TAV","A"],["Winter Weather","BZ","W"],["Winter Weather","BZ","A"],["Winter Weather","ZR","Y"],["Winter Weather","IS","W"],["Winter Weather","LE","Y"],["Winter Weather","LB","Y"],["Winter Weather","LE","W"],["Winter Weather","LE","A"],["Winter Weather","WS","W"],["Winter Weather","WS","A"],["Winter Weather","WW","Y"],["Winter Weather","WW","TB"]],linksMapping=[{category:"EARTHQUAKES",title:"Stay Safe During an Earthquake",url:"/safety/earthquake/news/earthquake-safety-during-20120330",type:"",target:""},{category:"EARTHQUAKES",title:"Earthquake Recovery",url:"/safety/earthquake/news/earthquake-safety-after-20120330",type:"",target:""},{category:"EARTHQUAKES",title:"How to Prepare for Earthquakes",url:"/safety/earthquake/news/earthquake-safety-before-20120330",type:"",target:""},{category:"EARTHQUAKES",title:"Is Your Area At Risk for an Earthquake?",url:"/safety/earthquake/news/earthquake-risk-20120330",type:"",target:""},{category:"EARTHQUAKES",title:"Protect Your Property from a Landslide",url:"/safety/earthquake/news/prepare-for-landslide-20120330",type:"",target:""},{category:"EXTREME HEAT",title:"Ways to Stay Cool During a Heat Wave",url:"/safety/heat/news/wxready-heat-safety-during-20120419",type:"",target:""},{category:"EXTREME HEAT",title:"Conserving Water in a Drought",url:"/safety/heat/news/conserving-water-drought-20120330",type:"",target:""},{category:"EXTREME HEAT",title:"Health Impacts of Extreme Heat",url:"/safety/heat/news/impact-heat-health-20120330",type:"",target:""},{category:"EXTREME HEAT",title:"Heat Hazards for Outdoor Workers",url:"/safety/heat/news/heat-hazards-workers-20120330",type:"",target:""},{category:"EXTREME HEAT",title:"How to Prepare for a Heat Wave",url:"/safety/heat/news/heat-safety-before-20120330",type:"",target:""},{category:"EXTREME COLD",title:"Keep Your Pipes from Freezing",url:"/safety/winter/video/keeps-your-pipes-from-freezing",type:"video",target:""},{category:"EXTREME COLD",title:"Save Money on Heating This Winter",url:"/safety/winter/video/save-money-this-winter",type:"video",target:""},{category:"EXTREME COLD",title:"Winter Home Protection Tips",url:"/safety/winter/news/winter-home-protection-tips-20120423",type:"",target:""},{category:"EXTREME COLD",title:"What to Do If Your Pipes Freeze",url:"/safety/winter/news/your-pipes-freeze-20120404",type:"",target:""},{category:"EXTREME COLD",title:"Is Your Area At Risk For Winter Storms?",url:"/safety/winter/news/are-you-at-risk-20120404",type:"",target:""},{category:"FROST/FREEZES",title:"Preventing Frozen Pipes",url:"/safety/winter/news/preventing-frozen-pipes-20120404",type:"",target:""},{category:"FROST/FREEZES",title:"What to Do If Your Pipes Freeze",url:"/safety/winter/news/your-pipes-freeze-20120404",type:"",target:""},{category:"FROST/FREEZES",title:"Gear Up for Cold Weather",url:"/safety/winter/news/winter-preventative-action-20120601",type:"",target:""},{category:"FROST/FREEZES",title:"Driving in Hazardous Weather",url:"/safety/auto/video/driving-in-all-types-of-weather",type:"video",target:""},{category:"FROST/FREEZES",title:"Current Weather Maps",url:"/maps/current",type:"",target:""},{category:"FLOODING",title:"Power Outage Checklist",url:"/safety/hurricane/news/power-outage-checklist-20120601",type:"",target:""},{category:"FLOODING",title:"Preparing for a Flood",url:"/safety/floods/news/floods-safety-before-20120423",type:"",target:""},{category:"FLOODING",title:"Cleaning Up After a Flood",url:"/safety/floods/news/cleaning-up-after-flood-20120423",type:"",target:""},{category:"FLOODING",title:"Flood Watches and Warnings Explained",url:"/safety/floods/news/flood-watches-warnings-20120423",type:"",target:""},{category:"FLOODING",title:"Preventing Water Damage",url:"/safety/floods/news/preventing-water-damage-20120423",type:"",target:""},{category:"HURRICANES",title:"Power Outage Checklist",url:"/safety/hurricane/news/power-outage-checklist-20120601",type:"",target:""},{category:"HURRICANES",title:"Get Your Roof Hurricane-Ready",url:"/safety/hurricane/video/get-your-roof-ready-for-a-hurricane",type:"video",target:""},{category:"HURRICANES",title:"If a Hurricane Watch or Warning Is Issued",url:"/safety/hurricane/news/hurricanes-safety-during-20120330",type:"",target:""},{category:"HURRICANES",title:"Prepare Your Hurricane Safety Kit",url:"/safety/hurricane/video/get-your-hurricane-kit-ready-now",type:"video",target:""},{category:"HURRICANES",title:"Hurricane Wind and Water Protection",url:"/safety/hurricane/news/wind-and-water-protection-article-20120330",type:"",target:""},{category:"TROPICAL STORMS",title:"Power Outage Checklist",url:"/safety/hurricane/news/power-outage-checklist-20120601",type:"",target:""},{category:"TROPICAL STORMS",title:"Should You Tape Your Windows?",url:"/safety/hurricane/video/should-you-tape-windows-for-hurricane",type:"video",target:""},{category:"TROPICAL STORMS",title:"Getting Rid of Mold After the Storm",url:"/safety/hurricane/video/getting-rid-of-mold-after-a-hurricane",type:"video",target:""},{category:"TROPICAL STORMS",title:"Prepare Your Storm Safety Kit",url:"/safety/hurricane/video/get-your-hurricane-kit-ready-now",type:"video",target:""},{category:"TROPICAL STORMS",title:"Safety Tips During the Storm",url:"/safety/hurricane/news/hurricanes-safety-during-20120330",type:"",target:""},{category:"AIR QUALITY",title:"Protect Your Family From Air Pollution",url:"/health/airquality/news/protect-your-family-air-pollution-20120329",type:"",target:""},{category:"AIR QUALITY",title:"Three Tips for Faster Asthma Relief",url:"/health/airquality/news/3-tips-faster-20120417",type:"",target:""},{category:"AIR QUALITY",title:"Important Asthma Triggers",url:"/health/airquality/news/important-asthma-triggers-20120328",type:"",target:""},{category:"AIR QUALITY",title:"National Forecast",url:"/forecast/national/video/a-national-look-at-the-next-3-days",type:"video",target:""},{category:"AIR QUALITY",title:"Current Weather Maps",url:"/maps/current",type:"",target:""},{category:"FOG",title:"Drive Safely in Foggy Conditions",url:"/safety/auto/news/driving-reduced-visibility-20120423#/2",type:"",target:""},{category:"FOG",title:"Tips to See More Clearly on the Road",url:"/safety/auto/news/bright-idea-check-vehicle-lights-20120712",type:"",target:""},{category:"FOG",title:"Dangers of Driving in Dense Fog",url:"/news/news/fog-driving-travel-danger-20121127",type:"",target:""},{category:"FOG",title:"Safe Driving in All Types of Weather",url:"/safety/auto/video/driving-in-all-types-of-weather",type:"video",target:""},{category:"FOG",title:"Check the Latest Road Weather Conditions",url:"/forecast/commuter?layers=driving",type:"",target:""},{category:"MARINE",title:"Use Wind and Current When Docking",url:"/sports-recreation/boat-beach/news/motor-boat-wind-current-docking-20120418",type:"",target:""},{category:"MARINE",title:"Docking in Heavy Winds",url:"/sports-recreation/boat-beach/news/docking-in-heavy-winds-20120328",type:"",target:""},{category:"MARINE",title:"Rip Current Overview",url:"/health/news/nasty-ways-summer-can-hurt-your-health-20140630#/2",type:"",target:""},{category:"MARINE",title:"Crucial Tips to Avoid Lightning Strikes",url:"/sports-recreation/boat-beach/news/motor-boat-lightning-strikes-20120420",type:"",target:""},{category:"MARINE",title:"Interactive Boating Map (Intellicast)",url:"http://www.intellicast.com/Marine/Boating.aspx",type:"",target:"external"},{category:"SEVERE WEATHER",title:"Be Prepared for Severe Storms",url:"/news/tstorms-lightning-hail-before-20120423",type:"",target:""},{category:"SEVERE WEATHER",title:"Safety Tips During Severe Weather",url:"/safety/news/wxr008",type:"",target:""},{category:"SEVERE WEATHER",title:"Stay Safe After a Severe Storm Passes",url:"/news/tstorms-lightning-hail-after-20120423",type:"",target:""},{category:"SEVERE WEATHER",title:"Watches vs. Warnings; What's the Difference?",url:"/safety/thunderstorms/news/watch-vs-warning-whats-difference-20140409",type:"",target:""},{category:"SEVERE WEATHER",title:"Lightning Safety Tips",url:"/news/lightning-safety-tips-20120426",type:"",target:""},{category:"TORNADOES",title:"Tornado Watches and Warnings Explained",url:"/news/tornado-watches-warnings-20120330",type:"",target:""},{category:"TORNADOES",title:"What to Do if a Tornado Threatens",url:"/safety/tornado/news/tornadoes-safety-during-20120330",type:"",target:""},{category:"TORNADOES",title:"Safety Tips After the Storm",url:"/safety/tornado/news/tornadoes-safety-after-20120330",type:"",target:""},{category:"TORNADOES",title:"What to Include in a Disaster Supply Kit",url:"/safety/tornado/news/disaster-supply-kit-20120330",type:"",target:""},{category:"TORNADOES",title:"Tornado Safety Myths vs. Facts",url:"/storms/tornado/news/tornado-safety-red-cross-20140408",type:"",target:""},{category:"WINDS AND WILDFIRES",title:"Practice Wildfire Safety",url:"/news/wind-wildfires-safety-before-20120330",type:"",target:""},{category:"WINDS AND WILDFIRES",title:"What to Do if a Wildfire Threatens",url:"/news/wind-wildfires-safety-during-20120330",type:"",target:""},{category:"WINDS AND WILDFIRES",title:"Safety After a Wildfire",url:"/news/wind-wildfires-safety-page-20120330",type:"",target:""},{category:"WINDS AND WILDFIRES",title:"Inspecting Your Home After a Wildfire",url:"/news/wildfire-inpsect-home-20120601",type:"",target:""},{category:"WINDS AND WILDFIRES",title:"Are You at Risk for a Wildfire?",url:"/news/wildfires-risk-20120330",type:"",target:""},{category:"HIGH WINDS",title:"Be Prepared for High Winds",url:"/news/what-high-winds-20120330",type:"",target:""},{category:"HIGH WINDS",title:"General Driving Safety Tips",url:"/safety/auto",type:"",target:""},{category:"HIGH WINDS",title:"Check the Latest Road Weather Conditions",url:"/forecast/commuter?layers=driving",type:"",target:""},{category:"HIGH WINDS",title:"Interactive Wind Map",url:"/weather/map/interactive/l/{{dynamicLocId}}?layers=wind",type:"",target:""},{category:"HIGH WINDS",title:"More Current Weather Maps",url:"/maps/current",type:"",target:""},{category:"WINTER WEATHER",title:"Be Ready Before Wintry Weather Hits",url:"/safety/winter/news/winter-weather-safety-before-20120330",type:"",target:""},{category:"WINTER WEATHER",title:"Safety Tips During the Storm",url:"/safety/winter/news/storms-during-the-storm-20120416",type:"",target:""},{category:"WINTER WEATHER",title:"Ways to Stay Safe After a Winter Storm",url:"/safety/winter/news/winter-weather-safety-after-20120404",type:"",target:""},{category:"WINTER WEATHER",title:"Types of Winter Precipitation",url:"/safety/winter/news/types-winter-precipitation-20120423",type:"",target:""},{category:"WINTER WEATHER",title:"View Live Traffic and Commute Forecasts",url:"/forecast/commuter?layers=radar",type:"traffic",target:""},{category:"GENERAL SIGNIFICANT WEATHER",title:"All Severe Weather Safety Tips",url:"/safety",type:"",target:""},{category:"GENERAL SIGNIFICANT WEATHER",title:"See More Weather Alerts",url:"/storms/alerts",type:"",target:""},{category:"GENERAL SIGNIFICANT WEATHER",title:"Severe Weather News",url:"/storms/severe",type:"",target:""},{category:"GENERAL SIGNIFICANT WEATHER",title:"Watches & Warnings Explained",url:"/safety/thunderstorms/news/watch-vs-warning-whats-difference-20140409",type:"",target:""},{category:"GENERAL SIGNIFICANT WEATHER",title:"National Forecast",url:"/forecast/national/video/a-national-look-at-the-next-3-days",type:"video",target:""}];return{getCategory:function(phenomenon,significance){for(var i=0;i<=phenomSigMapping.length-1;i++){var phenomSigRow=phenomSigMapping[i];if(phenomSigRow[1]===phenomenon&&phenomSigRow[2]===significance)return phenomSigRow[0]};return null},getLinks:function(category){var linkArray=[];for(var i=0;i<=linksMapping.length-1;i++){var linkRow=linksMapping[i];if(linkRow.category.toLowerCase()===category.toLowerCase())linkArray.push({category:linkRow.category,title:linkRow.title,url:linkerFactory.interpolateLinkUrl(linkRow.url),type:linkRow.type||'article',target:linkRow.target||'internal'})};return linkArray}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/alert_factory/alert_factory.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/app_config/app.config.js. */
twc.shared.apps.config(['twcConfigProvider',function(twcConfigProvider){twcConfigProvider.add({module_status_codes:{LOADING:"loading",NOT_AVAILABLE:"na",ERROR:"error",DEFAULT:"default"}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/app_config/app.config.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/fast_button/fastbutton/google.fastbutton.js. */
(function(){function addListener(el,type,listener,useCapture){if(el.addEventListener){el.addEventListener(type,listener,useCapture);return{destroy:function(){el.removeEventListener(type,listener,useCapture)}}}else{var handler=function(e){listener.handleEvent(window.event,listener)};el.attachEvent('on'+type,handler);return{destroy:function(){el.detachEvent('on'+type,handler)}}}};var isTouch="ontouchstart"in window;this.FastButton=function(element,handler,useCapture){this.events=[];this.touchEvents=[];this.element=element;this.handler=handler;this.useCapture=useCapture;if(isTouch)this.events.push(addListener(element,'touchstart',this,this.useCapture));this.events.push(addListener(element,'click',this,this.useCapture))};this.FastButton.prototype.destroy=function(){for(var i=this.events.length-1;i>=0;i-=1)this.events[i].destroy();this.events=this.touchEvents=this.element=this.handler=this.fastButton=null};this.FastButton.prototype.handleEvent=function(event){switch(event.type){case'touchstart':this.onTouchStart(event);break;case'touchmove':this.onTouchMove(event);break;case'touchend':this.onClick(event);break;case'click':this.onClick(event);break}};this.FastButton.prototype.onTouchStart=function(event){event.stopPropagation?event.stopPropagation():(event.cancelBubble=true);this.touchEvents.push(addListener(this.element,'touchend',this,this.useCapture));this.touchEvents.push(addListener(document.body,'touchmove',this,this.useCapture));this.startX=event.touches[0].clientX;this.startY=event.touches[0].clientY};this.FastButton.prototype.onTouchMove=function(event){if(Math.abs(event.touches[0].clientX-this.startX)>10||Math.abs(event.touches[0].clientY-this.startY)>10)this.reset()};this.FastButton.prototype.onClick=function(event){event.stopPropagation?event.stopPropagation():(event.cancelBubble=true);this.reset();var result=this.handler.call(this.element,event);if(event.type==='touchend')clickbuster.preventGhostClick(this.startX,this.startY);return result};this.FastButton.prototype.reset=function(){for(var i=this.touchEvents.length-1;i>=0;i-=1)this.touchEvents[i].destroy();this.touchEvents=[]};this.clickbuster=function(){};this.clickbuster.preventGhostClick=function(x,y){clickbuster.coordinates.push(x,y);window.setTimeout(clickbuster.pop,2500)};this.clickbuster.pop=function(){clickbuster.coordinates.splice(0,2)};this.clickbuster.onClick=function(event){for(var i=0;i<clickbuster.coordinates.length;i+=2){var x=clickbuster.coordinates[i],y=clickbuster.coordinates[i+1];if(Math.abs(event.clientX-x)<25&&Math.abs(event.clientY-y)<25){event.stopPropagation?event.stopPropagation():(event.cancelBubble=true);event.preventDefault?event.preventDefault():(event.returnValue=false)}}};if(isTouch){document.addEventListener('click',clickbuster.onClick,true);clickbuster.coordinates=[]}})(this);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/fast_button/fastbutton/google.fastbutton.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/fast_button/fast_button.factory.js. */
twc.shared.apps.factory('FastButton',function(){return FastButton});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/fast_button/fast_button.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_reference/twc_reference.directive.js. */
twc.shared.apps.directive('twcReferenceScope',function($rootScope){'use strict';return{restrict:'A',controller:function($scope){this.refScope=function(){return $scope.refScope}},link:function(scope,element,attrs,ctrl){scope.refScope=scope.$eval(attrs.twcReferenceScope)}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_reference/twc_reference.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/anim/vendor/anim_modified/anim.modified.js. */
var anim=function(A){"use strict";A=function(n,g,t,e){var a,o,c,q=[],cb=function(i){if(i=q.shift())i[1]?A.apply(this,i).anim(cb):i[0]>0?setTimeout(cb,i[0]*1e3):(i[0](),cb())};if(n.charAt)n=document.getElementById(n);if(n>0||!n)g={},t=0,cb(q=[[n||0]]);expand(g,{padding:0,margin:0,border:"Width"},[T,R,B,L]);expand(g,{borderRadius:"Radius"},[T+L,T+R,B+R,B+L]);++mutex;for(a in g){o=g[a];if(!o.to&&o.to!==0)o=g[a]={to:o};A.defs(o,n,a,e)};A.iter(g,t*1e3,cb);return{anim:function(){q.push([].slice.call(arguments));return this}}};var T="Top",R="Right",B="Bottom",L="Left",mutex=1,expand=function(g,dim,dir,a,i,d,o){for(a in g)if(a in dim){o=g[a];for(i=0;d=dir[i];i++)g[a.replace(dim[a],"")+d+(dim[a]||"")]={to:(o.to===0)?o.to:(o.to||o),fr:o.fr,e:o.e};delete g[a]}},timeout=function(w,a){return w["webkitR"+a]||w["r"+a]||w["mozR"+a]||w["msR"+a]||w["oR"+a]}(window,"equestAnimationFrame");A.defs=function(o,n,a,e,s){s=n.style;o.a=a;o.n=n;o.s=(a in s)?s:n;o.e=o.e||e;o.fr=o.fr||(o.fr===0?0:o.s==n?n[a]:(window.getComputedStyle?getComputedStyle(n,null):n.currentStyle)[a]);o.u=(/\d(\D+)$/.exec(o.to)||/\d(\D+)$/.exec(o.fr)||[0,0])[1];o.fn=/color/i.test(a)?A.fx.color:(A.fx[a]||A.fx._);o.mx="anim_"+a;n[o.mx]=o.mxv=mutex;if(n[o.mx]!=o.mxv)o.mxv=null};A.iter=function(g,t,cb){var _,i,o,p,e,z=+new Date()+t,_=function(now){i=z-new Date().getTime();if(i<50){for(o in g)o=g[o],o.p=1,o.fn(o,o.n,o.to,o.fr,o.a,o.e);cb&&cb()}else{i=i/t;for(o in g){o=g[o];if(o.n[o.mx]!=o.mxv)return;e=o.e;p=i;if(e=="lin"){p=1-p}else if(e=="ease"){p=(0.5-p)*2;p=1-((p*p*p-p*3)+2)/4}else if(e=="ease-in"){p=1-p;p=p*p*p}else p=1-p*p*p;o.p=p;o.fn(o,o.n,o.to,o.fr,o.a,o.e)};timeout?timeout(_):setTimeout(_,20,0)}};_()};A.fx={_:function(o,n,to,fr,a,e){fr=parseFloat(fr)||0,to=parseFloat(to)||0,o.s[a]=(o.p>=1?to:(o.p*(to-fr)+fr))+o.u},width:function(o,n,to,fr,a,e){if(!(o._fr>=0))o._fr=!isNaN(fr=parseFloat(fr))?fr:a=="width"?n.clientWidth:n.clientHeight;A.fx._(o,n,to,o._fr,a,e)},opacity:function(o,n,to,fr,a,e){if(isNaN(fr=fr||o._fr))fr=n.style,fr.zoom=1,fr=o._fr=(/alpha\(opacity=(\d+)\b/i.exec(fr.filter)||{})[1]/100||1;fr*=1;to=(o.p*(to-fr)+fr);n=n.style;if(a in n){n[a]=to}else n.filter=to>=1?"":"alpha("+a+"="+Math.round(to*100)+")"},color:function(o,n,to,fr,a,e,i,v){if(!o.ok){to=o.to=A.toRGBA(to);fr=o.fr=A.toRGBA(fr);if(to[3]==0)to=[].concat(fr),to[3]=0;if(fr[3]==0)fr=[].concat(to),fr[3]=0;o.ok=1};v=[0,0,0,o.p*(to[3]-fr[3])+1*fr[3]];for(i=2;i>=0;i--)v[i]=Math.round(o.p*(to[i]-fr[i])+1*fr[i]);if(v[3]>=1||A.rgbaIE)v.pop();try{o.s[a]=(v.length>3?"rgba(":"rgb(")+v.join(",")+")"}catch(e){A.rgbaIE=1}}};A.fx.height=A.fx.width;A.RGBA=/#(.)(.)(.)\b|#(..)(..)(..)\b|(\d+)%,(\d+)%,(\d+)%(?:,([\d\.]+))?|(\d+),(\d+),(\d+)(?:,([\d\.]+))?\b/;A.toRGBA=function(s,v){v=[0,0,0,0];s.replace(/\s/g,"").replace(A.RGBA,function(i,a,b,c,f,g,h,l,m,n,o,w,x,y,z){var h=[a+a||f,b+b||g,c+c||h],p=[l,m,n];for(i=0;i<3;i++)h[i]=parseInt(h[i],16),p[i]=Math.round(p[i]*2.55);v=[h[0]||p[0]||w||0,h[1]||p[1]||x||0,h[2]||p[2]||y||0,o||z||1]});return v};return A}();;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/anim/vendor/anim_modified/anim.modified.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.berecord.js. */
twc.shared.apps.factory('WxdBERecordModelClass',['RecordModel','twcUtil',function(RecordModel,twcUtil){return RecordModel.extend({recordType:'BERecord',construct:function(){this._langToNarrTextCache={};RecordModel.prototype.construct.apply(this,arguments)},setResponse:function(response){this.header=response.BEHdr;this.data=response.BEData;this.event=response.BEHdr&&response.BEHdr.bEvent||{};this.location=response.BEHdr&&response.BEHdr.bLocations||{}},getLocationCounty:function(){return this.location.bLocCd__bLoc},getLocationStateCd:function(){return this.location.bStCd},getLocationState:function(){return this.location.bStCd_bSt},getLocationType:function(){return this.location.bLocCd__bLocTyp},getLocationCd:function(){return this.location.bLocCd},getLocationStateName:function(){return this.location.bStCd__bSt},getLocationUTCOffset:function(){return this.location.bUTCDiff},getLocationTimeZone:function(){return this.location.bTzAbbrv},getEventSeverity:function(){return this.event.eSvrty},getEventSignificance:function(){return this.event.eSgnfcnc},getEventDescription:function(){return this.event.eDesc},getEventDescriptionSuffix:function(){return this.header._multiPostfix},getEventTrackingNumber:function(){return this.event.eETN},getEventActionPriority:function(){return this.event.eActionCd__eActionPriority},getEventActionCode:function(){return this.event.eActionCd},getEventPhenomena:function(){return this.event.ePhenom},getEventStartTimeInUTC:function(){return this.event.eStTmUTC},getEventEndTimeInUTC:function(){return this.event.eEndTmUTC},getEventStartLocalTime:function(){return this.event._eStTmLocal},getEventEndLocalTime:function(){return this.event._eEndTmLocal},getEventOfficeId:function(){return this.event.eOfficeId},getTwcIId:function(){return this.event.eTWCIId},getEventOfficeName:function(){return this.event.eOfficeId__eOfficeNm},getFloodCode:function(){return this.event.eFld&&this.event.eFld.eFldRcrdCd},getFloodRecordDescription:function(){return this.event.eFld&&this.event.eFld.eFldRcrdCd__eFldRcrd},getFloodSeverityCode:function(){return this.event.eFld&&this.event.eFld.eFldSvrtyCd},getFloodSeverityDescription:function(){return this.event.eFld&&this.event.eFld.eFldSvrtyCd__eFldSvrty},getFloodCauseCode:function(){return this.event.eFld&&this.event.eFld.eFldCauseCd},getFloodCauseDescription:function(){return this.event.eFld&&this.event.eFld.eFldCauseCd__eFldCause},getFloodRiverName:function(){return this.event.eFld&&this.event.eFld.eNWSLICd__eNWSLI},getFloodEventDescriptionSuffix:function(){return this.event.eFld&&this.event.eFld._eFldSeq},getHeadlineText:function(){var headline=this._get('bHdln');return headline&&headline[0]&&headline[0].bHdlnTxt},getNarrativeLangList:function(){return this._get('bNarrTxt__bNarrTxtLang')},getIssueTimeInUTC:function(){return this._get('bIssueTmUTC')},getIssueTimeLocalISO:function(){return this._get('bIssueTmISOLocal')},getProcessTime:function(){return this.header._procTmLocal},getNarrativeTextByLanguage:function(lang){lang=lang||'en-GB';var narrTxt=this._langToNarrTextCache[lang];if(this._langToNarrTextCache[lang]===undefined){narrTxt=twcUtil.find(this._get('bNarrTxt')||[],function(narrTxt){return narrTxt});narrTxt=narrTxt||null;this._langToNarrTextCache[lang]=narrTxt};return narrTxt&&narrTxt.bLn}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.berecord.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/xweb.webdfrecord.js. */
twc.shared.apps.factory('XwebWebDFRecordModelClass',['RecordModel','pcoUser','dsxModelUtils',function(RecordModel,pcoUser,dsxModelUtils){return RecordModel.extend({recordType:'WebDFRecord',setResponse:function(response){this.data=response.WebDFData;this.header="N/A";this.day=this.getDayObj();this.night=this.getNightObj()},getSunRise:function(response){return this._get("_sunriseISOLocal")},getSunSet:function(response){return this._get("_sunsetISOLocal")},getForecastDate:function(){return this._get('locValDay')},getForecastTime:function(){return this._get('locValTm')},getDayOfWeek:function(){return this._get('dow')},getUser:function(){return pcoUser},getTempUnit:function(){return pcoUser.getTempUnit()},getAccumulationUnit:function(){return pcoUser.getAccumulationUnit()},getSpeedUnit:function(){return pcoUser.getSpeedUnit()},getSpeedMeasure:function(){return pcoUser.getSpeedMeasure()},getPrecipAllDay:function(){return dsxModelUtils.getPrecipValue(this,'qpf')},getChanceOfPrecipAllDay:function(){return this._get('pOP24')},getPrecipTypeAllDay:function(){return this._get('precipTyp24')},getUVIndex:function(){return this._get('uvIdx')},getUVDescription:function(){return this._get('uvDes')},getSkyCode:function(){return this._get('sky')},getSkyXCode:function(){return this._get('skyX')},getSky12:function(){return this._get('sky12')},getHiTemp:function(){return this._get('hiTmp'+this.getTempUnit())},getPhrase:function(){if(this.getTempUnit()==="F"){return this._get('narrative24')}else return this._get('alt_narrative24')},getDayObj:function(){var that=this;return{isDay:true,getForecastDate:function(){return that._get('locValDay')},getTemp:function(){return that._get('hiTmp'+that.getTempUnit())},getUVIndex:function(){return that._get('uvIdx')},getUVDescription:function(){return that._get('uvDes')},getSkyCode:function(){return that._get('sky12')},getSkyXCode:function(){return that._get('sky12X')},getSensibleWx:function(){return that._get('snsblWx12')},getPhrase:function(){if(TWC&&TWC.pco&&TWC.pco.getNodeValue("user","locale")==="en_GB"&&that.getTempUnit()==="C")return that._get('narrative12h');if(that.getTempUnit()==="F"){return that._get('narrative12i')}else return that._get('narrative12m')},getTitanPhrase:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB"&&that.getTempUnit()==="C")return that._get('narrative12h');return(that.getTempUnit()==="F")?that._get('narrative12i'):that._get('narrative12m')},getChanceOfPrecip:function(){return that._get('pOP12')},getPrecipType:function(){return that._get('precipTyp12')},getWindDirection:function(){return that._get('wDirAsc12')},getWindSpeed:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB")return that._get('wSpdM12');return that._get('wSpd'+that.getSpeedUnit()+'12')},getHumidity:function(){return that._get('rH12')},getExtendedQualifier:function(){if(that.getTempUnit()==="F"){return that._get('_extPhrase12')}else return that._get('_alt_extPhrase12')},getSnowAccumulationRange:function(){return(that.getAccumulationUnit()==="in")?that._get('_snwAccumTersePhrase12'):that._get('_alt_snwAccumTersePhrase12')}}},getNightObj:function(){var that=this;return{isNight:true,getForecastDate:function(){return that._get('locValDay')},getTemp:function(){return that._get('loTmp'+that.getTempUnit())},getSkyCode:function(){return that._get('sky12_24')},getSkyXCode:function(){return that._get('sky12_24X')},getSensibleWx:function(){return that._get('snsblWx12_24')},getPhrase:function(){if(TWC&&TWC.pco&&TWC.pco.getNodeValue("user","locale")==="en_GB"&&that.getTempUnit()==="C")return that._get('narrative12_24h');if(that.getTempUnit()==="F"){return that._get('narrative12_24i')}else return that._get('narrative12_24m')},getTitanPhrase:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB"&&that.getTempUnit()==="C")return that._get('narrative12_24h');return(that.getTempUnit()==="F")?that._get('narrative12_24i'):that._get('narrative12_24m')},getChanceOfPrecip:function(){return that._get('pOP12_24')},getPrecipType:function(){return that._get('precipTyp12_24')},getWindDirection:function(){return that._get('wDirAsc12_24')},getWindSpeed:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB")return that._get('wSpdM12');return that._get('wSpd'+that.getSpeedUnit()+'12_24')},getHumidity:function(){return that._get('rH12_24')},getExtendedQualifier:function(){if(that.getTempUnit()==="F"){return that._get('_extPhrase12_24')}else return that._get('_alt_extPhrase12_24')},getSnowAccumulationRange:function(){return(that.getAccumulationUnit()==="in")?that._get('_snwAccumTersePhrase12_24'):that._get('_alt_snwAccumTersePhrase12_24')}}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/xweb.webdfrecord.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cs.datetime.js. */
twc.shared.apps.factory('CsDatetimeModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({recordType:'CsDatetimeModelClass',getDateTimeISO:function(){return this._get('datetime')},getTimeZoneAbbr:function(){return this._get('tmZnAbbr')},setResponse:function(response){this.data=response;this.header="NA"}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cs.datetime.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/location_name/location_name.filter.js. */
twc.shared.apps.filter('locationName',['$injector','twcUtil','twcConstant',function($injector,twcUtil,twcConstant){var XwebModelClass=$injector.has('XwebWebLocModelClass')&&$injector.get('XwebWebLocModelClass')
function toXWebLocModel(loc){var xwebLoc=null;switch(loc.className){case'XwebWebLocModelClass':xwebLoc=loc;break;case'WxdLocModelClass':xwebLoc=new XwebModelClass({lat:loc.getLatitude(),lng:loc.getLongitude(),name:(loc.getAddress)?loc.getAddress()+' '+loc.getCity()+', '+loc.getStateCode():loc.getCity()+', '+loc.getStateCode()+', '+loc.getCountry(),key:loc.getFullLocId(),locId:loc.getLocId(),locType:loc.getLocType(),cntryCd:loc.getCountryCode(),_country:loc.getCountry(),stCd:loc.getStateCode(),stNm:loc.getState(),cityNm:twcUtil.capitalize(loc.getCity(),true),bigCity:false,nickname:'',recentSearch:false,addr:(loc.getAddress&&loc.getAddress())},'XwebWebLocModelClass');break};return xwebLoc}
function getFormattedName(loc,longRc){if(twcUtil.isEmpty(loc))return null;var location=toXWebLocModel(loc),locTypes=twcConstant.locTypes||{},country=location.getCountryCode()==='US'&&location.getLocType()===1||location.getCountryCode()!=='US'?twcUtil.capitalize(location._get('_country'),true):'',regionName=location.data['stNm']&&location.data['stNm'].length>0?country.length>0?twcUtil.capitalize(location.getState(),true)+', ':twcUtil.capitalize(location.getState(),true):'',region=longRc?regionName+country:location._get('stCd'),presName=twcUtil.capitalize(location.getCity(),true),name1=location.getCity()+', '+region,name2=regionName.length>0?presName+', '+location._get('stNm'):presName,zip=location.getLocId(),zipSearch=location.getLocType()===locTypes.Zips&&twcUtil.isNumeric(zip)?' ('+zip+')':'',name=location.getCountryCode()==='US'?name1+zipSearch:twcUtil.capitalize(name2,true)+', '+country;return name};return getFormattedName}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/location_name/location_name.filter.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_typeahead/twc_typeahead.directive.js. */
twc.shared.apps.directive('twcTypeahead',['$timeout','$log','$swipe','$rootScope','twcConstant','customEvent','twcUtil','aliases',function($timeout,$log,$swipe,$rootScope,twcConstant,customEvent,twcUtil,aliases){'use strict';var ascii=twcConstant.ascii;return{restrict:'EA',transclude:true,replace:true,templateUrl:function(element,attrs){var templatePath='/sites/all/modules/custom/angularmods/app/shared/twc_typeahead/templates/',device=$rootScope.isMobile?'nemo':'global',template=attrs.template,basicTemplate=(angular.element('html').hasClass('lt-ie9')||angular.element('html').hasClass('ie-9'))?'_twc_typeahead_ie8.html':'_twc_typeahead_basic.html';basicTemplate=template?template+'.html':basicTemplate;return(attrs.template?templatePath+attrs.template+'.html':templatePath+device+basicTemplate)},scope:{search:'&',term:'=',select:'&',items:'=',pattern:'@',formClass:'@',iconClass:'@',placeholderText:'@',validateClass:'@',tooltip:'@',inputClass:'@',containerClass:'@',hideSearchIcon:'='},controller:["$scope",function($scope){$scope.goSearch=function(){$scope.itemsHidden=false;$scope.search({term:$scope.term})};$scope.isHighLighted=function(){return!$scope.itemsHidden&&($scope.mouseOver||$scope.hasFocus)};this.get$scope=function(){return $scope};this.getActiveItem=function(){return $scope.activeItem};this.setActiveItem=function(item){$scope.activeItem=item||null};this.setDefaultActiveItem=function(){var items=$scope.items,initialActiveItem=items&&items[0];if(initialActiveItem){initialActiveItem.autoSelect=true;this.setActiveItem(initialActiveItem);$scope.$evalAsync(function(){$scope.itemsHidden=false})}else this.setActiveItem(null)};this.selectActiveItem=function(enter){var enterPressed=enter&&$scope.activeItem&&$scope.activeItem.autoSelect?enter:false;this.selectItem($scope.activeItem,enterPressed)};this.selectItem=function(item,enterPressed){if($scope.activeItem&&!$scope.activeItem.result){if($scope.input){$scope.input.focus();if(Modernizr.touch)$scope.input.blur()};$scope.hasFocus=true;$scope.itemsHidden=true};if(item&&item.data&&item.data.recentSearch)item.autoSelect=enterPressed=false;$scope.select({item:item,enter:enterPressed})};this.search=function(){$scope.search()};this.isItemActive=function(item){return $scope.activeItem===item};this.getActiveItemIndex=function(){return $scope.items.indexOf($scope.activeItem)};this.setNextItemActive=function(){this.setItemActiveAt(this.getActiveItemIndex()+1)};this.setPrevItemActive=function(){this.setItemActiveAt(this.getActiveItemIndex()-1)};this.setItemActiveAt=function(index){var maxIndex=$scope.items.length-1;if(index<0)index=maxIndex;if(index>maxIndex)index=0;var item=$scope.items[index];if(item){item.autoSelect=false;this.setActiveItem(item)}};this.isEmpty=function(){return!$scope.term};this.focusReset=function(flag){$scope.$evalAsync(function(){$scope.hasFocus=flag})};if(!$scope.items){$scope.items=[]}else this.setDefaultActiveItem()}],link:function(scope,element,attrs,controller){var input=element.find('form > input'),itemList=element.find('div.menu'),searchIcon=element.find('div.icon--search');if(attrs.containerClass&&attrs.containerClass==='input-base')scope.input=input
function validate(reset,enter){var valid=true,childScope,val;if(!scope.activeItem&&enter===true){childScope=scope.$$childHead?scope.$$childHead:scope;if(reset===true){valid=true}else{valid=scope.term||scope.term&&scope.term.length===0&&scope.$parent.getRecentSearches&&scope.$parent.getRecentSearches().length>0?true:false;input.blur()};childScope.$apply(function(){childScope.isValid=valid})}else if(scope.activeItem&&scope.activeItem.result)if(scope.validateClass&&scope.validateClass.length>0){childScope=scope.$$childHead?scope.$$childHead:scope;val=scope.term;if(val.length>0&&!aliases.specialty[val.toLowerCase()]&&scope.activeItem.result!=='Searching...'||val===scope.placeholderText){valid=reset!==true?false:true;childScope.$apply(function(){childScope.isValid=valid;if(!valid){scope.itemsHidden=true;input.blur()}})}};return valid}
function resetInputState(){scope.$apply(function(){scope.hasFocus=false});validate(true,false)};customEvent.getEvent("page-back-event").progress(function(){resetInputState()})
function focusReset(flag){controller.focusReset(flag)};input.bind('focus',function(){focusReset(true)});scope.$watch('visible',function(){if(element.hasClass('mobile'))input.focus();if(searchIcon.length===0){searchIcon=element.find('div.icon--search');searchIcon.length===0||searchIcon.bind('click',function(){if(input.val().length>0&&validate(false,false)){scope.$apply(function(){controller.selectActiveItem()})}else if(scope.activeItem&&scope.activeItem.result)scope.$apply(function(){scope.hasFocus=true;scope.itemsHidden=false})})}});scope.$watch('hasFocus',function(hasFocus){$rootScope.$broadcast('twcTypeahead.input.focus',hasFocus);if(hasFocus);});scope.$watch('itemsHidden',function(itemsHidden){});if(Modernizr.touch){input.bind('click',function(){input.focus();$rootScope.$broadcast('twcTypeahead.mobile.input.focus',scope.hasFocus)});customEvent.getEvent('touch-on-body-event').progress(function(e){if(!scope.$root.isMobile&&scope.itemsHidden===false&&scope.mouseOver===false)scope.$apply(function(){scope.hasFocus=false})})};input.bind('blur',function(){focusReset(false)});itemList.bind('mouseover',function(){scope.$apply(function(){scope.mouseOver=true})});itemList.bind('mouseleave',function(){scope.$apply(function(){scope.mouseOver=false})});input.bind('keyup',twcUtil.debounce(function(evt){if(evt.keyCode===ascii.CR){var timeout=controller.getActiveItem().data?0:scope.term.length<3?0:850;$timeout(function(){if(validate(false,true))scope.$apply(function(){controller.selectActiveItem(true)})},timeout)}else if(evt.keyCode===ascii.ESC)input.blur()},30));input.bind('keydown',function(evt){if(evt.keyCode===ascii.CR||evt.keyCode===ascii.ESC){evt.preventDefault()}else if(evt.keyCode===ascii.DOWN){evt.preventDefault();scope.$apply(function(){controller.setNextItemActive()})}else if(evt.keyCode===ascii.UP){evt.preventDefault();scope.$apply(function(){controller.setPrevItemActive()})}else validate(true,false)});scope.$watch('items',function(newItems,oldItems){if(oldItems!==newItems)controller.setDefaultActiveItem()});scope.$watch('isHighLighted()',function(hilite){if(hilite){itemList.css({display:'block',position:'absolute',width:input[0].offsetWidth})}else itemList.css('display','none')})}}}]).directive('twcTypeaheadItem',['$swipe','$log','$compile','customEvent',function($swipe,$log,$compile,customEvent){'use strict';return{require:'^twcTypeahead',transclude:'true',template:'<div ng-click="selectItem()" ng-class="{\'twc-typeahead-item-active\': isActive()}"><div ng-transclude></div></div>',link:function(scope,element,attrs,controller){var item=scope.$eval(attrs.twcTypeaheadItem);scope.isActive=function(){return controller.isItemActive(item)};scope.selectItem=function(){item.autoSelect=false;scope.$evalAsync(function(){controller.selectItem(item)});if(Modernizr.touch&&angular.element(element).hasClass('for-touch'))$compile(element)(scope)};if(Modernizr.touch)$swipe.bind(element,{start:function(){}});element.bind('mouseenter',function(){scope.$apply(function(){controller.setActiveItem(item)})});if(!controller.isEmpty()&&scope.$last){customEvent.removeEvent('search-in-progress');customEvent.getEvent('search-in-progress').resolve({item:controller.getActiveItem()})}}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_typeahead/twc_typeahead.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_input_error_state/twc_input_error_state.directive.js. */
twc.shared.apps.directive('twcInputErrorState',function(){return{restrict:'A',scope:{isValid:'@'},link:function(scope,element,attrs){var vclass=attrs.twcInputErrorState;scope.$watch('isValid',function(isValid){if(vclass)Boolean(isValid)?element.removeClass(vclass):element.addClass(vclass)})}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_input_error_state/twc_input_error_state.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_constant/twc_constant.constant.js. */
twc.shared.apps.constant('twcConstant',{locTypes:{Region:1003,State:1001,Country:1e3,Cities:1,Golf:5,Airports:9,Ski:11,Outdoor:13,Zips:4,Parks:19,Lakes:21},statesCodesToNames:[{name:'ALABAMA',abbreviation:'AL'},{name:'ALASKA',abbreviation:'AK'},{name:'AMERICAN SAMOA',abbreviation:'AS'},{name:'ARIZONA',abbreviation:'AZ'},{name:'ARKANSAS',abbreviation:'AR'},{name:'CALIFORNIA',abbreviation:'CA'},{name:'COLORADO',abbreviation:'CO'},{name:'CONNECTICUT',abbreviation:'CT'},{name:'DELAWARE',abbreviation:'DE'},{name:'DISTRICT OF COLUMBIA',abbreviation:'DC'},{name:'FEDERATED STATES OF MICRONESIA',abbreviation:'FM'},{name:'FLORIDA',abbreviation:'FL'},{name:'GEORGIA',abbreviation:'GA'},{name:'GUAM',abbreviation:'GU'},{name:'HAWAII',abbreviation:'HI'},{name:'IDAHO',abbreviation:'ID'},{name:'ILLINOIS',abbreviation:'IL'},{name:'INDIANA',abbreviation:'IN'},{name:'IOWA',abbreviation:'IA'},{name:'KANSAS',abbreviation:'KS'},{name:'KENTUCKY',abbreviation:'KY'},{name:'LOUISIANA',abbreviation:'LA'},{name:'MAINE',abbreviation:'ME'},{name:'MARSHALL ISLANDS',abbreviation:'MH'},{name:'MARYLAND',abbreviation:'MD'},{name:'MASSACHUSETTS',abbreviation:'MA'},{name:'MICHIGAN',abbreviation:'MI'},{name:'MINNESOTA',abbreviation:'MN'},{name:'MISSISSIPPI',abbreviation:'MS'},{name:'MISSOURI',abbreviation:'MO'},{name:'MONTANA',abbreviation:'MT'},{name:'NEBRASKA',abbreviation:'NE'},{name:'NEVADA',abbreviation:'NV'},{name:'NEW HAMPSHIRE',abbreviation:'NH'},{name:'NEW JERSEY',abbreviation:'NJ'},{name:'NEW MEXICO',abbreviation:'NM'},{name:'NEW YORK',abbreviation:'NY'},{name:'NORTH CAROLINA',abbreviation:'NC'},{name:'NORTH DAKOTA',abbreviation:'ND'},{name:'NORTHERN MARIANA ISLANDS',abbreviation:'MP'},{name:'OHIO',abbreviation:'OH'},{name:'OKLAHOMA',abbreviation:'OK'},{name:'OREGON',abbreviation:'OR'},{name:'PALAU',abbreviation:'PW'},{name:'PENNSYLVANIA',abbreviation:'PA'},{name:'PUERTO RICO',abbreviation:'PR'},{name:'RHODE ISLAND',abbreviation:'RI'},{name:'SOUTH CAROLINA',abbreviation:'SC'},{name:'SOUTH DAKOTA',abbreviation:'SD'},{name:'TENNESSEE',abbreviation:'TN'},{name:'TEXAS',abbreviation:'TX'},{name:'UTAH',abbreviation:'UT'},{name:'VERMONT',abbreviation:'VT'},{name:'VIRGIN ISLANDS',abbreviation:'VI'},{name:'VIRGINIA',abbreviation:'VA'},{name:'WASHINGTON',abbreviation:'WA'},{name:'WEST VIRGINIA',abbreviation:'WV'},{name:'WISCONSIN',abbreviation:'WI'},{name:'WYOMING',abbreviation:'WY'}],ascii:{TAB:9,CR:13,ESC:27,DOWN:40,UP:38,L:37,R:39,DEL:127,BS:8},pageUrl:{hdr:{page:"/weather/today/l/",enhance:"/search/enhancedlocalsearch?where="},video:{page:"/video/",enhance:"/search/enhancedlocalsearch?where="},"ap-main":{page:"/health/aches-pains/forecast/",enhance:"/search/enhancedlocalsearch?where="},"ap-fcst":{page:"/health/aches-pains/forecast/",enhance:"/search/enhancedlocalsearch?where="},"pollen-main":{page:"/health/pollen/forecast/",enhance:"/search/enhancedlocalsearch?where="},"pollen-fcst":{page:"/health/pollen/forecast/",enhance:"/search/enhancedlocalsearch?where="},"hg-main":{page:"/home-garden/forecast/",enhance:"/search/enhancedlocalsearch?where="},"hg-fcst":{page:"/home-garden/forecast/",enhance:"/search/enhancedlocalsearch?where="},"fish-main":{page:"/outlook/recreation/outdoors/fishing/",enhance:"/search/enhancedlocalsearch?where="},"fish-fcst":{page:"/outlook/recreation/outdoors/fishing/",enhance:"/search/enhancedlocalsearch?where="},"ski-main":{page:"/sports-rec/ski/forecast/",enhance:"/sports-rec/ski/results?where="},"ski-fcst":{page:"/sports-rec/ski/forecast/",enhance:"/sports-rec/ski/results?where="},"hp-countdown":{page:"dynamic",enhance:"/search/enhancedlocalsearch?where="},title_enhanced:{page:"dynamic",enhance:"/search/enhancedlocalsearch?where="},vertSearch:{page:"dynamic",enhance:"/search/enhancedlocalsearch?where="}},socialMedia:{facebook:{icon:'facebook',title:'Facebook Recommend'},twitter:{icon:'twitter',title:'Twitter Tweet'},googleplus:{icon:'google-plus',title:'Google Plus'},reddit:{icon:'reddit',title:'Post to Reddit'},pinterest:{icon:'pinterest',title:'Pinterest Pin'},email:{icon:'email',title:'Email Shares'},qq:{icon:'qzone',title:'QIt'},sina:{icon:'sina-weibo',title:'Sina'}},microdata:{url:'http://schema.org/',schema:{organization:{name:'Organization'},video:{name:'VideoObject'},image:{name:'ImageObject'},article:{name:'Article'}}},assetsUrl:"http://s.w-x.co/",oldAssetsIDomain:"http://i.imwx.com/",oldAssetsImageDomain:"http://image.weather.com/",sina:{icon:'sina-weibo',title:'Sina'},profile:{host:"profile.weather.com",version:"",protocol:"https"}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_constant/twc_constant.constant.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/base_search_controller/base_search_controller.controller.js. */
twc.shared.apps.controller('baseSearchController',['$scope','$injector','$q','customEvent','dsxclient','twcConfig','twcUtil','pcoUser','$filter','twcConstant',function($scope,$injector,$q,customEvent,dsxclient,twcConfig,twcUtil,pcoUser,$filter,twcConstant){'use strict';var logger=$scope.$root.$log.getInstance('baseSearchController'),LocModelClass=$injector.has('WxdLocModelClass')&&$injector.get('WxdLocModelClass'),XwebModelClass=$injector.has('XwebWebLocModelClass')&&$injector.get('XwebWebLocModelClass'),updateLocation=function(item,type,add){if(!LocModelClass)return;var loc=new LocModelClass({cntryCd:item.getCountryCode(),locId:item.getLocId(),locType:item.getLocType(),cityNm:twcUtil.capitalize(item.getCity(),true,true),bigCity:item.isBigCity(),stCd:item.getStateCode(),stNm:item.getState(),prsntNm:item.getFormattedName(),_country:item.getCountryName(),nickname:item.getNickname()||'',zipCd:item.getZipCode()||'',recentSearch:type==='recentSearch'?true:false},'WxdLocModelClass');if(type==='recentSearch'){if(add){pcoUser.addRecentSearchLocation(loc)}else pcoUser.removeRecentSearchLocation(loc)}else if(type==='saveLocation'){if(add){pcoUser.addSavedLocation(loc)}else pcoUser.removeSavedLocation(loc)}else pcoUser.updateLocation(loc)},createModel=function(locModel){if(locModel.getCity&&locModel.getStateCode&&locModel.getCountry&&locModel.getCountryCode&&locModel.getLocType){return new XwebModelClass({name:locModel.getCity()+', '+locModel.getStateCode()+', '+locModel.getCountry(),key:locModel.getFullLocId(),locId:locModel.getLocId(),locType:locModel.getLocType(),cntryCd:locModel.getCountryCode(),_country:locModel.getCountry(),stCd:locModel.getStateCode(),stNm:locModel.getState()||'',cityNm:locModel.getCity()||'',bigCity:locModel.getBigCity&&locModel.getBigCity()||false,nickname:locModel.getNickname&&locModel.getNickname()||'',recentSearch:true},'XwebWebLocModelClass')}else return null},notify=function(type){if(params&&params.notifier)customEvent.getEvent(params.notifier).notify(type)};customEvent.getEvent('pcoReady').then(function(e){$scope.$evalAsync(function(){params.recentSearches=null;params.savedLocations=null})});customEvent.getEvent('locations_changed').progress(function(e){if(e.key==='savedLocations'){$scope.$evalAsync(function(){params.savedLocations=null});notify('saved')}else if(e.key==='recentSearchLocations'){$scope.$evalAsync(function(){params.recentSearches=null});notify('recent')}});var localeToMinCharOverride={ar_AE:"2",bn_BD:"2",en_GB:"2",fa_IR:"2",hi_IN:"2",iw_IL:"2",ja_JP:"2",ko_KR:"2",th_TH:"2",uk_UA:"2",ur_PK:"2",zh_HK:"2"},localeToCountry={ar_AE:"ae",bn_BD:"bd",ca_ES:"sp",cs_CZ:"ez",da_DK:"da",de_DE:"gm",el_GR:"gr",en_GB:"uk",en_US:"us",es_US:"us",fa_IR:"ir",fi_FI:"fi",fr_FR:"fr",he_IL:"is",hi_IN:"in",hr_HR:"hr",hu_HU:"hu",in_ID:"id",it_IT:"it",iw_IL:"is",ja_JP:"ja",kk_KZ:"kz",ko_KR:"ks",ms_MY:"my",nl_NL:"nl",no_NO:"no",pl_PL:"pl",pt_BR:"br",ro_RO:"ro",ru_RU:"rs",sk_SK:"lo",sv_SE:"sw",th_TH:"th",tl_PH:"ph",tr_TR:"tu",uk_UA:"up",ur_PK:"pk",vi_VN:"vm",zh_HK:"hk"};$scope.getMinChar=function(locale){return localeToMinCharOverride[locale]||"3"};$scope.getBoostCountry=function(locale){return localeToCountry[locale]||"us"};$scope.config=[{}];$scope.params={minChar:$scope.getMinChar((TWC&&TWC.Titan&&TWC.Titan.locale)),resultLimit:10,dsx:twcConfig.dsxclient,locTypes:'',xwebRecords:twcConfig.dsxclient.xweb.records,wxdRecords:twcConfig.dsxclient.wxd.records,noResult:'No results found.',settings:{},moduleId:'',resultType:'',recentSearches:null,savedLocations:null,locArr:[],suppressRecentSearches:false,notifier:null,isIE8:angular.element('html').hasClass('lt-ie9'),titan_locale:(TWC&&TWC.Titan&&TWC.Titan.locale)||"en_US"};var params=$scope.params;$scope.term='';$scope.getXwebLocFromLoc=function(loc){return createModel(loc)};$scope.showRecentSearches=function(){return $scope.params.suppressRecentSearches===true?'Suppressed':'Recent'};$scope.createLocArray=function(locTypes){angular.forEach(locTypes,function(k,v){params.locArr.push(k)});params.locArr.sort(function(a,b){return a-b});angular.forEach(params.locArr,function(loc){params.locTypes+=loc+'/'})};$scope.noResultError=function(){params.resultType='NoResult';$scope.results=[{result:params.noResult}];customEvent.getEvent('search-with-noresults').resolve({item:{result:params.noResult,autoSelect:true}})};$scope.goSelectItem=function(item){logger.debug('This function needs to be overridden.')};$scope.getRecentSearches=function(){if(!params.recentSearches){var recentSearchLocs=pcoUser.getRecentSearchLocations();if(recentSearchLocs){params.recentSearches=[];angular.forEach(recentSearchLocs,function(recentSearchLoc){var model=createModel(recentSearchLoc);if(!!model)params.recentSearches.push(model)})}};return params.recentSearches};$scope.getSavedLocations=function(){if(!params.savedLocations){var savedLocs=pcoUser.getSavedLocations();if(savedLocs){params.savedLocations=[];angular.forEach(savedLocs,function(savedLoc){var model=createModel(savedLoc);if(!!model){model.data.recentSearch=false;params.savedLocations.push(model)}})}};return params.savedLocations};$scope.saveRecentSearch=function(item){params.recentSearches=null;updateLocation(item,'recentSearch',true)};$scope.saveSavedLocation=function(item){updateLocation(item,'saveLocation',true)};$scope.updateSavedLocation=function(item){updateLocation(item,'updateLocation',true)};$scope.removeSavedLocation=function(item){updateLocation(item,'saveLocation',false)};$scope.removeRecentSearch=function(item){updateLocation(item,'recentSearch',false)};$scope.ensureUrlSlash=function(url){if(!url.match(/^\//))url='/'+url;return url.match(/\/$/)?url:url+='/'};$scope.validatePageUrl=function(url){var page=twcConstant.pageUrl[params.moduleId]['page'];url=url?url:'/weather/today/l/';if(page==='dynamic')twcConstant.pageUrl[params.moduleId]['page']=$scope.ensureUrlSlash(url)};$scope.landingPage=function(key,item){$scope.addToRecentSearch.apply($scope,[item,'deferLandingPage'])};$scope.deferLandingPage=function(key){var theKey=typeof key==='object'?key.getKey():key;location.href=twcConstant.pageUrl[params.moduleId]['page']+theKey};$scope.addToRecentSearch=function(item,callback){var key=item.getKey&&item.getKey()||item.getFullLocId&&item.getFullLocId();if(item&&!!item.data&&!$filter('twcFilter').getByProperty('key',key,$scope.getRecentSearches())&&!$filter('twcFilter').getByProperty('key',key,$scope.getSavedLocations())){var rs=$scope.getRecentSearches();customEvent.getEvent('locations_changed').progress(function(e){if(e.locations.length===10||e.locations.length>rs.length)$scope[callback](item)});$scope.saveRecentSearch(item)}else $scope[callback](item)};$scope.getLocationByZip=function(zip){var df=$q.defer();$scope.config=[{recordType:"xweb",recordName:params.xwebRecords.webLoc,locTypes:'4/US/'+zip,locale:params.titan_locale}];try{dsxclient.execute($scope.config).then(function(response){df.resolve(response)})}catch(e){logger.error(e.message);df.reject(e.message)};return df.promise};$scope.getLocationByLocId=function(locId){var df=$q.defer();$scope.config=[{recordType:"wxd",recordName:params.wxdRecords.loc,fullLocId:locId,locale:params.titan_locale}];try{dsxclient.execute($scope.config).then(function(response){df.resolve(response)})}catch(e){logger.error(e.message);df.reject(e.message)};return df.promise};$scope.tracking=function(from,track){if(from&&from.length>0)customEvent.getEvent('from-string-event').notify({settings:params.settings,fromStr:from});if(track&&track.length>0)customEvent.getEvent('track-string-event').notify({settings:params.settings,trackStr:track,linkTrackEvents:'event1',events:'event1'})};$scope.recentSearches=function(){return $scope.getRecentSearches()};$scope.resultType=function(){return params.resultType};$scope.getPresName=function(index){var item=$scope.results[index];return!!item.getFormattedName?item.getFormattedName($scope.$root.isMobile):''};$scope.hasResults=function(){if(!$scope.term){$scope.results=$scope.recentSearches();params.resultType=$scope.showRecentSearches()};return $scope.results&&$scope.results.length>0?true:false};$scope.selectItem=function(item,enter){var term=$scope.term;if(term.length>=params.minChar||term.length===0){if(enter===true&&!twcUtil.isNumeric(term)){customEvent.ifReady(['search-in-progress']).then(function(e){customEvent.removeEvent('search-in-progress');$scope.goSelectItem(e.item)})}else $scope.goSelectItem(item)}else if(term.length<=2){$scope.goSelectItem(item)}else customEvent.ifReady(['search-with-noresults']).then(function(e){customEvent.removeEvent('search-with-noresults');$scope.goSelectItem(e.item)})};$scope.search=function(term){params.resultType='Computing';var boostCountryCd=$scope.getBoostCountry(params.titan_locale);$scope.results=[{result:'Searching...'}];if(term&&term.length>=params.minChar&&!twcUtil.isNumeric(term)){var config=$scope.config[0];config.locTypes=params.locTypes;config.country={code:boostCountryCd,boost:true};config.term=term;config.locale=params.titan_locale;try{dsxclient.execute($scope.config,{pg:'0,'+params.resultLimit}).then(function(response){params.resultType='Search';var res=response.getModel({recordType:"xweb",recordName:params.xwebRecords.webLoc,locTypes:params.locTypes,term:term,locale:params.titan_locale,country:{code:boostCountryCd,boost:true}});if(res&&res.length>0){$scope.results=res.length>10?res.splice(0,10):res}else $scope.noResultError()})}catch(e){$scope.noResultError();logger.error(e.message)}}else if(twcUtil.isNumeric(term)&&term.length===5){if(params.locArr.indexOf('1')<0){$scope.noResultError()}else $scope.getLocationByZip(term).then(function(response){params.resultType='Search';var res=response.getModel({recordType:"xweb",recordName:params.xwebRecords.webLoc,locale:params.titan_locale,locTypes:'4/US/'+term});if(res&&res.length===1){$scope.results=res}else $scope.noResultError()})}else{params.resultType=$scope.showRecentSearches();if(term.length!==0&&$scope.results.length>0){params.resultType='NoResult';$scope.$evalAsync(function(){$scope.results=twcUtil.isNumeric(term)&&term.length===5?[]:[{result:params.noResult}]})}else if(term.length===0)$scope.results=$scope.getRecentSearches()}}.debounce(200)}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/base_search_controller/base_search_controller.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_auto_placeholder_text/twc_auto_placeholder_text.directive.js. */
twc.shared.apps.directive('twcAutoPlaceholderText',['$window','$parse',function($window,$parse){'use strict';var currentWidth=angular.element($window).width();return function(scope,element,attrs){var func=$parse(attrs.twcAutoPlaceholderText);angular.element($window).bind('ScreenResizeEnd',function(){var win=angular.element(this),modWidth=win.width();if(currentWidth!==modWidth){currentWidth=modWidth;scope.$apply(function(){func(scope,{width:modWidth})})}})}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_auto_placeholder_text/twc_auto_placeholder_text.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/linker_factory/linker_factory.factory.js. */
twc.shared.apps.factory('linkerFactory',["$rootScope","dsxclient","PcoPage","customEvent","$interpolate","twcPco","twcUtil",function($rootScope,dsxclient,PcoPage,customEvent,$interpolate,twcPco,twcUtil){'use strict';var currentTimeISO,tzOffset,config,tempScope,getDateTime=function(){dsxclient.execute(config).then(['dateTimeModel',function(dateTimeModel){if(dateTimeModel){currentTimeISO=dateTimeModel.getDateTimeISO();customEvent.getEvent("gotCurrentTime").resolve({date:currentTimeISO})}else{currentTimeISO=new Date().toISOString();customEvent.getEvent("gotCurrentTime").resolve({date:currentTimeISO})}}])['catch'](function(){customEvent.getEvent("gotCurrentTime").reject();console.log("error")})},toISOTimeFormat=function(dateTime,diff){var sign='+',minutes="00";if(diff<0){sign="-";diff=diff*-1};var addZero=diff>9?"":"0";if(diff%1!==0){diff=parseInt(diff);minutes="30"};return dateTime.replace(" ","T")+sign+addZero+diff+":"+minutes},jq=window.jQuery,init=function(){jq.when.apply(jq,[].concat(twcPco.get("page").promises,twcPco.get("user").promises)).done(function(){var locId;tempScope=('dynamiclocation'in $rootScope&&$rootScope.dynamiclocation)?$rootScope:{};customEvent.getEvent("linker_factory_tempScope").resolve(tempScope);if(PcoPage.getCurrentLocationModel()&&!PcoPage.getCurrentLocationModel().data.error){var loc=PcoPage.getCurrentLocationModel(),daylightAdjustment=loc.getDaylightSavingsActive()==='Y'?1:0;locId=loc.getFullLocId();tzOffset=loc.getGmtDiff()+daylightAdjustment}else{locId='30339:4:US';tzOffset=((new Date().getTimezoneOffset()/60)*-1)};config=[{$id:"dateTimeModel",recordType:"cs",recordName:"datetime",fullLocId:locId}],getDateTime()})};init();return{validateLinkSchedule:function(validBetween,overrideTzOffset){if(overrideTzOffset)tzOffset=overrideTzOffset;if(!validBetween.value)return true;var startTimeISO=toISOTimeFormat(validBetween.value,tzOffset),endTimeISO=toISOTimeFormat(validBetween.value2,tzOffset),startTimeMilliseconds=twcUtil.fromISOToDate(startTimeISO).getTime(),endTimeMilliseconds=twcUtil.fromISOToDate(endTimeISO).getTime(),currentTimeMilliseconds=twcUtil.fromISOToDate(currentTimeISO).getTime();if(!startTimeMilliseconds||!endTimeMilliseconds||!currentTimeMilliseconds||startTimeMilliseconds===endTimeMilliseconds)return true;return startTimeMilliseconds<currentTimeMilliseconds&&endTimeMilliseconds>currentTimeMilliseconds},interpolateLinkUrl:function(linkUrl){if(tempScope&&linkUrl){return $interpolate(linkUrl)(tempScope)}else return linkUrl}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/linker_factory/linker_factory.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/ad_control/ad_control.factory.js. */
twc.shared.apps.factory('AdControl',['twcPco','PcoAd','twcUtil','customEvent','$q',function(twcPco,PcoAd,twcUtil,customEvent,$q){var refreshEvent=customEvent.getEvent("slotRefreshReady"),loadEvent=customEvent.getEvent('dfpLoaded'),slotRefreshEvent=customEvent.getEvent('slotRefreshReady'),slotRefresh=false;window.googletag=window.googletag||{};googletag.cmd=googletag.cmd||[];slotNames2Slots=function(slotNames){if(slotNames&&slotNames.length){var refreshSlots=PcoAd.getRefreshSlots(),slots=[];angular.forEach(slotNames,function(slotName){if(slotName in refreshSlots)slots.push(refreshSlots[slotName].slot)});return slots}else return null};setTargeting=function(targetMap,targetObj){angular.forEach(targetMap,function(val,key){googletag.pubads().clearTargeting();googletag.pubads().setTargeting(key,val)})};refresh=function(targetMap,slots){if(!googletag||!('pubads'in googletag))return;var tMap=targetMap||{},pubads=googletag.pubads();if(slots){for(var slotIdx=0,slotLen=slots.length;slotIdx<slotLen;slotIdx++){var cSlot=slots[slotIdx];if(cSlot){clearElement(cSlot);setTargeting(tMap,cSlot)}}}else setTargeting(tMap,pubads);pubads.refresh(slots)};getTargetMapFromCustParams=function(cust_params){var targetMap={};try{var targets=window.decodeURIComponent(cust_params).split("&");angular.forEach(targets,function(target){var parts=target.split("=");if(parts&&parts.length>1){var key=parts[0],value=parts.splice(1);targetMap[key]=value.join("=")}})}catch(err){};return targetMap};clearElement=function(slot){var slotName;if(angular.isObject(slot)){slotName=slot.getSlotId().getDomId()}else if(angular.isString(slot))slotName=slot;if(slotName){var $domEl=angular.element("#"+slotName);if($domEl&&$domEl.length>0)$domEl.empty()}};return{refreshAllSlots:function(targetMap){refreshEvent.done(function(){refresh(targetMap,null)})},refreshSlots:function(targetMap,slotNames){refreshEvent.done(function(){var slots=[];slots=slotNames2Slots(slotNames);refresh(targetMap,slots)})},refreshRetargetSlots:function(targetMap){refreshEvent.done(function(){var refreshSlots=PcoAd.getRefreshSlots(),refreshableSlots=(refreshSlots?twcUtil.filter(refreshSlots,function(slotObj){return slotObj.slot&&slotObj.refresh}):null),slots=(refreshableSlots?twcUtil.map(refreshableSlots,function(refreshSlot){return refreshSlot.slot}):null);refresh(targetMap,slots)})},refreshSlotsWithLoc:function(targetMap,slotNames,locObj){refreshEvent.done(function(){if(angular.isObject(locObj)){TWC.Events.ad_cust_params_changed=jQuery.Deferred();TWC.Events.ad_cust_params_changed.done(function(){var cust_params=twcPco.getNodeValue('ad','cust_params'),keyValues,i,custMap={},slots=[];cust_params=decodeURIComponent(cust_params);keyValues=cust_params.split("&");for(i=0,l=keyValues.length;i<l;i++){var keyValue=keyValues[i].split("=");custMap[keyValue[0]]=keyValue[1]};angular.extend(custMap,targetMap);slots=slotNames2Slots(slotNames);refresh(custMap,slots)});twcPco.setNodeValue('ad','location',locObj)}})},createOrRefreshSlot:function(slotNames,targetMap,enableCorrelatorUpdate){var deferred=$q.defer();slotRefreshEvent.done(function(){var gnv=twcPco.getNodeValue,ads_ctrld_clientside=gnv("ad","ads_ctrld_clientside");if(ads_ctrld_clientside){var cust_params=gnv("ad","cust_params"),i,l,slotName,p,adUnitAndZone=gnv("ad","adUnitAndZone"),DFPSlots=twcPco.getNodeValue("ad","DFPSlots"),slots2Refresh=[],sizes,pos,processSlot=function(slotName){if(DFPSlots[slotName].slot){return DFPSlots[slotName].slot}else{var slot=googletag.defineSlot(adUnitAndZone,sizes,slotName);slotRefresh=false;googletag.enableServices();slot.addService(googletag.pubads());slot.setTargeting("pos",pos);setTargeting(targetMap,slot);if(enableCorrelatorUpdate)googletag.pubads().updateCorrelator();googletag.display(slotName);DFPSlots[slotName].slot=slot;return slot}};targetMap=targetMap||{};angular.extend(targetMap,getTargetMapFromCustParams(cust_params));if(typeof slotNames==="object"&&slotNames.length&&slotNames.length>0){slots2Refresh=[];for(i=0,l=slotNames.length;i<l;i++){if(!ads_ctrld_clientside[slotNames[i]])continue;slotName=slotNames[i];sizes=ads_ctrld_clientside[slotNames[i]].sizes;pos=ads_ctrld_clientside[slotNames[i]].pos;slots2Refresh.push(processSlot(slotName))}}else{slots2Refresh=[];sizes=ads_ctrld_clientside[slotNames].sizes;pos=ads_ctrld_clientside[slotNames].pos;slots2Refresh.push(processSlot(slotNames))};if(slotRefresh)if(slots2Refresh.length===1){refresh(targetMap,slots2Refresh)}else if(slots2Refresh.length>1){for(i=0,l=slots2Refresh.length;i<l;i++)clearElement(slots2Refresh[i]);googletag.pubads().clearTargeting();for(p in targetMap)if(targetMap.hasOwnProperty(p))googletag.pubads().set(p,targetMap[p]);googletag.pubads().refresh(slots2Refresh)};slotRefresh=true;deferred.resolve()}else deferred.reject()});return deferred.promise},onSlotRender:function(slotName,callback){loadEvent.done(function(){googletag.pubads().addEventListener('slotRenderEnded',function(e){var domId=e.slot.getSlotId().getDomId();if(domId===slotName)callback()})})},ugcTealium:function(ugcCollection){if(ugcCollection){utag_data['js_page.ugcLookup']=ugcCollection;utag.view(utag_data,null,['114'])}},registerCompanion:function(adsObjectFromPco){if(adsObjectFromPco&&adsObjectFromPco.ad_video_companions){var companionName,companionSlots;for(var compName in adsObjectFromPco.ad_video_companions)if(adsObjectFromPco.ad_video_companions.hasOwnProperty(compName)){companionName=compName;companionSlots=adsObjectFromPco.ad_video_companions[compName].sizes;break};window.googletag=window.googletag||{};googletag.cmd.push(function(){var adUnitAndZone=TWC.pco.getNodeValue("ad","adUnitAndZone");googletag.defineSlot(adUnitAndZone,companionSlots,companionName).addService(googletag.companionAds());googletag.companionAds().setRefreshUnfilledSlots(true);googletag.pubads().enableVideoAds();googletag.enableServices();googletag.display(companionName)})}}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/ad_control/ad_control.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_select_text/twc_select_text.directive.js. */
twc.shared.apps.directive('twcSelectText',function(){'use strict';return{restrict:'A',link:function(scope,element){var preventMouseUpDeselect=false;element.mouseup(function(e){if(preventMouseUpDeselect){e.preventDefault();preventMouseUpDeselect=false}});element.mousedown(function(){preventMouseUpDeselect=false});element.on('focusin',function(e){e.preventDefault();element.select();setTimeout(function(){element.select()});preventMouseUpDeselect=true})}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_select_text/twc_select_text.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_placeholder/twc_placeholder.directive.js. */
twc.shared.apps.directive('twcPlaceholder',['$timeout',function($timeout){return{restrict:'A',link:function(scope,element,attrs){scope.text=attrs.twcPlaceholder;var setPlaceholder=function(placeIt){if(element.val().length===0)scope.$apply(function(){element.val(placeIt?scope.text:'')})};element.bind('focus',function(){if(element.val()===scope.text)scope.$apply(function(){element.val('')})});element.bind('blur',function(){if(element.val()==='')setPlaceholder(true)});scope.$watch('term',function(nVal,oVal){if(nVal!==oVal)if((!nVal||nVal.length===0)&&element.hasClass('manage-location-input'))element.val(scope.text)});setTimeout(function(){element.val(scope.text)},50)}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_placeholder/twc_placeholder.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/provider_rules/provider_rules.factory.js. */
twc.shared.apps.factory('providerRulesFactory',['$window','$log','$q','customEvent','MediaAssetFactory','providerRulesSettings',function($window,$log,$q,customEvent,MediaAssetFactory,providerRulesSettings){var logger=$log.getInstance('providerRulesFactory'),errorMessageVideoReadyEvent=customEvent.getEvent('providerErrorMessageVideoReady'),errorMessageVideoReadyEventOverride=customEvent.getEvent('providerErrorMessageVideoReadyOverride'),fns={getErrorMessageVideo:function(videoId,videoReadyEvent){MediaAssetFactory.getMediaAssetData({id:"videoData",assetId:videoId||providerRulesSettings.errorMessageAssets.video})["then"](function(videoData){(videoReadyEvent||errorMessageVideoReadyEvent).resolve(videoData)})}};fns.getErrorMessageVideo();return{providerRulesPassed:function(videoData){var domainAuthorizationFlags=videoData.getFlags()||{},domainAuthorizationFlagKeys=Object.keys(domainAuthorizationFlags),host=$window.location.host;if($window.location!==$window.parent.location){var splitreferrer=document.referrer.split('/');if(splitreferrer.constructor===Array&&splitreferrer.length>=3)host=splitreferrer[2]};for(var i=0;i<domainAuthorizationFlagKeys.length;i++){var key=domainAuthorizationFlagKeys[i];if(providerRulesSettings.domains_map[key])for(var j=0;j<providerRulesSettings.domains_map[key].length;j++){var domain=providerRulesSettings.domains_map[key][j];if(host.match(domain)){logger.debug("Determined we are currently in ",key);return domainAuthorizationFlags[key]}}};logger.debug("Host does not match with any provider rules listing. Defaulting to pass.",host,providerRulesSettings.domains_map);return true},getErrorMessageAsset:function(assetType,assetIdData){var localCustomEvent;switch(assetType){case"video":if(assetIdData){localCustomEvent=errorMessageVideoReadyEventOverride;fns.getErrorMessageVideo(assetIdData.video,errorMessageVideoReadyEventOverride)}else localCustomEvent=errorMessageVideoReadyEvent;break;default:localCustomEvent=errorMessageVideoReadyEvent;break};return localCustomEvent}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/provider_rules/provider_rules.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/remove_padding/remove_padding.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.directive('removePanePadding',function(){return{scope:true,replace:false,transclude:false,link:function($scope,$element,$attrs){$element.closest(".panel-pane").removeClass("module-padding")}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/remove_padding/remove_padding.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_logger/twc_logger.config.js. */
twc.shared.apps.config(['$provide','$logProvider',function($provide,$logProvider){$logProvider.debugEnabled(!!(TWC&&TWC.Configs&&TWC.Configs.debug));$provide.decorator('$log',['$delegate','twcLogger',function($delegate,twcLogger){return twcLogger($delegate)}])}]);twc.shared.apps.run(["$rootScope","$log",function($rootScope,$log){$rootScope.$log=$log}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_logger/twc_logger.config.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_logger/twc_logger.factory.js. */
twc.shared.apps.factory('twcLogger',function(){return function($delegate){var timestamp=new Date(),getTime=function(){var t=new Date(),y=1900+t.getYear(),m=t.getMonth()+1;return m+'/'+t.getDate()+'/'+y+' '+t.getHours()+':'+t.getMinutes()+':'+t.getSeconds()+':'+t.getMilliseconds()};return{getInstance:function(className){className=className?className:'';return{log:function(){$delegate.log('LOG:  '+getTime()+' - '+className+'::',arguments)},debug:function(){$delegate.debug('DEBUG:  '+getTime()+' - '+className+'::',arguments)},warn:function(){$delegate.log('WARN:  '+getTime()+' - '+className+'::',arguments)},info:function(){$delegate.log('INFO:  '+getTime()+' - '+className+'::',arguments)},error:function(){var payload={url:location.href,agent:navigator.userAgent,stackTrace:arguments};$delegate.debug('ERROR:  '+getTime()+' - '+className+'::',payload);TWC.pco.twclog.error(getTime()+' - '+className+'::',payload)},group:function(){console.group('INFO:  '+getTime()+' - '+className+'::',arguments)},groupEnd:function(){console.groupEnd()},setClassName:function(name){className=name}}},error:$delegate.error,debug:$delegate.debug,info:$delegate.info,log:$delegate.log,warn:$delegate.warn}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_logger/twc_logger.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_tooltip/twc_tooltip.directive.js. */
twc.shared.apps.directive('twcTooltip',['$compile','customEvent',function($compile,customEvent){'use strict';return{restrict:'A',scope:{isValid:'@'},link:function(scope,element,attrs){var tooltip=attrs.twcTooltip,validateClass=attrs.validateClass?attrs.validateClass:'',placement=attrs.placement?attrs.placement:'top';if(tooltip){var template=angular.element('<span ng-if="tooltipToggle" class="tooltip error-tooltip"><strong>'+tooltip+'</strong></span>');placement==='top'?template.insertBefore(element):template.insertAfter(element);$compile(template)(scope);scope.tooltipToggle=false};scope.$watch('isValid',function(isValid){if(validateClass)Boolean(isValid)?element.removeClass(validateClass):element.addClass(validateClass);scope.tooltipToggle=!isValid});customEvent.getEvent('reset-error-tooltip-event').progress(function(e){scope.isValid=true})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_tooltip/twc_tooltip.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/track_str/track_str_action_tracker.factory.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.factory('ActionTracker',['customEvent',function(customEvent){var serviceObj={track:function(pagename,moduleId,attrs){var trackString=[pagename,moduleId,attrs.trackStr].join("_");if(attrs.trackStr)customEvent.ifReady(['utagReady']).done(function(e){attrs.linkTrackVars=(attrs.linkTrackVars&&(attrs.linkTrackVars+",prop35"))||"prop35";for(var p in attrs)if(p.match(/event|eVar|prop|linkTrackVars|campaign|linkTrackEvents/))s[p]=attrs[p];if(attrs.socialTrackAction)trackString=attrs.trackStr;s.prop35=trackString;s.tl(document,'o',trackString);s.prop35="";for(p in attrs)s[p]=""})}};return serviceObj}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/track_str/track_str_action_tracker.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/media_asset_factory/media_asset.factory.js. */
twc.shared.apps.factory('MediaAssetFactory',['dsxclient',function(dsxclient){return{getAssetModel:function(response,assetId){if(assetId.indexOf("db04bc18-ee64-11e2-9ee2-001d092f5a10")!==-1){return"ugcAssetWithColl"}else{var rawResponse=response.attrs["rawResponseMap"],assetObj=rawResponse["/cms/asset-collection/"+assetId];if(assetObj&&assetObj.doc&&assetObj.doc.providerid){var assetProviderId=assetObj.doc.providerid;if(assetProviderId!=null&&assetProviderId==="db04bc18-ee64-11e2-9ee2-001d092f5a10"){return"ugcAssetWithColl"}else if(assetProviderId!==null&&assetObj.doc.type==="video")return"videoAssetWithColl"}};return"videoAssetWithColl"},getMediaAssetData:function(assetInfo){var _self=this,results={},assetIdConfig={$id:assetInfo.id,recordType:"cms",recordName:"videoAssetWithColl",assetId:assetInfo.assetId};if(!assetInfo.assetId)return null;var promise=dsxclient.execute([assetIdConfig]);promise.then(function(response){var modelType=_self.getAssetModel(response,assetInfo.assetId),massagedResponse=response.getModel({$id:assetInfo.id,recordType:"cms",recordName:modelType,assetId:assetInfo.assetId});results[assetInfo.id]=massagedResponse;promise.$setResults(results);return promise});return promise}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/media_asset_factory/media_asset.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/track_str/track_str.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.directive('trackStr',['customEvent','twcPco','ActionTracker',function(customEvent,twcPco,action){'use strict';return{scope:'=',replace:false,transclude:false,link:function(scope,element,attrs){element.click(function(e){var pagename=(twcPco.get('metrics')&&twcPco.get('metrics').attributes.pagename),moduleId=(scope.getInstance&&scope.getInstance().module_id)||attrs.moduleId;action.track(pagename,moduleId,attrs)})}}}]).factory('trackEvent',['customEvent','twcPco','ActionTracker',function(customEvent,twcPco,action){return{fire:function(trackStr){customEvent.ifReady(['utagReady']).done(function(){var pagename=(twcPco.get('metrics')&&twcPco.get('metrics').attributes.pagename),moduleId=(scope.getInstance&&scope.getInstance().module_id||"").replace(/ /g,"-"),attrs={trackStr:trackStr};action.track(pagename,moduleId,attrs)})}}}]).run(['customEvent','twcPco','ActionTracker',function(customEvent,twcPco,action){customEvent.ifReady(['utagReady']).then(function(){customEvent.getEvent('track-string-event').progress(function(e){var pagename=((twcPco.get('metrics')&&twcPco.get('metrics').attributes.pagename)||"").replace(/ /g,"-"),moduleId=(e.module_id)||(e.settings&&e.settings.module_id)||(e.scope&&e.scope.getInstance&&e.scope.getInstance().module_id),trackStr=e.attrs&&e.attrs.trackStr||e.trackStr||"",attrs=angular.extend({},e.attrs||{},{trackStr:trackStr});action.track(pagename,moduleId,attrs)})})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/track_str/track_str.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/provider_rules/provider_rules.value.js. */
twc.shared.apps.value("providerRulesSettings",{domains_map:{Facebook:[/facebook.com/],Twitter:[/twitter.com/],YouTube:[/youtube.com/],"Google+":[/google.com/],"Big Web":[/www.weather.com/,/twcrb.dev.weather.com/,/adev.weather.com/,/astg.weather.com/,/aprd.weather.com/],"Little Web":[/m.weather.com/]},errorMessageAssets:{video:"41ebda0f-6471-423a-85b3-78db6392a4d0"}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/provider_rules/provider_rules.value.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_ellipsis/twc_ellipsis.directive.js. */
twc.shared.apps.directive('twcEllipsis',['twcUtil',function(twcUtil){'use strict';return{restrict:'A',link:function(scope,element,attrs){function toggleTruncationClass(isTruncated,origContent){if(isTruncated){element.addClass('is-truncated').removeClass('not-truncated')}else element.addClass('not-truncated').removeClass('is-truncated')};attrs.twcEllipsisText=attrs.twcEllipsisText||'';attrs.twcEllipsisTail=attrs.twcEllipsisTail||'… ';attrs.twcEllipsisWatch=attrs.twcEllipsisWatch||'window';attrs.twcEllipsisWrap=attrs.twcEllipsisWrap||'letter';attrs.twcEllipsisAfter=attrs.twcEllipsisAfter||null;attrs.twcEllipsisHeight=attrs.twcEllipsisHeight||null;attrs.twcEllipsisTolerance=attrs.twcEllipsisTolerance||0;attrs.twcEllipsisEndRemoveChars=attrs.twcEllipsisEndRemoveChars||[' ',',',';','.','!','?'];attrs.twcEllipsisEndNoTailChars=attrs.twcEllipsisEndNoTailChars||[];attrs.twcEllipsisFallbackToLetter=attrs.twcEllipsisFallbackToLetter||true;twcUtil.safeApply(scope,function(){var afterElement,objOptions={ellipsis:attrs.twcEllipsisTail,watch:attrs.twcEllipsisWatch,wrap:attrs.twcEllipsisWrap,height:attrs.twcEllipsisHeight,tolerance:attrs.twcEllipsisTolerance,callback:toggleTruncationClass,lastCharacter:{remove:attrs.twcEllipsisEndRemoveChars,noEllipsis:attrs.twcEllipsisEndNoTailChars},fallbackToLetter:attrs.twcEllipsisFallbackToLetter};element.html(attrs.twcEllipsisText);if(attrs.twcEllipsisAfter)afterElement=element.next(attrs.twcEllipsisAfter).remove();if(afterElement&&afterElement.length){objOptions.after=attrs.twcEllipsisAfter;element.append(afterElement)};element.dotdotdot(objOptions)})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_ellipsis/twc_ellipsis.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/filters/module_filters.filter.js. */
twc.shared.apps.filter('safeDisplay',function(){return function(input,textToReplace){if('isLoading'in this&&this.isLoading)return"";return(input===0||!!input)?input:(textToReplace||'N/A')}}).filter('twcFilter',['twcUtil',function(twcUtil){return{getByProperty:function(name,value,collection){return twcUtil.find(collection,function(item){return item.data?item.data[name]===value:item[name]===value})}}}]).filter('truncate',function(){return function(value,max,tail){if(!value)return'';max=parseInt(max,10);if(!max)return value;if(value.length<=max)return value;value=value.substr(0,max);return value+(tail||' …')}}).filter('appendRandomLoremIpsum',function(){var words=['Lorem','ipsum','sit','amor','cetere','Carthago','delenda','est','et','ad','alia'],wordPositions,offsetSeed
function getNextNumber(string,min,max){var currentPos,currentCharCode,responseRange;if(typeof wordPositions[string]==='undefined'){currentPos=(offsetSeed%string.length)}else if(wordPositions[string]>=string.length){currentPos=0}else currentPos=wordPositions[string];wordPositions[string]=currentPos+1;currentCharCode=string.charCodeAt(currentPos);responseRange=max-min;return((currentCharCode%responseRange)+min)}
function getWord(value){return words[getNextNumber(value,0,words.length)]}
function getWords(value,min,max){var words=' ',i,howMany=getNextNumber(value,min,max);for(i=0;i<howMany;i++)words+=(getWord(value)+' ');return words};return function(value,min,max){wordPositions={};offsetSeed=(new Date()).getMinutes();value=value||'';min=min||0;max=max||12;return value+getWords(value,min,max)}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/filters/module_filters.filter.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/from_str/from_str.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.directive('fromStr',['$log','twcPco',function($log,twcPco){'use strict';var logger=$log.getInstance('fromStr');return{replace:false,transclude:false,link:function(scope,element,attrs){element.bind('click',function(e){var pagename=(twcPco.get('metrics')&&twcPco.get('metrics').attributes.pagename),settings=scope.getInstance&&scope.getInstance()||scope.settings||{},moduleId;for(var key in settings)if(key.indexOf("module_id")>-1)moduleId=(scope.getInstance&&scope.getInstance()[key]||settings[key]);moduleId=moduleId||attrs.moduleId;var addlAttrs=scope.fromAttrs||"";addlAttrs=addlAttrs?addlAttrs+"-":"";var linkFromString=addlAttrs+attrs.fromStr,fromString=moduleId?[pagename,moduleId,linkFromString].join("_"):[pagename,linkFromString].join("_");jQuery.cookie("fromStr",fromString,{domain:".weather.com",path:"/"});logger.debug(fromString)})}}}]).run(['customEvent','twcPco',function(customEvent,twcPco){customEvent.getEvent('from-string-event').progress(function(e){var pagename=(twcPco.get('metrics')&&twcPco.get('metrics').attributes.pagename),moduleId=(e.module_id)||(e.settings&&e.settings.module_id)||(e.scope&&e.scope.getInstance&&e.scope.getInstance().module_id),fromString=[pagename,moduleId,e.fromStr].join("_");jQuery.cookie("fromStr",fromString,{domain:".weather.com",path:"/"})})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/from_str/from_str.directive.js. */
/*
 *	jQuery dotdotdot 1.6.16
 *
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 *	Plugin website:
 *	dotdotdot.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;d>i;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var f=this,h=t(f);if("undefined"==typeof f||3==f.nodeType&&0==t.trim(f.data).length)return!0;if(h.is(u))e.append(h);else{if(s)return!0;e.append(h),l&&e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==f.nodeType?o(h,n,i,d,l):r(h,n,i,d,l),s||(h.detach(),s=!0)),s||l&&l.detach()}}),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var f=s(c),h=-1!==f.indexOf(" ")?" ":"　",p="letter"==o.wrap?"":h,g=f.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=f.split(p),y=g.length-1);y>=b&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),a(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var T=d&&d.closest(x).length?d.length:0;x.contents().length>T?c=u(x.contents().eq(-1-T),n):(c=u(x,n,!0),T||x.detach()),c&&(f=i(s(c),o),l(c,f),T&&d&&t(c).parent().append(d))}else f=i(g.slice(0,v+1).join(p),o),l(c,f);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function f(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function h(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this;o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){e.preventDefault(),e.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:h(o),l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||d instanceof HTMLElement)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);(c.width!=t.width||c.height!=t.height)&&(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var i=o.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=f(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery);;/**/
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/collections/collections.factory.js. */
twc.shared.apps.factory('Set',['TwcClass',function(TwcClass){return TwcClass.extend({construct:function(){this.setMap={}},add:function(data){var key=data.toString().replace(/ /g,"");if(!this.setMap[key])this.setMap[key]=data},getAll:function(){var array=[];angular.forEach(this.setMap,function(value,key){array.push(key)});return array},hasKey:function(key){return(key in this.setMap)}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/collections/collections.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/in_view_beacon/in_view_beacon.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.directive('inViewBeacon',['customEvent','twcUtil','$window',function(customEvent,twcUtil,$window){'use strict';return{restrict:'A',replace:false,transclude:false,link:function(scope,element,attrs){var adPos=element.attr("data-beacon-name"),width=parseFloat(element.attr("data-width"))||1,height=parseFloat(element.attr("data-height"))||0.5,elementViewed=false,checkInView=function(){if(angular.element(element).inViewport(width,height)){customEvent.getEvent("track-string-event").notify({module_id:"beacon",trackStr:adPos});elementViewed=true};return elementViewed};angular.element($window).bind('ScreenScrolled ScreenResizeEnd1Sec',function(e){elementViewed&&angular.element(this).off(e);!elementViewed&&checkInView()&&angular.element(this).off(e)});customEvent.getEvent('slotRefreshReady').done(function(){!elementViewed&&checkInView()})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/in_view_beacon/in_view_beacon.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/class/class.factory.js. */
twc.shared.apps.factory('TwcClass',function(){var extend=function(protoProps,staticProps){var parent=this,child;if(protoProps&&Object.prototype.hasOwnProperty.call(protoProps,'constructor')){child=protoProps.constructor}else child=function(){return parent.apply(this,arguments)};angular.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate();if(protoProps)angular.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child},TwcClass=function(){if(this.construct)this.construct.apply(this,arguments)};TwcClass.extend=extend;return TwcClass});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/class/class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/pco.factory.js. */
twc.shared.apps.service('twcPco',function(){return TWC.pco});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/pco.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/pco.run.js. */
twc.shared.apps.factory('dynamicLocResolvedEvent',['customEvent',function(customEvent){return customEvent.getEvent("DYNAMIC_LOC_RESOLVED")}]).run(["$rootScope","$q","twcPco","PcoPage","pcoUser","customEvent","dynamicLocResolvedEvent",function($rootScope,$q,twcPco,PcoPage,pcoUser,customEvent,dynamicLocResolvedEvent){var jq=window.jQuery,setLocation;setLocation=function(location,objectKey,idKey,nameKey){if(!!location){var hasLocation=('loc'in location);$rootScope[objectKey]=hasLocation?location:null;$rootScope[idKey]=hasLocation?location.loc:null;$rootScope[nameKey]=(hasLocation&&'prsntNm'in location)?location.prsntNm:null}};jq.when.apply(jq,twcPco.get("page").promises).done(function(){var currLoc=PcoPage._get('currentLocation');setLocation(currLoc,'pagelocation','pageLocId','pageLocName')});jq.when.apply(jq,twcPco.get("user").promises).done(function(){var userPrefLoc=pcoUser.getPreferredLocation(),currLoc=pcoUser._get('currentLocation');setLocation(userPrefLoc||currLoc,'userlocation','userLocId','userLocName')});jq.when.apply(jq,[].concat(twcPco.get("page").promises,twcPco.get("user").promises)).done(function(){var prefLocation=pcoUser.getPreferredLocation(),setDynamicLoc;setDynamicLoc=function(){var currPageLoc=PcoPage._get('currentLocation'),userCurrLoc=pcoUser._get('currentLocation');setLocation(((currPageLoc&&!currPageLoc.error)?currPageLoc:(prefLocation||userCurrLoc)),'dynamiclocation','dynamicLocId','dynamicLocName');if(dynamicLocResolvedEvent.state()!=="resolved")dynamicLocResolvedEvent.resolve()};if(!prefLocation)setDynamicLoc();customEvent.getEvent("preferred_location_change").progress(function(data){setDynamicLoc()})})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/pco.run.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.user.model.class.factory.js. */
twc.shared.apps.factory('pcoUser',['TwcModel','twcPco','twcUtil','$q','locUtil','PcoSavedLocationModel','customEvent',function(TwcModel,twcPco,twcUtil,$q,locUtil,PcoSavedLocationModel,customEvent){var User=TwcModel.extend({init:function(){this.fromDto(twcUtil.clone(twcPco.get('user').getAttributes()));var _self=this;jQuery.when.apply($,twcPco.get("user").promises).done(function(){_self.fromDto(twcUtil.clone(twcPco.get('user').getAttributes()))});customEvent.getEvent("preferred_location_change").progress(function(data){if(data&&data.locations)_self.set({preferredLocation:data.locations})})},getGender:function(){return this._get('gender')},getPreferredDeclaration:function(){return this._get('preferredDeclaration')},getRmid:function(){return this._get('rmid')},getTimezoneOffset:function(){return this._get('tzOffset')},getFlashPlayerVersion:function(){return this._get('flash')},getBrowser:function(){return this._get('browser')},getAgeGroups:function(){return this._get('age')},getBackToPage:function(){return this._get('backTo')},getUnit:function(){return this._get('unit')},getSpeedMeasure:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB")return'mph';return this._get('unit')==='e'?' mph':' km/h'},getPressureUnit:function(){return this._get('unit')==='e'?'in':'mb'},getDistanceUnit:function(){return this._get('unit')==='e'?'mi':'km'},getSpeedUnit:function(){return this._get('unit')==='e'?'M':'K'},getTempUnit:function(){return this._get('unit')==='e'?'F':'C'},getAccumulationUnit:function(){return this._get('unit')==='e'?'in':'cm'},getPrecipUnit:function(){return this._get('unit')==='e'?'in':'mm'},getFreezingPoint:function(){return this.getTempUnit()==='F'?32:0},setTempUnit:function(unit){var unitSys;switch(unit){case'F':unitSys='e';break;default:unitSys='m';break};this._set('unit',unitSys);twcPco.setNodeValue('user','unit',unitSys);return this},getIsSignedIn:function(){return!!this.getSignedInToken()},getSignedInToken:function(){return this._get('signedIn')},getLocale:function(){return this._get('locale')},setLocale:function(locale){this._set("locale",locale);twcPco.setNodeValue('user','locale',locale);return this},getPreferredLocation:function(){return this._get("preferredLocation")},getFullLocationList:function(){var sl=this._get("savedLocations")||[],rs=this._get("recentSearchLocations")||[];return sl.concat(rs)},getSavedLocations:function(){return twcUtil.map(this._get("savedLocations"),function(savedLocation){return new PcoSavedLocationModel().fromPcoData(savedLocation)})},addSavedLocation:function(recentLoc){this.addLocation(recentLoc,"saved");return this},removeSavedLocation:function(savedLocation){this.removeLocation(savedLocation,"saved");return this},getRecentSearchLocations:function(){return twcUtil.map(this._get("recentSearchLocations"),function(recentLoc){return new PcoSavedLocationModel().fromPcoData(recentLoc)})},addRecentSearchLocation:function(recentLoc){this.addLocation(recentLoc,"recentSearch");return this},removeRecentSearchLocation:function(recentSearchLocation){this.removeLocation(recentSearchLocation,"recentSearch");return this},addLocation:function(location,type){if(location){var alreadySaved=false,nodeType=type+"Locations",currentLocs=this._get(nodeType)||[],deleteType=(type==='saved')?'recentSearch':'saved',deleteNodeType=deleteType+"Locations",locObjArry=[];location=location.attrs?location.attrs:location;location=location.data?location.data:location;for(var i=0,l=currentLocs.length;i<l;i++)if(locUtil.areLocationsEqual(location,currentLocs[i])){alreadySaved=true;break};var deleteLocations=this._get(deleteNodeType)||[];for(var idx=0,len=deleteLocations.length;idx<len;idx++)if(locUtil.areLocationsEqual(location,deleteLocations[idx]))if(deleteType==='recentSearch'){this.removeLocation(deleteLocations[idx],deleteType);break}else alreadySaved=true;if(!alreadySaved){locObjArry=this._get(nodeType)||[];if(type==="saved"){locObjArry.push(location)}else this._get(nodeType).unshift(location);var truncatedLocations=locObjArry.slice(0,Math.min(locObjArry.length,10));twcPco.setNodeValue("user",nodeType,truncatedLocations)}}},removeLocation:function(location,type){if(location){var nodeType=type+'Locations',locObjArry=[],currentLocations=this._get(nodeType);location=location.attrs?location.attrs:location;location=location.data?location.data:location;for(var i=currentLocations.length-1;i>=0;i--)if(currentLocations[i].locId===location.locId){currentLocations.splice(i,1);break};twcPco.setNodeValue('user',nodeType,currentLocations)}},updateLocation:function(location){if(location){var savedLocs=this._get("savedLocations");location=location.attrs?location.attrs:location;location=location.data?location.data:location;if(savedLocs&&angular.isArray(savedLocs))for(var idx=0,len=savedLocs.length;idx<len;idx++)if(locUtil.areLocationsEqual(location,savedLocs[idx])){angular.extend(savedLocs[idx],location);break};twcPco.setNodeValue('user','savedLocations',savedLocs)}}});return new User()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.user.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.device.model.class.factory.js. */
twc.shared.apps.factory('PcoDevice',['TwcModel','twcUtil','twcPco','$q',function(TwcModel,twcUtil,twcPco,$q){var Device=TwcModel.extend({init:function(){this.fromDto(twcUtil.clone(twcPco.get('device').getAttributes()));var _self=this;$q.all(twcPco.get("device").promises).then(function(){_self.fromDto(twcUtil.clone(twcPco.get('device').getAttributes()))})},onReady:function(callback){$q.all(twcPco.get("device").promises).then(function(){callback()})},getOpenDDRCrawler:function(){return this._get('OpenDDRCrawler')},getOpenDDRDesktop:function(){return this._get('OpenDDRDesktop')},getOpenDDRDevice:function(){return this._get('OpenDDRDevice')},getOpenDDRDisplay:function(){return this._get('OpenDDRDisplay')},getOpenDDRId:function(){return this._get('OpenDDRId')},getOpenDDRJS:function(){return this._get('OpenDDRJS')},getOpenDDRTablet:function(){return this._get('OpenDDRTablet')},getOpenDDRWireless:function(){return this._get('OpenDDRWireless')},getUserAgent:function(){return this._get('UserAgent')},getBrowserId:function(){return this._get('browserId')},getBrowserName:function(){return this._get('browserName')},getBrowserOS:function(){return this._get('browserOS')},getBrowserVer:function(){return this._get('browserVer')},getDClass:function(){return this._get('dClass')},getDClassVersion:function(){return this._get('dClassVersion')}});return new Device()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.device.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.twclog.model.class.factory.js. */
twc.shared.apps.service('twcLog',['twcPco',function(twcPco){return twcPco.get("twclog")}]).factory('PcoLog',['TwcModel','twcUtil','twcLog',function(TwcModel,twcUtil,twcLog){return{debug:function(){twcLog.debug.apply(twcLog,Array.prototype.slice.call(arguments,0))},error:function(){twcLog.error.apply(twcLog,Array.prototype.slice.call(arguments,0))}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.twclog.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.performance.model.class.factory.js. */
twc.shared.apps.service('twcPerf',['twcPco',function(twcPco){return twcPco.get("performance")}]).factory('PcoPerf',['TwcModel','twcUtil','twcPerf',function(TwcModel,twcUtil,twcPerf){return{logDsxCall:function(){twcPerf.log_dsx_call.apply(twcPerf,Array.prototype.slice.call(arguments,0))},log:function(){twcPerf.log.apply(twcPerf,Array.prototype.slice.call(arguments,0))}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.performance.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.page.model.class.factory.js. */
twc.shared.apps.factory('PcoPage',['TwcModel','twcUtil','twcPco','$q','$injector','$rootScope',function(TwcModel,twcUtil,twcPco,$q,$injector,$rootScope){var Page=TwcModel.extend({construct:function(){this.attrs=twcPco.get('page').getAttributes();this._set('pagepromise_wrapper',$q.defer());var _self=this;jQuery.when.apply(jQuery,twcPco.get("page").promises).done(function(){_self.attrs=twcPco.get('page').getAttributes();var currLoc=_self._get('currentLocation'),model=_self._get('currentLocationModel');if(!!currLoc&&!model){var ModelClass=$injector.has("WxdLocModelClass")&&$injector.get("WxdLocModelClass");if(!!ModelClass)_self.set({currentLocationModel:(new ModelClass(currLoc))})};_self._get("pagepromise_wrapper").resolve()})},getCurrentLocId:function(){return this._get('currentLocId')},getCurrentLocation:function(){return this._get('currentLocation')},getCurrentLocationModel:function(){return this._get('currentLocationModel')},getAMPM:function(){return this._get('ampm')},getEnv:function(){return this._get('env')},getFromString:function(){return this._get('fromStr')},getFV:function(){return this._get('fv')},getLanguage:function(){return this._get('lang')},getLocale:function(){return this._get('locale')},getServerDate:function(){return this._get('serverdate')},getServerTime:function(){return this._get('servertime')},getServerDay:function(){return this._get('serverday')},getServerHours:function(){return this._get('serverhrs')},getPagePromises:function(){return this._get("pagepromise_wrapper").promise},getBackToPage:function(){return this._get('backTo')},getPartner:function(){return this._get('partner')},getPageType:function(){return this._get('content')},getTimeZone:function(){return this._get('timezone')}});return new Page()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.page.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.ad.model.class.factory.js. */
twc.shared.apps.factory('PcoAd',['TwcModel','twcUtil','twcPco','$q',function(TwcModel,twcUtil,twcPco,$q){var Ad=TwcModel.extend({init:function(){this.fromDto(twcUtil.clone(twcPco.get('ad').getAttributes()));var _self=this;$q.all(twcPco.get("ad").promises).then(function(){_self.fromDto(twcUtil.clone(twcPco.get('ad').getAttributes()))})},getCustom_Params:function(){return this._get('cust_params')},getAd_Positions:function(){return this._get('ad_positions')},getAdPromises:function(){return $q.all(twcPco.get("ad").promises)},getRefreshSlots:function(){return this._get('DFPSlots')}});return new Ad()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.ad.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.savedLocation.model.class.factory.js. */
twc.shared.apps.factory('PcoSavedLocationModel',['TwcModel',function(TwcModel){return TwcModel.extend({toPcoData:function(){return this.attrs},fromPcoData:function(data){this.set(data);return this},setLongitude:function(lon){return this._set('lon',lon)},setLatitude:function(lat){return this._set('lat',lat)},setLocType:function(locType){return this._set('locType',locType)},setLocId:function(locId){return this._set('locId',locId)},getLocId:function(){return this._get('locId')},getLocType:function(){return this._get('locType')},getLatitude:function(){return this._get('lat')},getLongitude:function(){return this._get('lon')},getFullName:function(){return this._get('prsntNm')},setCountryCode:function(cd){return this._set('cntryCd',cd)},getCountryCode:function(){return this._get('cntryCd')},setLocationRecord:function(locationRecord){jQuery.extend(this.attrs,locationRecord.data)},setObservationRecord:function(observationRecord){this._observationRecord=observationRecord},getObservationRecord:function(){return this._observationRecord},markObservationRecordFetched:function(){this._observationRecordFetched=true;return this},getIsObservationRecordFetched:function(){return!!this._observationRecordFetched},getNickname:function(){return this._get('nickname')},setNickname:function(val){return this._set('nickname',val)},getFullLocId:function(){return this.getLocId()+':'+this.getLocType()+':'+this.getCountryCode()},getCity:function(){return this.attrs['city']?this._get('city'):this._get('cityNm')},getState:function(){return this.attrs['state']?this._get('state'):this._get('stNm')},getCountry:function(){return this.attrs['countryName']?this._get('countryName'):this._get('_country')},getStateName:function(){return this._get('stateName')},getBigCity:function(){return this._get('bigcity')},getCountryName:function(){return this.attrs['countryName']?this._get('countryName'):this._get('_country')},getCityName:function(){return this._get('cityNm')},getStateCode:function(){return this._get('stCd')}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.savedLocation.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.profile.model.class.factory.js. */
twc.shared.apps.factory('PcoProfile',['TwcModel','twcUtil','twcPco','$q',function(TwcModel,twcUtil,twcPco,$q){var Profile=TwcModel.extend({init:function(){this.fromDto(twcUtil.clone(twcPco.get('profile').getAttributes()));var _self=this;$q.all(twcPco.get("profile").promises).then(function(){_self.fromDto(twcUtil.clone(twcPco.get('profile').getAttributes()))})},getAddlParams:function(){return this._get('addlparams')},getLastModified:function(){return this._get('lastmodified')},getUpHostname:function(){return this._get('uphostname')},getUsername:function(){return this._get('username')},getUserId:function(){return this._get('userid')}});return new Profile()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.profile.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.metrics.model.class.factory.js. */
twc.shared.apps.factory('PcoMetrics',['TwcModel','twcUtil','twcPco',function(TwcModel,twcUtil,twcPco){var Metrics=TwcModel.extend({init:function(){this.fromDto(twcUtil.clone(twcPco.get('metrics').getAttributes()))},getPageName:function(){return this._get('pagename')}});return new Metrics()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.metrics.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.products.model.class.factory.js. */
twc.shared.apps.factory('PcoProducts',['TwcModel','twcUtil','twcPco','$q',function(TwcModel,twcUtil,twcPco,$q){var Products=TwcModel.extend({init:function(){this.fromDto(twcUtil.clone(twcPco.get('products').getAttributes()))},onReady:function(callback){$q.all(twcPco.get("products").promises).then(function(){callback()})}});return new Products()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pco/models/pco.products.model.class.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/notify/notify.factory.js. */
twc.shared.apps.factory('twcNotify',['$log',function($log){window.l=$log;return{error:function(str){$log.error(str)},warning:function(str){$log.warn('%c'+str,'color:white;background-color:rgb(252, 191, 83)')},success:function(str){$log.log('%c'+str,'color:white;background-color:green')},info:function(str){$log.info('%c'+str,'color:white;background-color:rgb(84, 152, 255)')}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/notify/notify.factory.js. */
/**
 * Created with JetBrains PhpStorm.
 * User: thomas.vo
 * Date: 8/26/13
 * Time: 4:01 PM
 * To change this template use File | Settings | File Templates.
 *
 */
twc.shared = twc.shared || {};
twc.shared.apps = twc.shared.apps || angular.module("shared",[]);
twc.shared.apps.factory('twcUtil',function(){
  var _ = (function() {
    //     Underscore.js 1.8.3
    //     http://underscorejs.org
    //     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
    //     Underscore may be freely distributed under the MIT license.
    (function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);

    return this._;
  }).call({});

  //--------------------------------------------------------------------------------------
  //CUSTOM SETTINGS
  _.templateSettings = {
    evaluate:    /\{#(.+?)\}\}/g,       // {{# console.log("blah") }}
    interpolate: /\{\{(.+?)\}\}/g,      // {{ title }}
    escape:      /\{\{\{(.+?)\}\}\}/g,  // {{{ title }}}
  };

  //--------------------------------------------------------------------------------------
  //CUSTOM FUNCTIONS

  _.capitalize = (window.TWC && TWC.PcoUtils && TWC.PcoUtils.capitalize) || function(string) {
    string = String(string);
    return string && (string.charAt(0).toUpperCase() + string.slice(1));
  };

  _.convertToCamelCase = function(string) {
    string = String(string);
    return string && (string.charAt(0).toUpperCase() + string.slice(1).toLowerCase());
  };

  _.convertEachLetterCamelCase = function(string) {
    return string.toLowerCase().replace( /\b\w/g, function (m) {
        return m.toUpperCase();
    });
  };

  _.getCamelCase = function(name) {
    return name.toLowerCase().replace(/-(.)/g, function(match, group1) {
      return group1.toUpperCase();
    });
  },

  _.trim = function (str) {
    return str.replace(/^\s+|\s+$/g, '');
  };

  _.param = function(obj) {
    return jQuery.param(obj);
  };

  /**
   * Helper method to strip out :SS from HH:MM:SS am
   * @param tm
   * @returns {string}  Ex: 09:45 am
   */
  _.formatTime = function(tm) {
    var t1 = tm.split(':'), t2 = tm.split(' ');
    return [t1[0],':',t1[1], ' ', t2[1]].join('');
  };



  /**
   * Helper method to retrieve timezone based on browser or location object
   * loc Location object
   * @param loc
   * @returns {String} Ex: EDT
   */
  _.getTimeZone = function(loc) {
    return loc ? loc : new Date().toString().match(/\(([A-Za-z\s].*)\)/)[1];
  };

  /**
   * Merges multiple arrays into the first array
   */
  _.merge = function() {
    jQuery.merge.apply(jQuery,arguments);
  };

  /**
   * Split array into small sub-arrays of mentioned chunkSize.
   * Eg: chunk([1,2,3,4,5,6,7,8], 3) results in [[1,2,3], [4,5,6], [7,8]]
   * Added by: ksankaran (Velu)
   * @param array
   * @param chunkSize
   * @returns {Array|Array}
   */
  _.chunk = function(array, chunkSize) {
    return [].concat.apply([],
      _.map(array, function(elem,i) {
        return i%chunkSize ? [] : [array.slice(i,i+chunkSize)];
      })
    );
  };

  _.getURLParameter = ('PcoUtils' in TWC && 'getURLParameter' in TWC.PcoUtils) ? TWC.PcoUtils.getURLParameter : function( parameter ) {
    return decodeURIComponent((new RegExp('[?|&]' + parameter + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
  };

  /**
   * SafeApply for AngularJS modules.
   * @param scope
   * @param fn
   */
  _.safeApply = function(scope, fn) {
    return scope.$evalAsync(fn);
  };

  /**
   *
   * @param destination
   * @param {...*} sources
   * @returns {*}
   */
  _.deepExtend = function(destination) {
    var deepExtend = _.deepExtend;
    var sources = Array.prototype.slice.call(arguments,1);
    _.each(sources, function(source) {
      _.each(source,function(value,property) {
        if (value && _.isObject(value)) {
          destination[property] = destination[property] || {};
          deepExtend(destination[property], value);
        } else {
          destination[property] = value;
        }
      });
    });

    return destination;
  };

  /**
   *
   * @param locModel {{getCountryCode:Function}}
   * @returns {Boolean}
   */
  _.isUSLocation = function(locModel){
    return ((locModel.getCountryCode() || '').toLowerCase() ===  'us');
  };

  /**
   * isNumeric: Returns a boolean indicating if a given string value is number only
   * @param val
   * @returns {*|boolean}
   */
  _.isNumeric = function(val) {
    return /^-?\d+$/.test(val);
  };

  /**
   * isAlpha:  Returns a boolean indicating if a given string value is alphabet only
   * @param val
   * @returns {*|boolean}
   */
  _.isAlpha = function(val) {
    return /^[a-zA-Z.,\s]+$/.test(val);
  };

  /**
   * List of non-conus states
   * @type {Array}
   */
  _.nonConusStates = ['AK', 'AS', 'GU', 'HI', 'MP', 'MQ', 'PR', 'VI', 'WQ'];

  /**
   * Taken the location model and returns if the location is conus or not
   * @param loc
   * @returns {boolean}
   */
  _.isConus = function(loc) {
    var stateCd = loc.getStateCode();
    var countryCode = loc.getCountryCode();

    return _.isConusByCountryState(stateCd, countryCode);
  };

  /**
  * Taken the countryCode and the stateCode and returns if the location is conus or not
  * @param stateCd
  * @param countryCode
  * @returns {boolean}
  */
  _.isConusByCountryState = function(stateCd, countryCode) {
    return countryCode == 'US' && _.nonConusStates.indexOf(stateCd) === -1;
  };


  /**
   * returns null for undefined data field
   * @param input
   * @returns {*}
   */
  _.validate = function(input) {
    return (input === 0 || !!input) ? input : null;
  };

  /**
   *
   */

  _.dateTimeToDate = function(datetime){
    return datetime && datetime.replace(/-/g,"").substr(0,8);
  };
  /**
   * Get GMT diff from ISO date string. We can modify dsxdate but the
   * requirement was to just get the GMT diff and creating one big object
   * for just a small data is not a good idea.
   * @param dateStr in ISO format
   * @return {String}
   */
  _.getGMTOffsetFromISODate = function( dateStr ) {
    if(!!dateStr) {
      var match_parts = dateStr.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d+)([+-]?)(\d+)([:]{1})(\d+)/);
      // is it ISO string?
      if(match_parts && match_parts.length === 12) {
        var diff = ((parseInt(match_parts[9]) || 0) + ((parseInt(match_parts[11]) || 0) / 60));
        return (match_parts[8] === "-") ? -(diff) : diff;
      }
    }
    return null;
  };

  /**
   * Removes duplicated char in a given string
   * @param string
   * @param char
   * @returns {*}
   */
  _.removeDupChar = function(string, char) {
    var pattern = _isValid(char) ? "(" + char + ")\\1+" : "(\\" + char + ")\\1+";
    var regex = new RegExp(pattern, "g");
    return string.replace(regex, function (str, match) {
      return match[0]
    });
  };


  /**
   * Removes all special characters (keeps digits, word chars, underscores, and whitespaces)
   * @param string
   * @return string
   */
  _.removeSpecialChars = function(str) {
    return str.replace(/[^\w\s]/gi, '');
  };

  /**
   * Removes spaces
   * @param  string
   * @return string
   */
  _.removeSpaces = function(str) {
    return str.replace(/\s+/g, '');
  };

  /**
   * Check to see if char is not a special char
   * @param char
   * @returns {boolean}
   * @private
   */
  _isValid = function(char) {
    var check = /^[a-z0-9 ]$/i;
    return check.test(char);
  };

  /**
   * Removes char in a given string
   * @param string
   * @param char
   * @returns {*}
   * @private
   */
  _removeChar = function(string, char) {
    var pattern = _isValid(char) ? char : "\\"+char;
    var regex = new RegExp(pattern, "g");
    return string.replace(regex, function (str, match) {
      return '';
    });
  };

  /**
   * Converts hexadecimal colors to rgb in order to add the alpha channel
   * @param hex
   * @returns {{r: Number, g: Number, b: Number}}
   * @private
   */
  _.hexToRgb = function(hex, alpha) {
    // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
    var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
    hex = hex.replace(shorthandRegex, function(m, r, g, b) {
      return r + r + g + g + b + b;
    });

    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);

    var r = parseInt(result[1], 16),
        g = parseInt(result[2], 16),
        b = parseInt(result[3], 16),
        a = alpha || 1;

    var rgba = [r,g,b,a].join(',');
    var rgbaCode = ['rgba(', rgba, ')'].join('');

    return result ? rgbaCode : null;

  };

  _.loadTemplate = function(templateUrl) {
    var df = $q.defer();
    $http.get(templateUrl, {cache: $templateCache}).then(function(html) {
      df.resolve(html);
    });
    return df.promise;
  };


  /**
   * Converts ISO time to date object. Only for IE8
   * @returns date
   */
  _.fromISOToDate = (function(){
    var testIso = '2011-11-24T09:00:27+0200';
    // Chrome
    var diso= Date.parse(testIso);
    if(diso===1322118027000) {
      return function(s){
        return new Date(Date.parse(s));
      };
    }
    // JS 1.8 gecko
    var noOffset = function(s) {
      var day= s.slice(0,-5).split(/\D/).map(function(itm){
        return parseInt(itm, 10) || 0;
      });
      day[1]-= 1;
      day= new Date(Date.UTC.apply(Date, day));
      var offsetString = s.slice(-5);
      var offset = parseInt(offsetString,10)/100;
      if (offsetString.slice(0,1)==="+"){offset*=-1;}
      day.setHours(day.getHours()+offset);
      return day;
    };
    if (noOffset(testIso)===1322118027000) {
      return noOffset;
    }
    return function(s){ // kennebec@SO + QTax@SO
      var day, tz,
//        rx = /^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d{4}))?$/,
        rx = /^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,

        p= rx.exec(s) || [];
      if(p[1]){
        day= p[1].split(/\D/).map(function(itm){
          return parseInt(itm, 10) || 0;
        });
        day[1]-= 1;
        day= new Date(Date.UTC.apply(Date, day));
        if(!day.getDate()){ return NaN;}
        if(p[5]){
          tz= parseInt(p[5], 10)/100*60;
          if(p[6]) {tz += parseInt(p[6], 10);}
          if(p[4]=== "+") {tz*= -1;}
          if(tz) {day.setUTCMinutes(day.getUTCMinutes()+ tz);}
        }
        return day;
      }
      return NaN;
    };
  })();

  return _;
});
;/**/
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/location_name/twc_location_name.directive.js. */
twc.shared.apps.directive('twcLocationName',['$filter',function($filter){'use strict';var directiveObj={scope:{twcLocationName:'='},link:function(scope){var filter=$filter('locationName');scope.$watch('twcLocationName',function(loc){scope.$parent.presentationName=filter(loc)})}};return directiveObj}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/location_name/twc_location_name.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/twc_social_sharing.directive.js. */
twc.shared.apps.directive('twcSocialBar',['$rootScope','twcUtil','$compile','$parse','$timeout',function($rootScope,twcUtil,$compile,$parse,$timeout){return{restrict:'EA',templateUrl:function(element,attrs){var templatePath='/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/templates/',device=$rootScope.isMobile?'mobile':'',template=attrs.template,basicTemplate=(angular.element('html').hasClass('lt-ie9')||angular.element('html').hasClass('ie-9'))?'social_bar.html':'social_bar.html';basicTemplate=template?template+'.html':basicTemplate;return(attrs.template?templatePath+attrs.template+'.html':templatePath+device+basicTemplate)+"?v=1.0.113"},require:'^twcReferenceScope',scope:{providers:'=',tooltipPosition:'=',theme:'='},controller:['$scope',function($scope){this.doShare=function(media){$scope.callback($scope.refCtrl.refScope(),{media:media})};this.tooltipPosition=function(){return $scope.tooltipPosition};this.theme=function(){return $scope.theme};$scope.toggleExpand=false;$scope.expand=function(){$scope.toggleExpand=!$scope.toggleExpand}}],link:function(scope,element,attrs,refCtrl){var $ul=element.find('ul');scope.refCtrl=refCtrl;scope.callback=$parse(attrs.callback);angular.forEach(scope.providers,function(provider,key){$ul.append($compile('<div data-twc-media data-provider="'+provider+'"></div>')(scope))})}}}]).directive('twcMedia',['twcConstant','$filter',function(twcConstant,$filter){return{restrict:'EA',replace:true,templateUrl:'/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/templates/social_media.html',require:['^twcSocialBar','^?twcTooltip'],scope:true,controller:['$scope',function($scope){$scope.doShare=function(){$scope.ctrl.doShare($scope.provider)};$scope.getTooltipPosition=function(){return $scope.ctrl.tooltipPosition()};$scope.getTheme=function(){return $scope.ctrl.theme()}}],link:function(scope,element,attrs,ctrls){var tooltipCtrl=ctrls[1]?ctrls[1]:null,span=element.find('span');scope.provider=attrs.provider?attrs.provider:'';scope.title=$filter('translate')('twcSocialSharing.'+scope.provider);scope.mediaClass=twcConstant.socialMedia[scope.provider].icon||"";scope.ctrl=ctrls[0];scope.$watch('getTooltipPosition()',function(newVal,oldVal){scope.tooltipPosition=newVal})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/twc_social_sharing.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/twc_social_sharing.factory.js. */
twc.shared.apps.factory('TwcSocialSharing',['$rootScope','$window','customEvent','$q','PageMetaTags','twcConstant','httpclient','TwcMicrodata','$interpolate','providerRulesFactory',function($rootScope,$window,customEvent,$q,PageMetaTags,twcConstant,httpclient,TwcMicrodata,$interpolate,providerRulesFactory){'use strict';var share={},schema=twcConstant.microdata.schema,socialConstants={basePath:'http://'+window.location.hostname,securePath:'https://ssl.weather.com',playerSwf:'/sites/all/modules/custom/angularmods/app/shared/videoamp/lib/amp.premier/AkamaiPremierPlayer.swf',logoImage:twcConstant.assetsUrl+'240x180_twc_default.png',fbSite:'The Weather Channel',twitterSite:'@weatherchannel'};customEvent.getEvent('close-ugc-modal-event').progress(function(event,data){TwcMicrodata.injectMicrodata()});var social={settingsData:{messageAssetId:{video:""}},isLoggedIn:false,userName:'',status:'',user:'',userAuth:{},shareUrl:$window.location.href,gigyaLoaded:false,gigyaUrl:$window.location.protocol==='https:'?'https://cdns.gigya.com/js/gigya.js':'http://cdn.gigya.com/js/gigya.js',apiKey:'2_zm_J-0UHOLnihq44PTNDi4NgoxbHWy24MhkmKlQMWPd3lOa1a-4r8uViC7HAu8Jr',gigyaParams:{callback:window.gigyaConnectCallback},getGigyaUrl:function(){return social.gigyaUrl+'?apiKey='+social.apiKey},loadGigyaAPI:function(){var df=$q.defer();if(typeof gigya==='undefined'&&!social.gigyaLoaded&&social.gigyaLoaded!=='loading'){social.gigyaLoaded='loading';window.onGigyaServiceReady=function(response){social.gigyaLoaded=true;customEvent.getEvent('gigyaLoadedEvent').resolve();df.resolve(response)};httpclient.getScript({url:social.getGigyaUrl()})}else df.resolve();return df.promise},connect:function(provider){var df=$q.defer();social.gigyaParams={provider:provider,callback:function(response){df.resolve(response)}};social.loadGigyaAPI().then(function(){gigya.socialize.addConnection(social.gigyaParams)});return df.promise},alertInfoUpdate:function(instanceId,alert){if(alert){angular.forEach({'og:site_name':socialConstants.fbSite,'og:title':alert.title,'og:image':socialConstants.logoImage,'og:url':alert.url+"?_escaped_fragment_",'og:description':alert.description,'og:type':'website'},function(value,key){PageMetaTags.addOGTagToDOM(key,value)});angular.forEach({'twitter:site':socialConstants.twitterSite,'twitter:title':alert.description,'twitter:image:src':socialConstants.logoImage,'twitter:url':alert.url,'twitter:description':alert.description,'twitter:card':'summary'},function(value,key){PageMetaTags.addTwitterTagToDOM(key,value)});social.setMetaTags(instanceId,alert);social.updateShareUrl(instanceId,alert.url);TwcMicrodata.injectMicrodata({schema:schema.organization.name,image:socialConstants.logoImage,name:alert.title,description:alert.description})}},toMediaAsset:function(asset){var mediaAsset={},self=this;if(!asset)return mediaAsset;mediaAsset.type=(asset.getType()==='video'?'video':'photo');mediaAsset={assetId:asset.getId(),title:asset.getTitle(),type:asset.getType(),description:asset.getDescription(),image:asset.getLargeThumbUrl(),stream:asset.getAssetUrl(),width:'485',height:'273'};if(asset.getType()==='video'){mediaAsset.secureurl=socialConstants.securePath+'/video/player/'+mediaAsset.assetId;mediaAsset.width=985;mediaAsset.height=551};mediaAsset.url='http://'+window.location.hostname+asset.getCanonicalUrl();return mediaAsset},assetInfoUpdate:function(instanceId,asset){var self=this,mediaAsset=this.toMediaAsset(asset);if(asset){if(asset.getType()==='video'&&asset.getFlags()&&!asset.getFlags()["Facebook"]){providerRulesFactory.getErrorMessageAsset('video',social.settingsData.messageAssetId).done(function(messageVideoData){social.populateOGTagsForAsset(self.toMediaAsset(messageVideoData))})}else social.populateOGTagsForAsset(mediaAsset);if(asset.getType()==='video'&&asset.getFlags()&&!asset.getFlags()["Twitter"]){providerRulesFactory.getErrorMessageAsset('video',social.settingsData.messageAssetId).done(function(messageVideoData){social.populateTwitterCardsForAsset(self.toMediaAsset(messageVideoData))})}else social.populateTwitterCardsForAsset(mediaAsset);social.setMetaTags(instanceId,mediaAsset);social.updateShareUrl(instanceId,mediaAsset.url);if(asset.getType()==='video'){if(asset.getFlags()&&!asset.getFlags()["Google+"]){providerRulesFactory.getErrorMessageAsset('video',social.settingsData.messageAssetId).done(function(messageVideoData){customEvent.getEvent("pcoReady").done(function(){var messageVideoAsset=self.toMediaAsset(messageVideoData);TwcMicrodata.injectMicrodata({schema:schema.video.name,image:messageVideoAsset.image,name:messageVideoAsset.title,description:messageVideoAsset.description,embedUrl:messageVideoAsset.stream,thumbnailUrl:messageVideoAsset.image,author:asset.getProviderId()})})})}else TwcMicrodata.injectMicrodata({schema:schema.video.name,image:mediaAsset.image,name:mediaAsset.title,description:mediaAsset.description,embedUrl:mediaAsset.stream,thumbnailUrl:mediaAsset.image,author:asset.getProviderId()})}else TwcMicrodata.injectMicrodata({schema:schema.image.name,image:mediaAsset.image,name:mediaAsset.title,description:mediaAsset.description,author:asset.getProviderId(),publishDate:asset.getPublishDate()})}},updateMapLayerShare:function(instanceId,url){social.updateShareUrl(instanceId,url);TwcMicrodata.injectMicrodata({schema:schema.organization.name,image:socialConstants.logoImage})},populateOGTagsForAsset:function(mediaAsset){var ogTags={'og:site_name':socialConstants.fbSite,'og:title':mediaAsset.title,'og:image':mediaAsset.image,'og:url':mediaAsset.url+"?_escaped_fragment_",'og:description':mediaAsset.description,'og:type':'website'};angular.forEach(ogTags,function(value,key){PageMetaTags.addOGTagToDOM(key,value)})},populateTwitterCardsForAsset:function(mediaAsset){var twitterTags={'twitter:site':socialConstants.twitterSite,'twitter:title':mediaAsset.title,'twitter:image:src':mediaAsset.image,'twitter:url':mediaAsset.url,'twitter:description':mediaAsset.description,'twitter:card':'summary'};if(mediaAsset.type==='video'){twitterTags['twitter:card']='player';twitterTags['twitter:player:width']=mediaAsset.width;twitterTags['twitter:player:height']=mediaAsset.height;twitterTags['twitter:player']=mediaAsset.secureurl}else if(mediaAsset.type==='image')twitterTags['twitter:card']='photo';angular.forEach(twitterTags,function(value,key){PageMetaTags.addTwitterTagToDOM(key,value)})},setMetaTags:function(instanceId,override){var pageTitle=$interpolate(TWC.pageTitle)($rootScope),pageUrl=document.location.href,desc=$interpolate(TWC.pageDescription)($rootScope),ogType=function(){return angular.element(document.querySelector('[property="og:type"]')).attr('content')},ogUrl=function(){return angular.element(document.querySelector('[property="og:url"]')).attr('content')},ogTitle=function(){return(angular.element(document.querySelector('[property="og:title"]')).attr('content'))},ogDescription=function(){return(angular.element(document.querySelector('[property="og:description"]')).attr('content'))},ogImageUrl=function(){return angular.element(document.querySelector('[property="og:image"]')).attr('content')},twitterUrl=function(){return angular.element(document.querySelector('[name="twitter:url"]')).attr('content')},twitterTitle=function(){return(angular.element(document.querySelector('[name="twitter:title"]')).attr('content'))},twitterDescription=function(){return(angular.element(document.querySelector('[name="twitter:description"]')).attr('content'))},twitterImageUrl=function(){return angular.element(document.querySelector('[name="twitter:image:src"]')).attr('content')},isArticle=!!Drupal.settings['ct_article'],metaTags;if(!share[instanceId]){share[instanceId]={metaTags:{},media:{}};metaTags=share[instanceId].metaTags}else metaTags=share[instanceId].metaTags;metaTags.ogType=function(){return(override&&override.type)?override.type:ogType()};metaTags.ogUrl=function(){return(override&&override.url)?override.url:ogUrl()};metaTags.ogTitle=function(){return(override&&override.title)?override.title:ogTitle()};metaTags.ogDescription=function(){return(override&&override.description)?override.description:ogDescription()};metaTags.ogImageUrl=function(){return(override&&override.image)?override.image:ogImageUrl()};metaTags.twitterUrl=function(){return(override&&override.url)?override.url:twitterUrl()};metaTags.twitterImageUrl=function(){return(override&&override.image)?override.image:twitterImageUrl()};metaTags.twitterTitle=function(){return(override&&override.title)?override.title:twitterTitle()};metaTags.twitterDescription=function(){return(override&&override.description)?override.description:twitterDescription()};metaTags.twitterSite=function(){return socialConstants.twitterSite};if(!ogType()&&!isArticle){ogType=function(){return'website'};metaTags.ogType=function(){return ogType()};PageMetaTags.addOGTagToDOM('og:type',ogType())};if(!metaTags.ogUrl()){metaTags.ogUrl=function(){return pageUrl};PageMetaTags.addTwitterTagToDOM('og:url',pageUrl)};if(!metaTags.twitterUrl()){metaTags.twitterUrl=function(){return pageUrl};PageMetaTags.addTwitterTagToDOM('twitter:url',pageUrl)};if(!metaTags.ogTitle()){metaTags.ogTitle=function(){return pageTitle};PageMetaTags.addOGTagToDOM('og:title',metaTags.ogTitle())};if(!metaTags.ogDescription()){metaTags.ogDescription=function(){return desc};PageMetaTags.addOGTagToDOM('og:description',metaTags.ogDescription())};PageMetaTags.addOGTagToDOM('og:site_name',socialConstants.fbSite);if(!metaTags.twitterTitle()){metaTags.twitterTitle=function(){return pageTitle};PageMetaTags.addTwitterTagToDOM('twitter:title',metaTags.twitterTitle())};if(!metaTags.twitterDescription()){metaTags.twitterDescription=function(){return desc};PageMetaTags.addTwitterTagToDOM('twitter:description',metaTags.twitterDescription())};if(!metaTags.ogImageUrl()){metaTags.ogImageUrl=function(){return socialConstants.logoImage};PageMetaTags.addOGTagToDOM('og:image',socialConstants.logoImage)};if(!metaTags.twitterImageUrl()){metaTags.twitterImageUrl=function(){return socialConstants.logoImage};PageMetaTags.addTwitterTagToDOM('twitter:image:src',socialConstants.logoImage)};if(!metaTags.twitterSite()){metaTags.twitterSite=function(){return socialConstants.twitterSite};PageMetaTags.addTwitterTagToDOM('twitter:site',socialConstants.twitterSite)}},updateShareUrl:function(instanceId,shareUrl){if(!share[instanceId])share[instanceId]={metaTags:{},media:{}};var metaTags=share[instanceId].metaTags,media=share[instanceId].media;media.shareUrl=shareUrl;media.shareUrl+=((media.shareUrl.indexOf('?')!==-1)?'&':'?');media.facebookUrl=media.shareUrl+'cm_ven=Facebook&cm_cat=www.facebook.com&cm_pla=fb_feed&cm_ite=fb_social_rec&fb_ref=ls_share';media.twitterUrl=media.shareUrl+'cm_ven=Twitter&cm_cat=www.twitter.com&cm_pla=tw_feed&cm_ite=tw_social_tweet';media.redditUrl=media.shareUrl+'cm_ven=Reddit&cm_cat=www.reddit.com&cm_pla=r_feed&cm_ite=r_social_post';media.pinterestUrl=media.shareUrl+'cm_ven=Pinterest&cm_cat=www.pinterest.com&cm_pla=p_feed&cm_ite=p_social_pin';media.googleplusUrl=media.shareUrl+'cm_ven=GooglePlus&cm_cat=plus.google.com&cm_pla=gp_feed&cm_ite=gp_social_post';media.emailUrl=media.shareUrl+'&cm_ven=Email&cm_cat='+metaTags.cmCat},setShareUrl:function(instanceId){social.updateShareUrl(instanceId,(angular.element(document.querySelector('[rel="canonical"]')).attr('href')||$window.location.href))},getShareInstance:function(instanceId){return share[instanceId]},initSocialSettings:function(instanceId,settingsData){social.settingsData.messageAssetId.video=settingsData.videoMessageAssetId;return($q.all(social.setMetaTags(instanceId),social.setShareUrl(instanceId),social.loadGigyaAPI()))}};return social}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/twc_social_sharing.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/twc_social_sharing.controller.js. */
twc.shared.apps.controller('twcSocialSharingController',['$scope','DrupalSettings','TwcSocialSharing','$q','customEvent','twcConfig','$injector','twcConstant','twcPco','twcUtil',function($scope,DrupalSettings,TwcSocialSharing,$q,customEvent,twcConfig,$injector,twcConstant,twcPco,twcUtil){'use strict';var logger=$scope.$root.$log.getInstance('twcSocialSharingController'),status=twcConfig.module_status_codes,params,share,metaTags,media,trackEvents={facebook:'event53,event57',twitter:'event55,event57',pinterest:'event62,event57',reddit:'event67,event57',googleplus:'event61,event57',email:'event56,event57'},isArticle=!!Drupal.settings['ct_article'],fns={createProviderArray:function(settings){angular.forEach(settings.providers,function(value){if(value)$scope.params.providers.push(value)})}};$scope.params={status:status.LOADING,scope:$scope,providers:[]};$scope.init=function(settings){$scope.params.settings=settings;$scope.params.instanceId=DrupalSettings.getInstanceIdBySettings(settings);fns.createProviderArray(settings);jQuery.when.apply(jQuery,[].concat(twcPco.get("page").promises,twcPco.get("user").promises)).done(function(){TwcSocialSharing.initSocialSettings($scope.params.instanceId,$scope.params.settings).then(function(){params=$scope.params;share=TwcSocialSharing.getShareInstance(params.instanceId);metaTags=share.metaTags;media=share.media})});customEvent.getEvent('newAsset').progress(function(payload,instanceId){if(isArticle)return;TwcSocialSharing.assetInfoUpdate(instanceId||$scope.params.instanceId,payload)});customEvent.getEvent('imap_layerChanged').progress(function(layer){var currentURL=window.location.href,queryStringChar=((currentURL.indexOf('?')!==-1)?'&':'?'),layersParam=TWC.PcoUtils.getURLParameter("interactiveMapLayer"),posOfLayersParam=currentURL.indexOf("interactiveMapLayer");if(posOfLayersParam!==-1){currentURL=currentURL.replace("interactiveMapLayer="+layersParam,"interactiveMapLayer="+layer)}else currentURL=currentURL+queryStringChar+"interactiveMapLayer="+layer;TwcSocialSharing.updateMapLayerShare($scope.params.instanceId,currentURL)});customEvent.getEvent('alertDetailEvent').progress(function(payload){TwcSocialSharing.alertInfoUpdate($scope.params.instanceId,payload)});customEvent.getEvent('urlChangeEvent').progress(function(){TwcSocialSharing.setShareUrl($scope.params.instanceId)})};$scope.openShare=function(provider){var titleStr,thumbnailUrlStr,twitterTitle=(metaTags.twitterTitle&&metaTags.twitterTitle())||(metaTags.ogTitle&&metaTags.ogTitle())||"",twitterImageUrl=metaTags.twitterImageUrl&&metaTags.twitterImageUrl(),shareUrl=media.shareUrl,ogImageUrl=metaTags.ogImageUrl&&metaTags.ogImageUrl(),ogDescription=metaTags.ogDescription&&metaTags.ogDescription();if(provider==="twitter"){titleStr=twitterTitle?twitterTitle+' @weatherchannel':metaTags.twitterDescription()+' @weatherchannel';thumbnailUrlStr=twitterImageUrl?twitterImageUrl:ogImageUrl}else{titleStr=metaTags.ogTitle&&metaTags.ogTitle();thumbnailUrlStr=ogImageUrl};var gigUrl=media[provider+"Url"];if(!gigUrl)gigUrl=shareUrl;var act=new gigya.socialize.UserAction();act.setTitle(titleStr);act.setSubtitle(window.location.hostname);act.setLinkBack(gigUrl);if(ogDescription)act.setDescription(ogDescription);if(metaTags.ogType()==="video"&&provider==="facebook"){var video={previewImageURL:thumbnailUrlStr,previewImageWidth:'160',previewImageHeight:'90',type:'flash',width:'485',height:'273'};act.addMediaItem(video)}else act.addMediaItem({type:'image',src:thumbnailUrlStr,href:gigUrl});if(gigya&&provider!=='email'){var options={provider:provider,url:gigUrl,title:titleStr,cid:twcPco.getNodeValue("metrics","contentChannel")||"",shortURLs:(provider==="twitter"?'always':'never'),description:ogDescription,thumbnailURL:thumbnailUrlStr,userAction:act};if(provider==='facebook')options.facebookDialogType='feed';gigya.socialize.postBookmark(options);$scope.trackProvider(provider)}else if(gigya&&provider==='email'){$scope.trackProvider(provider);location.href='mailto:?body='+encodeURIComponent(titleStr+'\n\n'+gigUrl)+'&subject=Check this out on weather.com'}else return false};$scope.trackProvider=function(provider){var attrs={linkTrackVars:'eVar21,eVar22,eVar24,campaign,events',linkTrackEvents:trackEvents[provider],socialTrackAction:true,eVar21:provider,eVar22:twcPco.getNodeValue("metrics","pagename")||"",eVar24:twcPco.getNodeValue("metrics","contentChannel")||"",campaign:null,events:trackEvents[provider]};$scope.tracking(twcConstant.socialMedia[provider].title,attrs)};$scope.tracking=function(trackStr,attrs){customEvent.getEvent('track-string-event').notify({trackStr:trackStr,settings:params.settings,attrs:attrs})}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/twc_social_sharing.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/mobile_header_display_ctr/mobile_header_display_ctr.factory.js. */
twc.shared.apps.factory("mobileHeaderDisplayCtr",function(){'use strict';var displayMainMenu=false,mw_main_menu_icon="wx-iconfont-global wx-icon-menu",mw_main_menu=" ",mw_nav_menu=" ",hideSearchBox=true,api={getActiveMenuIconClass:function(){return mw_main_menu_icon},getActiveMainMenuClass:function(){return mw_main_menu},getActiveNavMenuClass:function(){return mw_nav_menu},getDisplayMainMenuValue:function(){return displayMainMenu},displayMenu:function(){displayMainMenu=true;mw_main_menu_icon="wx-iconfont-global wx-icon-close";mw_main_menu="mw-menu-active";mw_nav_menu="mw-nav-active"},hideMainMenu:function(){displayMainMenu=false;mw_main_menu_icon="wx-iconfont-global wx-icon-menu";mw_main_menu="";mw_nav_menu=""},getSearchBoxDisplayValue:function(){return hideSearchBox},displaySearchLocations:function(){hideSearchBox=false;api.changeFocus()},hideSearchLocations:function(){hideSearchBox=true}};return api});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/mobile_header_display_ctr/mobile_header_display_ctr.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/loc_util/loc_util.factory.js. */
twc.shared.apps.factory("locUtil",['twcUtil',function(twcUtil){function convertToLocId(locObj){if(!locObj)return null;if(twcUtil.isString(locObj)){if(((""+locObj).length===5)&&!isNaN(locObj))return locObj+":4:US";if(locObj.length===8&&locObj.slice(0,2)==="US")return locObj+":1:US";if(locObj.split(",").length===2)return locObj;if((splitLength=locObj.split(":").length)>=2)return locObj+(splitLength===2?":US":"");if(locObj.split(":").length===3)return locObj}else if(twcUtil.isNumber(locObj)&&locObj.toString().length===5){return locObj+":4:US"}else if(twcUtil.isObject(locObj)){if('lat'in locObj&&'lng'in locObj)return locObj.lat+","+locObj.lng;if('locId'in locObj&&'locType'in locObj&&'cntryCd'in locObj)return locObj.locId+":"+locObj.locType+":"+locObj.cntryCd};return null}
function areLocationsEqual(location1,location2){if(location1&&location2)return(location1.locId===location2.locId);return false};return{getFullLocId:function(locObj){return convertToLocId(locObj)},areLocationsEqual:function(location1,location2){return areLocationsEqual(location1,location2)}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/loc_util/loc_util.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dom_event_origin_verifier/dom_event_origin_verifier.factory.js. */
twc.shared.apps.factory('TwcDomEventOriginVerifier',['twcUtil','TwcClass','pcoUser',function(twcUtil,TwcClass,pcoUser){var incrementId=0,namespace='twcDomEventOriginVerifier';return TwcClass.extend({construct:function(originator,events){this.id=incrementId++;if(originator){this.setOriginator(originator);if(events)this.bindEvents(events)}},setOriginator:function(originator){this.originator=angular.element(originator)},bindEvents:function(events){events=twcUtil.isArray(events)?events:events.split(/\s+/);var eventStr=twcUtil.reduce(events,function(str,event){return str+(event?event+'.'+namespace+' ':'')},''),self=this;if(pcoUser.getBrowser().ltIE9){this.originator.on(eventStr,function(e){if(e.originalEvent)e.originalEvent.data=namespace+':'+self.id})}else this.originator.on(eventStr,function(e){if(e.originalEvent)e.originalEvent[namespace]=self.id})},cleanUp:function(){if(this.originator)this.originator.off('.'+namespace)},verifyOrigin:function(event){event=event.originalEvent||event;if(pcoUser.getBrowser().ltIE9){return event.data===namespace+':'+this.id}else return event[namespace]===this.id},test:function(event){return this.verifyOrigin(event)}})}]).factory('eventOrigin',['TwcDomEventOriginVerifier',function(TwcDomEventOriginVerifier){return{init:function(params){var scope=params.scope,events=params.event||params.events,origin=params.origin,verifier=new TwcDomEventOriginVerifier(origin,events);scope.$on('$destroy',function(){verifier.cleanUp()});return verifier}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dom_event_origin_verifier/dom_event_origin_verifier.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/social_links/social_links.directives.js. */
twc.shared.apps.directive('twcFbShare',['twcConstant',function(twcConstant){'use strict';return{scope:true,replace:false,transclude:false,controller:["$scope","$element","$attrs","customEvent",function($scope,$element,$attrs,customEvent){$element.bind('click',function(){customEvent.getEvent("gigyaLoadedEvent").done(function(){if(!$attrs.fbDescription)$attrs.fbDescription="Visit www.weather.com for continuing coverage.";if($attrs.twcFbShare.indexOf("http://")<0)$attrs.twcFbShare="http://"+window.location.hostname+$attrs.twcFbShare;var act=new gigya.socialize.UserAction();act.setTitle($attrs.fbTitle);act.setSubtitle($attrs.fbCaption||"http://www.weather.com");act.setLinkBack($attrs.twcFbShare);gigya.socialize.postBookmark({provider:'facebook',url:$attrs.twcFbShare,title:$attrs.fbTitle,cid:$attrs.fbCid,shortURLs:'always',thumbnailURL:$attrs.fbPicture||twcConstant.assetsUrl+'240x180_twc_default.png',userAction:act})});return false})}]}}]).directive('twcGplusShare',function(){'use strict';return{scope:true,replace:false,transclude:false,controller:["$scope","$element","$attrs","customEvent",function($scope,$element,$attrs,customEvent){$element.bind('click',function(){customEvent.getEvent("gigyaLoadedEvent").done(function(){if($attrs.twcGplusShare.indexOf("http://")<0)$attrs.twcGplusShare="http://"+window.location.hostname+$attrs.twcGplusShare;gigya.socialize.postBookmark({provider:'googleplus',url:$attrs.twcGplusShare,cid:$attrs.twcGplusCid,shortURLs:'never'})});return false})}]}}).directive('twcTwShare',function(){'use strict';return{scope:true,replace:false,transclude:false,controller:["$scope","$element","$attrs","customEvent",function($scope,$element,$attrs,customEvent){$element.bind('click',function(){customEvent.getEvent("gigyaLoadedEvent").done(function(){if($attrs.twcTwShare.indexOf("http://")<0)$attrs.twcTwShare="http://"+window.location.hostname+$attrs.twcTwShare;gigya.socialize.postBookmark({provider:'twitter',title:$attrs.twTitle+'&via=weatherchannel',cid:$attrs.twcTwCid,url:$attrs.twcTwShare,shortURLs:'always'})});return false})}]}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/social_links/social_links.directives.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsx_date/dsx_date.config.js. */
twc.shared.apps.run(['$locale',function($locale){$locale.DATETIME_FORMATS.dsxShortDate='MMM, d';$locale.DATETIME_FORMATS.dsxLongDate='EEEE, MMM d';$locale.DATETIME_FORMATS.dsxMedium='MMM d, yyyy, h:mma z'}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsx_date/dsx_date.config.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsx_date/dsx_date.factory.js. */
twc.shared.apps.factory("datefactory",['$locale','twcUtil','$log',function($locale,twcUtil,$log){var date=function(dateStr,timeStr,tzStr){var self=this,formatter=(function(){var slice=[].slice,getPrefix,uppercase=function(string){return twcUtil.isString(string)?string.toUpperCase():string}
function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}
function padNumber(num,digits,trim){var neg='';if(num<0){neg='-';num=-num};num=''+num;while(num.length<digits)num='0'+num;if(trim)num=num.substr(num.length-digits);return neg+num}
function dateGetter(name,size,offset,trim){offset=offset||0;return function(date){var value=date[getPrefix+name]();if(offset>0||value>-offset)value+=offset;if(value===0&&offset===-12)value=12;return padNumber(value,size,trim)}}
function dateStrGetter(name,shortForm){return function(date,formats){var value=date[getPrefix+name](),get=uppercase(shortForm?('SHORT'+name):name);return formats[get][value]}}
function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=(zone>=0)?"+":"";paddedZone+=padNumber(Math[zone>0?'floor':'ceil'](zone/60),2)+padNumber(Math.abs(zone%60),2);return paddedZone}
function timeZoneStrGetter(){return self.tz}
function ampmGetter(date,formats){return(date[getPrefix+'Hours']()<12?formats.AMPMS[0]:formats.AMPMS[1]).toLowerCase()}
function AMPMGetter(date,formats){return ampmGetter(date,formats).toUpperCase()};var DATE_FORMATS={yyyy:dateGetter('FullYear',4),yy:dateGetter('FullYear',2,0,true),y:dateGetter('FullYear',1),MMMM:dateStrGetter('Month'),MMM:dateStrGetter('Month',true),MM:dateGetter('Month',2,1),M:dateGetter('Month',1,1),dd:dateGetter('Date',2),d:dateGetter('Date',1),HH:dateGetter('Hours',2),H:dateGetter('Hours',1),hh:dateGetter('Hours',2,-12),h:dateGetter('Hours',1,-12),mm:dateGetter('Minutes',2),m:dateGetter('Minutes',1),ss:dateGetter('Seconds',2),s:dateGetter('Seconds',1),sss:dateGetter('Milliseconds',3),EEEE:dateStrGetter('Day'),EEE:dateStrGetter('Day',true),a:ampmGetter,A:AMPMGetter,Z:timeZoneGetter,z:timeZoneStrGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaAZzE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|A|Z|z))(.*)/,NUMBER_STRING=/^\d+$/;return(function(){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/
function jsonStringToDate(string){var match=string.match(R_ISO8601_STR);if(match){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;if(match[9]){tzHour=int(match[9]+match[10]);tzMin=int(match[9]+match[11])};dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(parseFloat('0.'+(match[7]||0))*1e3);timeSetter.call(date,h,m,s,ms);return date};return string};return function(date,format){var text='',parts=[],fn,match;getPrefix=(self.nativeDate?'get':'getUTC');format=format||'mediumDate';format=$locale.DATETIME_FORMATS[format]||format;if(twcUtil.isString(date))if(NUMBER_STRING.test(date)){date=int(date)}else date=jsonStringToDate(date);if(twcUtil.isNumber(date))date=new Date(date);if(!twcUtil.isDate(date))return date;while(format){match=DATE_FORMATS_SPLIT.exec(format);if(match){parts=concat(parts,match,1);format=parts.pop()}else{parts.push(format);format=null}};twcUtil.each(parts,function(value){fn=DATE_FORMATS[value];text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,'').replace(/''/g,"'")});return text}})()})();this.format=function(format){return formatter(this.nativeDate||this.toUTCDateObject(),format)};this.toUTCDateObject=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour||0,this.minute||0,this.second||0,0))};this.toDateObject=function(){return new Date(this.year,this.month-1,this.day,this.hour||0,this.minute||0,this.second||0,0)};this.toString=function(){return'DSXDate Object: '+this.date+' - '+this.time+' - '+this.tz};this.nativeDate=angular.isDate(dateStr)&&dateStr;this.tz=String(tzStr||'');if(!this.nativeDate){this.date=String(dateStr||'');this.time=String(timeStr||'');if(this.date&&this.date.length===8){this.year=parseInt(this.date.substring(0,4),10);this.month=parseInt(this.date.substring(4,6),10);this.day=parseInt(this.date.substring(6),10)};if(this.time){var hourVal=parseInt(this.time.substring(0,2),10),minuteVal=parseInt(this.time.substring(2,4),10),secondVal=parseInt(this.time.substring(4),10);this.hour=(!isNaN(hourVal)?hourVal:undefined);this.minute=(!isNaN(minuteVal)?minuteVal:undefined);this.second=(!isNaN(secondVal)?secondVal:undefined)}}}
function getDateObject(dateStr,timeStr,tzStr){try{return new date(dateStr,timeStr,tzStr)}catch(err){$log.error(err)};return null};var ret={'new':function(){if(arguments[0]&&angular.isDate(arguments[0]))return getDateObject(arguments[0],null,arguments[1]);var dateStr,timeStr,tzStr;if(arguments.length<=2){if(!isNaN(arguments[0])){dateStr=arguments[0].toString().slice(0,8);timeStr=arguments[0].toString().slice(8);tzStr=arguments[1]}else{var match_parts=arguments[0].match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);if(match_parts&&match_parts.length>=7){dateStr=match_parts[1]+match_parts[2]+match_parts[3];timeStr=match_parts[4]+match_parts[5]+match_parts[6];tzStr=arguments[1]}}}else if(arguments.length===3){dateStr=arguments[0];timeStr=arguments[1];tzStr=arguments[2]};return getDateObject(dateStr,timeStr,tzStr)}};return ret}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsx_date/dsx_date.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/page_metatags/page_metatags.factory.js. */
twc.shared.apps.factory('PageMetaTags',function(){return{addOGTagToDOM:function(key,value){if(!key||!value)return;var meta=this.checkElementExists(key),doesElemExists=false;if(!meta){meta=document.createElement('meta')}else doesElemExists=true;meta.setAttribute("property",key);meta.setAttribute("content",value);if(!doesElemExists)document.getElementsByTagName('head')[0].appendChild(meta)},addMicroData:function(key,value){if(!key||!value)return;var meta=document.querySelector('[itemprop="'+key+'"]');if(!meta)meta=document.createElement('meta');meta.setAttribute("itemprop",key);meta.setAttribute("content",value);document.getElementsByTagName('head')[0].appendChild(meta)},checkElementExists:function(key){var meta=document.querySelector('[property="'+key+'"]');if(!meta)meta=document.querySelector('[name="'+key+'"]');return meta},addTwitterTagToDOM:function(key,value){if(!key||!value)return;var meta=this.checkElementExists(key),doesElemExists=false;if(!meta){meta=document.createElement('meta')}else doesElemExists=true;meta.setAttribute("name",key);meta.setAttribute("content",value);if(!doesElemExists)document.getElementsByTagName('head')[0].appendChild(meta)}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/page_metatags/page_metatags.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/mouse_broadcast/mouse_broadcast.factory.js. */
twc.shared.apps.factory('MouseBroadcast',['$rootScope',function($rootScope){'use strict';var location=null,lastLocation=null,api={getLocation:function(){return angular.copy(location)},setLocation:function(scope,attrs,evt){if(location)lastLocation=location;location={x:evt.pageX,y:evt.pageY};var event=attrs.eventName?attrs.eventName+'-'+evt.type+'-broadcast':evt.type+'-broadcast';$rootScope.$broadcast(event,this.getLocation())}};return api}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/mouse_broadcast/mouse_broadcast.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/custom_event/custom_event.factory.js. */
twc.shared.apps.factory('customEvent',function(){'use strict';return TWC.Events});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/custom_event/custom_event.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/throttled_events/throttle.factory.js. */
twc.shared.apps.factory('throttler',['$q','$window','twcUtil',function($q,$window,twcUtil){var resizeEvent=$q.defer(),scrollEvent=$q.defer();angular.element($window).bind('resize',twcUtil.throttle(function(){resizeEvent.notify()},125));angular.element($window).bind('orientationchange',twcUtil.throttle(function(){resizeEvent.notify()},125));angular.element($window).bind('scroll',twcUtil.debounce(function(){scrollEvent.notify()},250));return{onResize:function(callback,context){resizeEvent.promise.then(null,null,callback)},onScroll:function(callback,context){scrollEvent.promise.then(null,null,callback)}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/throttled_events/throttle.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.promise.js. */
twc.shared.apps.factory('DsxClientPromise',['TwcClass','$injector','$q','twcUtil',function(TwcClass,$injector,$q,twcUtil){return TwcClass.extend({constructor:function(promise){this._promise=promise;this._results={}},$setResults:function(results){twcUtil.extend(this._results,results)},then:function(done,error){var methods=[],self=this;methods.push(done&&function(){return $injector.invoke(done,null,self._results)});methods.push(error&&function(){return error.apply(null,arguments)});return this._promise.then.apply(this._promise,methods)},'catch':function(callback){return this.then(null,callback)},'finally':function(callback){return this._promise['finally'](callback)},addResultsTo:function(obj){var self=this;this._promise.then(function(){twcUtil.extend(obj,self._results)});return this}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.promise.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.utils.js. */
twc.shared.apps.factory('AggregateUtil',['RecordUtil','Set',function(RecordUtil,Set){function getURLAggregations(configs){var urlaggregations=[];angular.forEach(configs,function(config){urlaggregations.push(RecordUtil.getRecordURL(config))});return urlaggregations}
function getCommonPrefix(urlaggregations){var urlParts=[],commonParts=[],minlength=99;angular.forEach(urlaggregations,function(urlaggregation){if(urlaggregation.length<minlength)minlength=urlaggregation.length;angular.forEach(urlaggregation,function(urlpart,idx){urlParts[idx]=urlParts[idx]||new Set();urlParts[idx].add(urlpart)})});for(var idx=0,max_traversal=minlength-1;idx<max_traversal;idx++){var hashSet=urlParts[idx],entries=hashSet.getAll();if(hashSet.hasKey("cms")&&entries.length>1)throw"cms call cannot be aggregated.";if(entries.length!==1)break;commonParts.push(entries[0])};return commonParts}
function getCommonLocID(urlaggregations){var locIDs=new Set();for(var idx=0,len=urlaggregations.length;idx<len;idx++){var urlaggregation=urlaggregations[idx],agglen=urlaggregation.length,lastParam=urlaggregation[agglen-1];if(lastParam&&lastParam.match&&lastParam.match(/^([^:]+):([^:]+):([A-Z]{2})$/)){locIDs.add(lastParam)}else{locIDs=false;break}};var locs=locIDs&&locIDs.getAll();return(locs&&locs.length===1&&urlaggregations.length>1)?locs[0]:false}
function formAggregatedURL(urlaggregations){var commonItemsInRecords=getCommonPrefix(urlaggregations),commonLocID=getCommonLocID(urlaggregations),newAggregations=[];for(var idx=0,length=urlaggregations.length;idx<length;idx++){var cAggregation=urlaggregations[idx];if(commonItemsInRecords.length>0)cAggregation=cAggregation.slice(commonItemsInRecords.length);if(commonLocID)cAggregation=cAggregation.slice(0,cAggregation.length-1);newAggregations.push(cAggregation.join("/"))};return(commonItemsInRecords.length>0?(commonItemsInRecords.join("/")+"/"):"")+("("+newAggregations.join(";")+")")+(commonLocID?("/"+commonLocID):"")};return{getAggregatedURL:function(configs){return formAggregatedURL(getURLAggregations(configs))}}}]).factory('ParamUtil',['twcConfig','twcUtil',function(twcConfig,twcUtil){var dsxclient_config=twcConfig.dsxclient
function parseRecordParam(paramMap,config){var recordConfig=dsxclient_config[config.recordType].recordConfig[config.recordName],returnMap={};if(recordConfig&&'paramFormat'in recordConfig)returnMap=recordConfig.paramFormat(paramMap,twcUtil);return returnMap};return{parseParams:function(configs){var result={};angular.forEach(configs,function(config){if(config.custom_params)result=angular.extend(result,parseRecordParam(config.custom_params,config))});return result}}}]).factory('RecordUtil',['twcConfig','twcUtil',function(twcConfig,twcUtil){var dsxclient_config=twcConfig.dsxclient;return{getRecordURL:function(config){if('url'in config)return config.url.split("/");var recordConfig=dsxclient_config[config.recordType].recordConfig[config.recordName],pathFormat=dsxclient_config[config.recordType].defaultPathFormat;if(recordConfig&&recordConfig.pathFormat)pathFormat=recordConfig.pathFormat;return pathFormat(config,dsxclient_config)},getRecordID:function(config){return("/"+twcUtil.removeDupChar(this.getRecordURL(config).join("/"),'/'))},getUniqueKey:function(config){return("/"+twcUtil.removeDupChar(this.getRecordURL(config).join("/"),'/')+(config.custom_params?("-"+JSON.stringify(config.custom_params)):""))}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.utils.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.cache.js. */
twc.shared.apps.factory('dsxLocalCache',['$window','twcUtil','$log','$timeout','twcConfig','RecordUtil',function($window,twcUtil,$log,$timeout,twcConfig,RecordUtil){var isLocalStorage=false;try{isLocalStorage=!!(('localStorage'in $window)&&$window.localStorage)}catch(err){$log.debug("Unable to access local storage. Going to make calls every time.")};var vars={hasWebStorage:isLocalStorage,webStorage:isLocalStorage?$window.localStorage:{},webStorageMax:twcConfig.dsxclient.cache_size,itemQueue:[],itemMap:{},expirationTime:twcConfig.dsxclient.cache_expiry,timeoutPromise:null,locale:twcConfig.dsxclient.locale,version:3},fns={getStorageKey:function(){return'dsxcache'},deleteItem:function(key){if(key in vars.itemMap){var item=vars.itemMap[key];vars.itemQueue=twcUtil.without(vars.itemQueue,item);delete vars.itemMap[key]}},getUnExpiredRecords:function(items){return twcUtil.filter(items,function(item){return!(fns.isExpired(item))})},storeInMemory:function(key,valueObj){valueObj.cacheKey=key;if(key in vars.itemMap)fns.deleteItem(key);vars.itemMap[key]=valueObj;vars.itemQueue.push(valueObj)},writeToStorage:function(){if(vars.timeoutPromise)vars.timeoutPromise=$timeout.cancel(vars.timeoutPromise)&&false;vars.timeoutPromise=$timeout(function(){var records=fns.getUnExpiredRecords(vars.itemQueue);if(records.length>vars.webStorageMax){var addlItemsLen=(records.length-vars.webStorageMax);records=records.slice(addlItemsLen)};vars.webStorage.setItem(fns.getStorageKey(),angular.toJson({version:vars.version,locale:vars.locale,records:records}))},2e3)},init:function(){if(vars.hasWebStorage)try{var items=vars.webStorage.getItem(fns.getStorageKey()),currentTime=(new Date()).getTime(),itemsObj=items?angular.fromJson(items):{};if(itemsObj.version&&itemsObj.version===vars.version&&itemsObj.locale&&itemsObj.locale===vars.locale){var records=fns.getUnExpiredRecords(itemsObj.records);vars.itemQueue=records;angular.forEach(records,function(item){vars.itemMap[item.cacheKey]=item})};var pageLocId=window.explicit_location,pageLocObj=window.explicit_location_obj,cacheId=RecordUtil.getRecordID({recordType:'wxd',recordName:'loc',fullLocId:pageLocId});if(pageLocId&&pageLocObj&&!(cacheId in vars.itemMap)){var objToPersist={cacheKey:cacheId,timestamp:(((new Date()).getTime())+1e4),doc:pageLocObj,id:cacheId,status:200};vars.itemMap[cacheId]=objToPersist;vars.itemQueue.push(objToPersist)};fns.writeToStorage()}catch(err){$log.debug("Exception while trying to initialize webstorage cache. Resetting it.");vars.webStorage.removeItem(fns.getStorageKey())}},isExpired:function(item){var currentTime=(new Date()).getTime();return(!('timestamp'in item)||item.timestamp<currentTime)},getExpirationTime:function(recordResponse){var currentTime=(new Date()).getTime(),expirationTime=vars.expirationTime;if(recordResponse&&recordResponse.generatedTime&&recordResponse.cacheMaxSeconds&&recordResponse.currentTime){var recordExpiration=recordResponse.cacheMaxSeconds-(recordResponse.currentTime-recordResponse.generatedTime);if(recordExpiration>0&&(recordExpiration<600||(recordResponse.id&&(recordResponse.id.match(/\/loc\//)||recordResponse.id.match(/\/Astro\//)))))expirationTime=recordExpiration};return currentTime+(expirationTime*1e3)}};fns.init();return{isEnabled:function(){return vars.hasWebStorage},add:function(key,value){if(value&&vars.hasWebStorage){fns.storeInMemory(key,angular.extend(value,{timestamp:fns.getExpirationTime(value),lscache:true}));fns.writeToStorage()}},get:function(key){var currentTime=(new Date()).getTime();if((key in vars.itemMap)&&fns.isExpired(vars.itemMap[key]))return null;return vars.itemMap[key]}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.cache.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/httpclient/httpclient.factory.js. */
twc.shared.apps.factory("httpclient",['$http','twcUtil',function($http,twcUtil){var $=angular.element,scriptLoader=(function(){var head=document.head||jQuery("head")[0]||document.documentElement
function _getScript(s,callback,script){script.async=true;if(s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(script.parentNode&&s.remove)script.parentNode.removeChild(script);if(!isAbort)callback(200,"success")}};head.insertBefore(script,head.firstChild);return script};return{cache:{},getScript:function(settings){var url,callback,attrs;if(!angular.isObject(settings))settings={url:arguments[0],callback:arguments[1],attrs:arguments[2]};twcUtil.defaults(settings,{url:'',callback:angular.noop,attrs:{},remove:true});url=settings.url;callback=settings.callback;attrs=settings.attrs;if(this.cache[url]){this.cache[url].done(callback)}else{var deferred=this.cache[url]=$.Deferred();deferred.done(callback);var script=$(document.createElement('script'));script.attr(attrs);_getScript(settings,function(){deferred.resolve()},script[0])}}}})();return{jsonp:function(url,config){return $http.jsonp(url,config)},getScript:function(settings){return scriptLoader.getScript.apply(scriptLoader,arguments)}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/httpclient/httpclient.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/base.model.js. */
twc.shared.apps.factory('ResponseModel',['TwcClass',function(TwcClass){return TwcClass.extend({setResponse:function(response){this.data=response},_get:function(key){return this.data?this.data[key]:''},set:function(map){angular.extend(this.data,map)},construct:function(response,className){this.className=className;this.setResponse(response)}})}]).factory('RecordModel',['ResponseModel',function(ResponseModel){return ResponseModel.extend({setResponse:function(response){var recordDataName=/(.*)Record/.exec(this.recordType)[1]+'Data',recordDataHdr=/(.*)Record/.exec(this.recordType)[1]+'Hdr';this.header=response[recordDataHdr];this.data=response[recordDataName]},getHeader:function(){return this.header},getRecordUpdatedTime:function(alternateKey){var key='_procTmLocal';if(alternateKey)key=alternateKey;return((this.header&&this.header[key])?this.header[key]:'')}})}]).factory('RecordCollection',['ResponseModel',function(ResponseModel){return ResponseModel.extend({setResponse:function(response){this.header=response.header;this.items=response.items},getHeader:function(){return this.header},getItems:function(){return this.items},getRecordUpdatedTime:function(alternateKey){var key='_procTmLocal';if(alternateKey)key=alternateKey;return((this.header&&this.header[key])?this.header[key]:'')}})}]).factory('dsxModelUtils',['pcoUser','$parse',function(pcoUser,$parse){return{getPrecipValue:function(model,key){return pcoUser.getPrecipUnit()==='mm'?(angular.isDefined(model._get('_'+key+'Mm'))?model._get('_'+key+'Mm'):model._get(key)*25.4):model._get(key)},getAccumulationValue:function(model,key){return pcoUser.getAccumulationUnit()==='cm'?(angular.isDefined(model._get('_'+key+'Cm'))?model._get('_'+key+'Cm'):model._get(key)*2.54):model._get(key)},getWindDirectionText:function(model,key,forceEnglish){return!forceEnglish?model._get(key):model._get('_'+key+'_en')},getPrecipFromValue:function(model,key){var metricProperty='data.metric.'+key,imperialProperty='data.imperial.'+key;if(pcoUser.getPrecipUnit()==='mm'){var modelValue=$parse(metricProperty)(model);return angular.isDefined(modelValue)?modelValue:$parse(imperialProperty)(model)*25.4}else return $parse(imperialProperty)(model)}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/base.model.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/promise_pool/promise_pool.factory.js. */
twc.shared.apps.value('PromisePoolStatusCodes',{PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"}).factory('PromisePool',['TwcClass','$q','PromisePoolStatusCodes',function(TwcClass,$q,PromisePoolStatusCodes){return TwcClass.extend({construct:function(){this.data={};this.status={}},getPromise:function(key){this.createDefer(key);return this.data[key].promise},hasDefer:function(key){return(key in this.data)},createDefer:function(key){if(!this.hasDefer(key)){this.data[key]=$q.defer();this.status[key]=PromisePoolStatusCodes.PENDING}},deleteDefer:function(key){delete this.data[key];delete this.status[key]},resolveDefer:function(key,data){if(this.hasDefer(key)){this.data[key].resolve(data);this.status[key]=PromisePoolStatusCodes.RESOLVED}},rejectDefer:function(key,data){if(this.hasDefer(key)){this.data[key].reject(data);this.status[key]=PromisePoolStatusCodes.REJECTED}},getStatus:function(key){return this.status[key]}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/promise_pool/promise_pool.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pagecache/pagecache.factory.js. */
twc.shared.apps.factory('MemCache',['TwcClass',function(TwcClass){return TwcClass.extend({construct:function(){this.data={}},put:function(key,value){this.data[key]=value},hasKey:function(key){return(key in this.data)},get:function(key){return this.data[key]}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/pagecache/pagecache.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.factory.js. */
twc.shared.apps.factory('timeoutHttpIntercept',function(){return{request:function(config){config.timeout=3e4;return config}}}).config(['$httpProvider',function($httpProvider){$httpProvider.interceptors.push('timeoutHttpIntercept')}]).factory('AsyncCallCounter',[function(){return{increment:function(){window.twc.async_calls=(window.twc.async_calls?++window.twc.async_calls:1)},decrement:function(){if(window.twc.async_calls>0)--window.twc.async_calls}}}]).factory("dsxclient",['httpclient','twcConfig','$injector','twcUtil','Set','$log','PromisePool','PromisePoolStatusCodes','$q','RecordUtil','AggregateUtil','ParamUtil','PcoPerf','DsxClientPromise','DsxClientResponse','dsxLocalCache','AsyncCallCounter',function(httpclient,twcConfig,$injector,twcUtil,Set,$log,PromisePool,PromisePoolStatusCodes,$q,RecordUtil,AggregateUtil,ParamUtil,PcoPerf,DsxClientPromise,DsxClientResponse,dsxLocalCache,callCounter){var dsxclient_config=twcConfig.dsxclient,dsxPromisePool=new PromisePool(),MODEL_ERROR_RESPONSE={error:"Invalid response body. Cannot create model"}
function isCacheable(configs){for(var idx=0,len=configs.length;idx<len;idx++){var config=configs[idx];if(('recordType'in config&&'cache'in dsxclient_config[config.recordType]&&dsxclient_config[config.recordType].cache===false)||('recordType'in config&&dsxclient_config[config.recordType]&&dsxclient_config[config.recordType]['recordConfig']&&dsxclient_config[config.recordType]['recordConfig'][config.recordName]&&dsxclient_config[config.recordType]['recordConfig'][config.recordName].cache===false)||('cache'in config&&config.cache===false))return false};return true}
function sortConfigs(newConfigs){return newConfigs.sort(function(config1,config2){if('recordName'in config1&&'recordName'in config2){if(config1.recordName===config2.recordName)return 0;return((config1.recordName<config2.recordName)?-1:1)};return 0})}
function preparePromise(promises,requestConfigs){callCounter.increment();var mainPromise=$q.all(promises),defer=$q.defer(),isLegacy=twcUtil.some(requestConfigs,function(config){return!('$id'in config)}),returnPromise=isLegacy?defer.promise:new DsxClientPromise(mainPromise);mainPromise.then(function(body){var response=body;if(!body||!angular.isArray(body)||!body.length||!angular.isObject(body[0])||!('headers'in body[0])){response={lscache:false,status:200,data:{body:body}}}else if(angular.isArray(body)&&body.length)response=body[0];var dsxResponse=new DsxClientResponse(response,requestConfigs);if(isLegacy){defer.resolve(dsxResponse)}else{var results={};twcUtil.each(requestConfigs,function(ido){if('$id'in ido)results[ido.$id]=dsxResponse.getModel(ido)});results.response=dsxResponse;returnPromise.$setResults(results)}});if(isLegacy)mainPromise['catch'](function(err){defer.reject(err)});returnPromise["finally"](function(){callCounter.decrement()});return returnPromise};return{getURLPath:function(configs){return dsxclient_config.url+AggregateUtil.getAggregatedURL(configs)},getURLParams:function(configs,additionalParams){var custom_params=ParamUtil.parseParams(configs),params=additionalParams;if(!params)params={};angular.extend(params,dsxclient_config.params,custom_params);return params},execute:function(configs,params){var newConfigs=[],promises=[],canCache=dsxclient_config.cache&&isCacheable(configs),cids=[];if(canCache){for(var idx=0,len=configs.length;idx<len;idx++){var config=configs[idx],cid=RecordUtil.getUniqueKey(config),isCached=false,localCachedItem=dsxLocalCache.get(cid);if(localCachedItem&&!dsxPromisePool.hasDefer(cid)){dsxPromisePool.createDefer(cid);dsxPromisePool.resolveDefer(cid,localCachedItem)};if(!localCachedItem&&dsxLocalCache.isEnabled()&&dsxPromisePool.getStatus(cid)===PromisePoolStatusCodes.RESOLVED)dsxPromisePool.deleteDefer(cid);if(dsxPromisePool.hasDefer(cid)){isCached=true;PcoPerf.logDsxCall(cid,true)};if(!isCached)newConfigs.push(config);promises.push(dsxPromisePool.getPromise(cid))};newConfigs=sortConfigs(newConfigs)}else newConfigs=configs;if(newConfigs.length>0){var configChunks=twcUtil.chunk(newConfigs,10),_self=this;angular.forEach(configChunks,function(configChunk){var url=_self.getURLPath(configChunk),_initial=new Date();PcoPerf.logDsxCall("/"+url,false);var newparams=_self.getURLParams(configChunk,params),ajaxPromise=httpclient.jsonp(url,{params:newparams});ajaxPromise.then(function(response){var rawResponseMap={},_final=new Date();PcoPerf.logDsxCall("/"+url,false,(_final.getTime()-_initial.getTime())/1e3);if(response&&response.data&&response.data.body&&angular.isArray(response.data.body)){var responseBody=response.data.body;for(var rcount=0,responselen=responseBody.length;rcount<responselen;rcount++){var recordBody=responseBody[rcount];if('id'in recordBody)rawResponseMap[recordBody.id]=recordBody}};for(var ccount=0,configlen=configChunk.length;ccount<configlen;ccount++){var config=configChunk[ccount],configId=RecordUtil.getRecordID(config),cacheId=RecordUtil.getUniqueKey(config),configResponse=rawResponseMap[configId];if(canCache){dsxLocalCache.add(cacheId,configResponse);dsxPromisePool.resolveDefer(cacheId,configResponse)}}});ajaxPromise['catch'](function(error){if(canCache)for(var count=0;count<configChunk.length;count++){var config=configChunk[count],cid=RecordUtil.getUniqueKey(config);dsxPromisePool.rejectDefer(cid,error)}});if(!canCache)promises.push(ajaxPromise)})};return promises.length?preparePromise(promises,configs):null}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.response.js. */
twc.shared.apps.factory('DsxClientResponse',['TwcModel','$log','twcConfig','twcUtil','$injector','RecordUtil','$parse',function(TwcModel,$log,twcConfig,twcUtil,$injector,RecordUtil,$parse){var dsxclient_config=twcConfig.dsxclient
function getModelObject(recordBody,config){if(!recordBody||!recordBody.id||'error'in recordBody||!(recordBody.doc))return null;var className,recordConfig,recordName="DsxModel";if('recordType'in config&&'recordName'in config){var recordType=config.recordType;recordName=config.recordName;recordConfig=dsxclient_config[recordType].recordConfig[recordName];className=(twcUtil.capitalize(recordType)+twcUtil.capitalize(recordName)+"ModelClass");if(recordConfig&&'model'in recordConfig)className=recordConfig.model};if(config&&'model'in config)className=config.model;var ModelClass=(!!className)&&$injector.has(className)&&$injector.get(className);if(!ModelClass){$log.debug((className?className:"_NULL_")+" not found. Returning RAW response.");className='ResponseModel';ModelClass=$injector.get('ResponseModel').extend({});ModelClass.prototype.recordType=recordName};var models=[],header,data,index,length,defaultModelCreation=true;if(recordConfig&&recordConfig.type&&recordConfig.type==="collection"){if(recordName.indexOf("Record")!==-1||'responseFormat'in recordConfig){defaultModelCreation=false;var recordDataName,recordDataHdr;if(recordConfig.responseFormat){recordDataName=recordConfig.responseFormat.data;recordDataHdr=recordConfig.responseFormat.header}else{recordDataName=/(.*)Record/.exec(recordName)[1]+'Data';recordDataHdr=/(.*)Record/.exec(recordName)[1]+'Hdr'};header=recordBody.doc[recordDataHdr];data=recordBody.doc[recordDataName];if(!data)try{data=$parse(recordDataName)(recordBody.doc)}catch(err){$log.debug("Error trying to parse the record data: ",recordDataName)};for(index=0,length=data.length;index<length;index++){var obj={};obj[recordDataHdr]={};obj[recordDataName]=data[index];models.push(new ModelClass(obj,className))};var CollectionClass=$injector.get('RecordCollection').extend({});CollectionClass.prototype.recordType=recordName;return new CollectionClass({items:models,header:header})}}else if(recordConfig&&recordConfig.type&&recordConfig.type==="array"){defaultModelCreation=false;data=recordBody.doc;if(angular.isArray(data))for(index=0,length=data.length;index<length;index++)models.push(new ModelClass(data[index],className));return models};if(defaultModelCreation)return new ModelClass(recordBody.doc,className)};return TwcModel.extend({construct:function(response,configs){this.attrs=response;this.attrs.responseMap={};this.attrs.rawResponseMap={};this.process(response,configs)},process:function(response,configs){var responseMap=this.get('responseMap'),rawResponseMap=this.get('rawResponseMap');if(response&&response.data&&response.data.body&&angular.isArray(response.data.body)){var responseBody=response.data.body;for(var rcount=0,responselen=responseBody.length;rcount<responselen;rcount++){var recordBody=responseBody[rcount];if(recordBody&&'id'in recordBody)rawResponseMap[recordBody.id]=recordBody}};if(configs&&configs.length>0){var _self=this;angular.forEach(configs,function(config){var configId=RecordUtil.getRecordID(config),cacheId=RecordUtil.getUniqueKey(config);responseMap[cacheId]=rawResponseMap[configId]})}},getModel:function(config){if(angular.isObject(config)){var rawResponse=this._get('responseMap')[RecordUtil.getUniqueKey(config)];return rawResponse?getModelObject(rawResponse,config):null};return null},getLocation:function(locId){return this.getModel({recordType:"wxd",recordName:"loc",fullLocId:locId})}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.response.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/drupal_settings/drupal_settings.factory.js. */
twc.shared.apps.factory('DrupalSettings',['PcoPage',function(PcoPage){'use strict';var settings;return{getArticleUUID:function(){return(window.Drupal&&window.Drupal.settings&&window.Drupal.settings.ct_article&&window.Drupal.settings.ct_article&&window.Drupal.settings.ct_article.article_uuid)},getSettings:function(instanceId){return Drupal.settings.twc.instance[instanceId]},getContexts:function(){return Drupal.settings.twc.contexts},getContextArg:function(contextArg){var contexts=this.getContexts();return contexts.hasOwnProperty(contextArg)?contexts[contextArg].id:false},getLocation:function(settingsObj,contextName){var contexts=Drupal.settings.twc.contexts,attrName=contextName||"twclocation",keyName=settingsObj[attrName],pageLocId=PcoPage.getCurrentLocId();if(contexts){return(contexts[keyName]&&contexts[keyName].is_page_loc&&pageLocId)?{id:pageLocId}:contexts[keyName]}else{settingsObj.id=keyName;return settingsObj}},getLocId:function(settingsObj,contextName){return this.getLocation(settingsObj,contextName).id},getAsset:function(settingsObj){var contexts=Drupal.settings.twc.contexts;if(contexts){return contexts[settingsObj.twcasset]}else{settingsObj.id=settingsObj.twcasset;return settingsObj}},isArticle:function(){return!!Drupal.settings['ct_article']},getModuleByName:function(name){return Drupal.settings.twc.modules&&Drupal.settings.twc.modules[name]},getAssetId:function(settingsObj){return this.getAsset(settingsObj).id},getInstanceIdBySettings:function(settings){return Object.getKey(Drupal.settings.twc.instance,settings)},getInstanceId:function(index){return Object.keys(Drupal.settings.twc.instance)[index]},getPathInfo:function(){var pathItems=window.location.pathname.split("/");return pathItems[pathItems.length-1]}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/drupal_settings/drupal_settings.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.config.js. */
twc.shared.apps.config(['twcConfigProvider',function(twcConfigProvider){twcConfigProvider.add({dsxclient:{cache:true,cache_size:70,cache_expiry:60,locale:TWC.Configs.dsx.locale,url:TWC.Configs.dsx.host,version:"v2",params:{jsonp:"JSON_CALLBACK",api:TWC.Configs.dsx.apiKey},wxd:{records:{astro:'Astro',airportDelay:'ADRecord',observation:'MORecord',dailyForecast:'DFRecord',hourly:'DHRecord',daypart:'DDRecord',dailyInternational:'DIRecord',airQuality:'ESRecord',flightArrival:'FARecord',flu:'FURecord',bulletin:'BERecord',nowcast:'NCRecord',intraday:'IFRecord',index:'IDRecord',interstate:'Interstate',moon:'Moon',lightning:'LGRecord',pastObsAvg:'PastObsAvg',precipitation:'PERecord',pollen:'Pollen',pollenObserved:'PLRecord',hurricaneTracker:'HTRecord',tide:'TIRecord',pollenUk:'UPRecord',hurricaneProjection:'HPRecord',ski:'SKRecord',stormReport:'SRRecord',locFull:'LFRecord',loc:'loc',marine:'WMRecord',wv:'WVRecord',ww:'WWRecord',zipMapping:'ZFRecord',climo:'Climatology',mappoint:'mappoint',wwir:'wwir',hiradff:'HiRadFF',alertStates:'AlertsStates',alertArea:'AlertsArea',alertLocations:'AlertLocations',farmingAlmanac:'FarmingAlmanacRecord',NationalFlu:'NationalFlu',PastFlu:'PastFlu',fifteenDayForecast:'FifteenDayForecast',ObservedPollen:'PLRecord',PastPollen:'PastPollen',PollenHotSpots:'PollenHotSpots'},defaultPathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.fullLocId]},recordConfig:{AlertsStates:{type:'array',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,'alerts','states']}},AlertsArea:{pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,'alerts','area',ido.fullLocId]}},AlertLocations:{pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,'alerts','alertLocations',ido.twcIId]}},FarmingAlmanacRecord:{pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,'FarmingAlmanac',ido.date,ido.fullLocId]}},BERecord:{type:'array'},DDRecord:{type:'collection'},DFRecord:{type:'collection'},DHRecord:{type:'collection',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,'DHRecord',ido.locale||thisConfig.locale,ido.fullLocId]}},PERecord:{type:'collection'},IFRecord:{type:'collection'},DIRecord:{type:'collection'},Pollen:{type:'collection'},PollenHotSpots:{type:'array'},PLRecord:{type:'simple'},IDRecord:{type:'collection',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.indexType||1,ido.fullLocId]}},ESRecord:{type:'collection',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.airQualityType||'F',ido.fullLocId]}},Moon:{type:'array',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.days||1,ido.fullLocId]}},Climatology:{type:'array',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.month+(ido.date?("-"+ido.date):""),ido.count||1,ido.fullLocId]}},PastObsAvg:{type:'array',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.date,ido.numOfDays||1,ido.fullLocId]}},mappoint:{type:'array',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.key]}},HiRadFF:{type:'collection',model:'WxdHiRadFFModelClass',responseFormat:{data:"HiRadFFData",header:"HiRadFFHdr"},pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.fullLocId]}},Astro:{type:'collection',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.date,ido.numOfDays||1,ido.fullLocId]}},NationalFlu:{type:'collection',pathFormat:function(ido,thisConfig){if(ido.date){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.date]}else return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale]}},PastFlu:{type:'collection,',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.state]}},FifteenDayForecast:{type:'collection',model:'WxdFifteenDayForecastModelClass',responseFormat:{data:"fcstdaily15alluoms.forecasts",header:"metadata"},pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName?'15DayForecast':'',ido.locale||thisConfig.locale,ido.fullLocId]}},PastPollen:{type:'collection',pathFormat:function(ido,thisConfig){return['wxd',ido.version||thisConfig.version,ido.recordName,ido.locale||thisConfig.locale,ido.date,ido.numOfDays||1,ido.fullLocId]}}}},q:{recordConfig:{loc:{type:'array',pathFormat:function(ido,thisConfig){var regions=[];if(ido.country&&ido.region&&ido.key){regions.push(ido.country,ido.region,ido.key)}else{if(ido.locType)regions.push(ido.locType);regions.push(ido.key)};return['q',ido.version||thisConfig.version,'loc',ido.locale||thisConfig.locale].concat(regions)}},"loc.near":{type:'collection',model:'QLocModelClass',pathFormat:function(ido,thisConfig){return['q',ido.version||thisConfig.version,'loc.near',ido.locale||thisConfig.locale,ido.locType,ido.zoom,ido.lat+','+ido.lon]}}}},survey:{recordConfig:{getEverything:{type:'collection',pathFormat:function(ido,thisConfig){return['v1'||thisConfig.version,'survey']}},getTemplate:{type:'collection',pathFormat:function(ido,thisConfig){return['v1'||thisConfig.version,'survey','template']}},getResults:{type:'collection',pathFormat:function(ido,thisConfig){return['v1'||thisConfig.version,'survey','results']}},setResults:{type:'collection',pathFormat:function(ido,thisConfig){return['v1'||thisConfig.version,'survey','results']}}}},cms:{defaultPathFormat:function(ido){return["cms","assets"]},recordConfig:{a:{type:'array',transformParamMap:{DMA:"tags.geo.DMA",wxlow:"tags.wx.low",wxhigh:"tags.wx.high",keyword:"tags.keyword",city:"tags.geo.city",state:"tags.geo.state",loc:"tags.loc"},transformParam:function(param,val,cond){return(param+":$"+cond+"("+val+")")},paramFormat:function(paramMap){var result={};if(paramMap.query){var queries=paramMap.query,qparams=[];for(var idx=0,len=queries.length;idx<len;idx++){var query=queries[idx],subqparams=[],_self=this;for(var key in query)if(query.hasOwnProperty(key)){var rawValue=query[key],keyparts=key.split("|"),cond=(keyparts.length>1?keyparts[1]:'in');key=keyparts[0];var valueStr='';if(angular.isArray(rawValue)){var value=rawValue.slice(0);for(var counter=0,vlen=value.length;counter<vlen;counter++)value[counter]=("'"+value[counter]+"'");valueStr=value.join(",")}else valueStr="'"+rawValue+"'";subqparams.push(_self.transformParam((_self.transformParamMap[key]?_self.transformParamMap[key]:key),valueStr,cond))};qparams.push(subqparams.join(";"))};if(qparams.length>0)result.q=qparams};if(typeof paramMap.start!=='undefined'&&typeof paramMap.end!=='undefined'){result.pg=paramMap.start+","+paramMap.end}else result.pg="0,10";return result}},aidQ:{model:"CmsAModelClass",pathFormat:function(ido){return['cms','a',ido.assetId]}},videoAssetWithColl:{model:"VideoAssetModelClass",pathFormat:function(ido){return['cms','asset-collection',ido.assetId]}},ugcAssetWithColl:{model:"UGCAssetModelClass",pathFormat:function(ido){return['cms','asset-collection',ido.assetId]}},ugc:{model:"UGCAssetModelClass",pathFormat:function(ido){return['cms','a',ido.assetId]}},video:{model:"VideoAssetModelClass",pathFormat:function(ido){return['cms','a',ido.assetId]}},slideshow:{model:"CmsAModelClass",pathFormat:function(ido){return['cms','assets','slideshow',ido.assetId,(ido.startIndex||0)+','+(ido.count||50)]}},nextarticle:{model:"CmsNextArticleModelClass",pathFormat:function(ido){return['cms','nextArticle',ido.assetId]}},collections:{pathFormat:function(ido){return['cms','collections',ido.path]}},adDataServer:{model:"CmsAdDataServerPoiClass",type:"array",pathFormat:function(ido){return['cms','AdDataServer','poi',ido.sponsorId,ido.tileId]}},BreakingNow:{pathFormat:function(ido,thisConfig){return['cms',ido.version||thisConfig.version,"settings/breakingnow"]}},AssetList:{model:"CmsAssetListModelClass",type:"array",pathFormat:function(ido,thisConfig){return['cms',ido.version||thisConfig.version,'asset-list',ido.listName,((ido.startIndex||0)+','+(ido.count||20))]}},orderedlist:{pathFormat:function(ido,thisConfig){return['cms',"orderedlist/video",ido.path]}},playlist:{model:'VideoAssetModelClass',type:'array',pathFormat:function(ido,thisConfig){return['cms',"orderedlist/video",ido.path]}},affiliateVideos:{pathFormat:function(ido,thisConfig){return["cms",ido.version||thisConfig.version,"dma",ido.dma]}}}},cs:{recordConfig:{datetime:{pathFormat:function(ido,thisConfig){return['cs',ido.version||thisConfig.version,'datetime',ido.locale||thisConfig.locale,ido.fullLocId]}}}},maps:{records:{series:'series',radar:'radar',rwi:'rwi',hiradClouds:'hirad_clouds',hiradTemp:'hirad_temp',hiradWindSpeed:'hirad_windSpeed',hiradUV:'hirad_UV'},recordConfig:{series:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series']}},radar:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series/radar']}},rwi:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series/rwi']}},hirad_clouds:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series/hirad_clouds']}},hirad_temp:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series/hirad_temp']}},hirad_windSpeed:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series/hirad_windSpeed']}},hirad_UV:{pathFormat:function(ido,thisConfig){return['maps',ido.version||thisConfig.version,'i/series/hirad_UV']}}}},xweb:{records:{webdailyForecast:'WebDFRecord',webhourly:'WebDHRecord',loc:'loc',webLoc:'WebLoc',commuter:'CommutercastRecord',social:'social',photos:'photos',titanDaily:'TitanDaily'},recordConfig:{WebDFRecord:{type:'collection',pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'web/WebDFRecord',ido.locale||thisConfig.locale,ido.fullLocId]}},TitanDaily:{type:'collection',model:"XwebWebDFRecordModelClass",responseFormat:{data:"WebDFData",header:"WebDFHdr"},pathFormat:function(ido,thisConfig){return['x-web',ido.version||thisConfig.version,'titan-daily',ido.locale||thisConfig.locale,ido.fullLocId]}},CommutercastRecord:{pathFormat:function(ido,thisConfig){return['x-web',ido.version||thisConfig.version,'commutercast',ido.locale||thisConfig.locale,ido.hourIndex,ido.fullLocId]}},WebDHRecord:{type:'collection',pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'web/WebDHRecord',ido.locale||thisConfig.locale,ido.fullLocId]}},social:{pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'social',ido.path]}},photos:{model:'XwebPhotosModelClass',type:'array',pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'social',ido.path,[ido.pageStart,ido.pageEnd].join(',')]}},WebLoc:{cache:false,type:'array',pathFormat:function(ido,thisConfig){var path=[];if(ido.proximity){path=['x',ido.version||thisConfig.version,'web/loc.near',ido.locType,ido.zoom,ido.lat+','+ido.lon]}else{path=['x',ido.version||thisConfig.version,'web/loc',ido.locale||thisConfig.locale];if(ido.locTypes)if(angular.isArray(ido.locTypes)){path.push.apply(path,ido.locTypes)}else path.push(ido.locTypes);if(ido.country)if(ido.country.code){path.push(ido.country.code+(ido.country.boost?'^':''))}else path.push(ido.country);if(ido.region)path.push(ido.region);if(ido.term)path.push(ido.term)};return path}},WebLocNear:{type:'array',pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'web/loc.near',ido.locale||thisConfig.locale,ido.locType,ido.zoom,ido.lat+','+ido.lon]}},loc:{type:'array',pathFormat:function(ido,thisConfig){var regions=[];if(ido.locType)regions.push(ido.locType);regions.push(ido.key);return['x',ido.version||thisConfig.version,'web','loc',ido.locale||thisConfig.locale].concat(regions)}}}},xmweb:{records:{mwebdailyForecast:'MWebDFRecord'},recordConfig:{MWebDFRecord:{type:'collection',pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'mweb/MWebDFRecord',ido.locale||thisConfig.locale,ido.fullLocId]}}}},u:{records:{user:'user'},recordConfig:{user:{model:'UUserIdModelClass',pathFormat:function(ido,thisConfig){return['u',ido.version||thisConfig.version,ido.userId]}}}},xreboot:{records:{bulletin:'BERecord'},recordConfig:{BERecord:{type:'array',pathFormat:function(ido,thisConfig){return['x',ido.version||thisConfig.version,'reboot',ido.recordName,ido.fullLocId]}}}}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/dsxclient.config.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.pollen.js. */
twc.shared.apps.factory('WxdPollenModelClass',['RecordModel','twcUtil','WxdPollenRecordModelClass',function(RecordModel,twcUtil,WxdPollenRecordModelClass){return RecordModel.extend({recordType:'Pollen',construct:function(){this.pollenAlerts={tree:[],grass:[],weed:[],mold:0};RecordModel.prototype.construct.apply(this,arguments)},setResponse:function(response){this._mapPollenRecords(response,'tree',this.pollenAlerts);this._mapPollenRecords(response,'grass',this.pollenAlerts);this._mapPollenRecords(response,'weed',this.pollenAlerts);this._mapPollenRecords(response,'mold',this.pollenAlerts)},_mapPollenRecords:function(response,type,pollenAlerts){if(twcUtil.isObject(response[type])||twcUtil.isArray(response[type])){twcUtil.each(response[type],function(pollenRecord){pollenRecord.type=type;pollenAlerts[type].push(new WxdPollenRecordModelClass(pollenRecord))})}else if(twcUtil.isString(response[type])||twcUtil.isNumber(response[type]))pollenAlerts[type]=new WxdPollenRecordModelClass(response[type])},getPollenRecords:function(type){return this.pollenAlerts[type]}})}]).factory('WxdPollenRecordModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({setResponse:function(response){this.data=response},getType:function(){return this._get('type')},getSeverity:function(){return this._get('idxPrt1')},getSeverityDescription:function(){return this._get('idxPhr1')},getLocalTime:function(){return this._get('idxLocTm')},getGMTTime:function(){return this._get('idxGMTTm')},getSpecies:function(){return this._get('idxAux2')}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.pollen.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.alertsarea.js. */
twc.shared.apps.factory('WxdAlertsAreaModelClass',['RecordModel','WxdBERecordModelClass',function(RecordModel,WxdBERecordModelClass){return RecordModel.extend({construct:function(){RecordModel.prototype.construct.apply(this,arguments)},setResponse:function(response){this.location=response.AreaAlertsHdr;this.otherAlerts=[];this.alerts=[];this._mapRecords(response.TargetAlerts,this.alerts);this._mapRecords(response.OtherAlerts,this.otherAlerts)},_mapRecords:function(targetAlerts,alertsRecord){for(var i=0;i<targetAlerts.length;i++)alertsRecord.push(new WxdBERecordModelClass(targetAlerts[i]))}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.alertsarea.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.alertlocations.js. */
twc.shared.apps.factory('WxdAlertLocationsModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({setResponse:function(response){this.locations=response.AlertLocations},getStateCode:function(){return this._get('bSt')},getAffectedLocations:function(){return this.locations._get('bLoc')}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.alertlocations.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/ui_tooltip/vendor/ui-bootstrap-tooltip-tpls-0.12.0.js. */
angular.module('ui.bootstrap.tooltip',['ui.bootstrap.position','ui.bootstrap.bindHtml']).provider('$tooltip',function(){var defaultOptions={placement:'top',animation:true,popupDelay:0},triggerMap={mouseenter:'mouseleave',click:'click',focus:'blur'},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){angular.extend(triggerMap,triggers)}
function snake_case(name){var regexp=/[A-Z]/g,separator='-';return name.replace(regexp,function(letter,pos){return(pos?separator:'')+letter.toLowerCase()})};this.$get=['$window','$compile','$timeout','$document','$position','$interpolate',function($window,$compile,$timeout,$document,$position,$interpolate){return function $tooltip(type,prefix,defaultTriggerShow){var options=angular.extend({},defaultOptions,globalOptions)
function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow,hide=triggerMap[show]||show;return{show:show,hide:hide}};var directiveName=snake_case(type),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template='<div '+directiveName+'-popup title="'+startSym+'title'+endSym+'" content="'+startSym+'content'+endSym+'" placement="'+startSym+'placement'+endSym+'" animation="animation" is-open="isOpen"></div>';return{restrict:'EA',compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs){var tooltip,tooltipLinkedScope,transitionTimeout,popupTimeout,appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:false,triggers=getTriggers(undefined),hasEnableExp=angular.isDefined(attrs[prefix+'Enable']),ttScope=scope.$new(true),positionTooltip=function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttPosition.top+='px';ttPosition.left+='px';tooltip.css(ttPosition)};ttScope.isOpen=false
function toggleTooltipBind(){if(!ttScope.isOpen){showTooltipBind()}else hideTooltipBind()}
function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+'Enable']))return;prepareTooltip();if(ttScope.popupDelay){if(!popupTimeout){popupTimeout=$timeout(show,ttScope.popupDelay,false);popupTimeout.then(function(reposition){reposition()})}}else show()()}
function hideTooltipBind(){scope.$apply(function(){hide()})}
function show(){popupTimeout=null;if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null};if(!ttScope.content)return angular.noop;createTooltip();tooltip.css({top:0,left:0,display:'block'});if(appendToBody){$document.find('body').append(tooltip)}else element.after(tooltip);positionTooltip();ttScope.isOpen=true;ttScope.$digest();return positionTooltip}
function hide(){ttScope.isOpen=false;$timeout.cancel(popupTimeout);popupTimeout=null;if(ttScope.animation){if(!transitionTimeout)transitionTimeout=$timeout(removeTooltip,500)}else removeTooltip()}
function createTooltip(){if(tooltip)removeTooltip();tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,angular.noop)}
function removeTooltip(){transitionTimeout=null;if(tooltip){tooltip.remove();tooltip=null};if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}
function prepareTooltip(){prepPlacement();prepPopupDelay()};attrs.$observe(type,function(val){ttScope.content=val;if(!val&&ttScope.isOpen)hide()});attrs.$observe(prefix+'Title',function(val){ttScope.title=val})
function prepPlacement(){var val=attrs[prefix+'Placement'];ttScope.placement=angular.isDefined(val)?val:options.placement}
function prepPopupDelay(){var val=attrs[prefix+'PopupDelay'],delay=parseInt(val,10);ttScope.popupDelay=!isNaN(delay)?delay:options.popupDelay};var unregisterTriggers=function(){element.unbind(triggers.show,showTooltipBind);element.unbind(triggers.hide,hideTooltipBind)}
function prepTriggers(){var val=attrs[prefix+'Trigger'];unregisterTriggers();triggers=getTriggers(val);if(triggers.show===triggers.hide){element.bind(triggers.show,toggleTooltipBind)}else{element.bind(triggers.show,showTooltipBind);element.bind(triggers.hide,hideTooltipBind)}};prepTriggers();var animation=scope.$eval(attrs[prefix+'Animation']);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+'AppendToBody']);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;if(appendToBody)scope.$on('$locationChangeSuccess',function closeTooltipOnLocationChangeSuccess(){if(ttScope.isOpen)hide()});scope.$on('$destroy',function onDestroyTooltip(){$timeout.cancel(transitionTimeout);$timeout.cancel(popupTimeout);unregisterTriggers();removeTooltip();ttScope=null})}}}}}]}).directive('tooltipPopup',function(){return{restrict:'EA',replace:true,scope:{content:'@',placement:'@',animation:'&',isOpen:'&'},templateUrl:'template/tooltip/tooltip-popup.html'}}).directive('tooltip',['$tooltip',function($tooltip){return $tooltip('tooltip','tooltip','mouseenter')}]).directive('tooltipHtmlUnsafePopup',function(){return{restrict:'EA',replace:true,scope:{content:'@',placement:'@',animation:'&',isOpen:'&'},templateUrl:'template/tooltip/tooltip-html-unsafe-popup.html'}}).directive('tooltipHtmlUnsafe',['$tooltip',function($tooltip){return $tooltip('tooltipHtmlUnsafe','tooltip','mouseenter')}]);angular.module('ui.bootstrap.position',[]).factory('$position',['$document','$window',function($document,$window){function getStyle(el,cssprop){if(el.currentStyle){return el.currentStyle[cssprop]}else if($window.getComputedStyle)return $window.getComputedStyle(el)[cssprop];return el.style[cssprop]}
function isStaticPositioned(element){return(getStyle(element,'position')||'static')==='static'};var parentOffsetEl=function(element){var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;while(offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent))offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);if(offsetParentEl!=$document[0]){offsetParentBCR=this.offset(angular.element(offsetParentEl));offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop;offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft};var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop('offsetWidth'),height:boundingClientRect.height||element.prop('offsetHeight'),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop('offsetWidth'),height:boundingClientRect.height||element.prop('offsetHeight'),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var positionStrParts=positionStr.split('-'),pos0=positionStrParts[0],pos1=positionStrParts[1]||'center',hostElPos,targetElWidth,targetElHeight,targetElPos;hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl);targetElWidth=targetEl.prop('offsetWidth');targetElHeight=targetEl.prop('offsetHeight');var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}},shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case'right':targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case'left':targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case'bottom':targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()};break};return targetElPos}}}]);angular.module('ui.bootstrap.bindHtml',[]).directive('bindHtmlUnsafe',function(){return function(scope,element,attr){element.addClass('ng-binding').data('$binding',attr.bindHtmlUnsafe);scope.$watch(attr.bindHtmlUnsafe,function bindHtmlUnsafeWatchAction(value){element.html(value||'')})}});angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html","<div class=\"tooltip {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n  <div class=\"tooltip-arrow\"></div>\n  <div class=\"tooltip-inner\" bind-html-unsafe=\"content\"></div>\n</div>\n")}]);angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html","<div class=\"tooltip {{placement}}\" ng-class=\"{ in: isOpen(), fade: animation() }\">\n  <div class=\"tooltip-arrow\"></div>\n  <div class=\"tooltip-inner\" ng-bind=\"content\"></div>\n</div>\n")}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/ui_tooltip/vendor/ui-bootstrap-tooltip-tpls-0.12.0.js. */
(function() {
  twc.shared = twc.shared || {};
  twc.shared.apps = twc.shared.apps || angular.module("shared",[]);

  angular.module("ui.bootstrap.tooltip.tpls", ["template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html"]);
  angular.module("ui.tooltip", ["ui.bootstrap.tooltip.tpls","ui.bootstrap.tooltip"]);
  twc.shared.apps.config(['$tooltipProvider', function($tooltipProvider) {
    $tooltipProvider.options({appendToBody: true});
  }]);

  twc.shared.apps.requires.push('ui.tooltip');

})();;/**/
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wxicon/wxicon.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.directive('wxicon',['twcUtil','wxiconFactory',function(twcUtil,wxiconFactory){var wxIconDefinition={priority:0,replace:false,template:'<div class="svg-icon"><img/></div>',scope:{skyCode:'='},restrict:'EA',link:function($scope,$element){$element.addClass("wx-weather-icon");$scope.$watch('skyCode',function(){var img=angular.element('<img/>');img.attr('src',wxiconFactory.getIconUrl($scope.skyCode));img.attr('aria-hidden','true');img.attr('alt','Weather Condition Icon');$element.find('img').replaceWith(img)})}};return wxIconDefinition}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wxicon/wxicon.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wxicon/wxicon.factory.js. */
twc.shared.apps.factory('wxiconFactory',['twcUtil',function(twcUtil){var config={basePath:'/sites/all/modules/custom/angularmods/app/shared/wxicon/',pngPath:'png/',svgPath:'svg/',svgzPath:'svgz/',allowSVG:true,useSVGz:true};config.useSVG=config.allowSVG&&Modernizr.svg;var iconCodeMap={tornado:['0','00'],'tropical-storm':['1','01','2','02'],thunderstorm:['3','03','4','04'],'rain-snow':['5','05','7','07'],'rain-hail':['6','06','10','35'],'freezing-drizzle':['8','08'],'scattered-showers':['9','09','11','39'],rain:['12'],flurries:['13'],snow:['14','16'],'blowing-snow':['15','25'],hail:['17','18'],fog:['19','20','21','22'],wind:['23','24'],cloudy:['26'],'mostly-cloudy-night':['27'],'mostly-cloudy':['28'],'partly-cloudy-night':['29'],'partly-cloudy':['30'],'clear-night':['31'],sunny:['32','36'],'mostly-clear-night':['33'],'mostly-sunny':['34'],'isolated-thunderstorms':['37'],'scattered-thunderstorms':['38'],'heavy-rain':['40'],'scattered-snow':['41'],'heavy-snow':['42','43'],na:['-','44','na'],'scattered-showers-night':['45'],'scattered-snow-night':['46'],'scattered-thunderstorms-night':['47']}
function getImageType(forcePNG){return config.useSVG&&!forcePNG?(config.useSVGz?'.svgz':'.svg'):'.png'}
function getImagePath(forcePNG){var iconPath=config.useSVG&&!forcePNG?(config.useSVGz?config.svgzPath:config.svgPath):config.pngPath;return config.basePath+iconPath};return{getIconName:function(skyCode){var iconName;if(twcUtil.isNumeric(skyCode)&&skyCode>=0&&skyCode<=47){var keys=twcUtil.keys(iconCodeMap);twcUtil.each(keys,function(key){if(twcUtil.indexOf(iconCodeMap[key],skyCode.toString())!==-1)iconName=key})}else iconName='na';return iconName},getIconUrl:function(skyCode,forcePNG){return getImagePath(forcePNG)+this.getIconName(skyCode)+getImageType(forcePNG)+'?1'}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wxicon/wxicon.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_content.app.js. */
twc.hp_dl_content=twc.hp_dl_content||{};twc.hp_dl_content.app=twc.hp_dl_content.app||angular.module('hp_dl_content',['ngSanitize']);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_content.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/xweb.webloc.js. */
twc.shared.apps.factory('XwebWebLocModelClass',['RecordModel','twcUtil','twcConstant',function(RecordModel,twcUtil,twcConstant){return RecordModel.extend({recordType:'WebLoc',isCacheable:false,setResponse:function(response){this.data=response;this.header="NA"},getFormattedName:function(isMobile,longRc){var locTypes=twcConstant.locTypes,types=[locTypes.Airports,locTypes.Ski,locTypes.Golf,locTypes.Lakes,locTypes.Outdoor,locTypes.Parks],country=this.getCountryCode()==='US'&&this.getLocType()===1||this.getCountryCode()!=='US'?twcUtil.capitalize(this._get('_country'),true):'',regionName=this.getStateCode().length>0?country.length>0?twcUtil.capitalize(this.getState(),true,true)+', ':twcUtil.capitalize(this.getState(),true,true):'',region=longRc?regionName+country:this._get('stCd'),presName=twcUtil.capitalize(this.getCity(),true,true),name3=types.indexOf(this.getLocType())>=0&&this.getParentCity()?this.getParentCity()+', ':'',name1=this.getCity()+', '+name3+region,zip=this.getLocId(),zipSearch=this.getLocType()===locTypes.Zips&&(twcUtil.isNumeric(zip)||this.getCountryCode()!=='US')?' ('+zip+')':'',name,name2;if(TWC&&TWC.Titan&&TWC.Titan.locale){name2=regionName.length>0?presName+(this._get('stCd')!==''&&this._get('stCd')!=='*'?', '+this._get('stCd'):''):presName;name=this.getCountryCode()==='US'?name1+zipSearch:twcUtil.capitalize(name2+(zipSearch.length>0?" "+zipSearch:""),false)+', '+country}else{name2=regionName.length>0?presName+', '+name3+this._get('stNm'):presName;name=this.getCountryCode()==='US'?name1+zipSearch:twcUtil.capitalize(name2,true,true)+', '+country};return name},isBigCity:function(){return this._get('bigCity')},getCityName:function(){return this._get('cityNm')},getNickname:function(){return this._get('nickname')},getCountryCode:function(){return this._get('cntryCd')},getKey:function(){return this._get('key')},getCountryName:function(){return this._get('_country')},getLocId:function(){return this._get('locId')},getLocType:function(){return this._get('locType')},getPresName:function(){return this._get('prsntNm')},getRegionCode:function(){return this._get('stCd')},getRegionName:function(){return this._get('stNm')},getStateName:function(){return this.getRegionName()},getStateCode:function(){return this._get('stCd')?this._get('stCd'):''},getParentCity:function(){return this._get('parentCity')},getState:function(){return this._get('stNm')?this._get('stNm'):''},getCity:function(){return this._get('cityNm')},getCountry:function(){return this._get('_country')},getAddress:function(){return this._get('addr')},getZipCode:function(){var locId=this.getKey(),zip=locId.match(/(\d{5}):4:/);return zip&&zip[1]||""}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/xweb.webloc.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/delivery_units/delivery_units.app.js. */
twc.delivery_units=twc.delivery_units||{};twc.delivery_units.app=twc.delivery_units.app||angular.module('delivery_units',['ngSanitize']);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/delivery_units/delivery_units.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.loc.js. */
twc.shared.apps.factory('WxdLocModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({recordType:'loc',setResponse:function(response){this.data=response;this.header="NA"},toSavedLocation:function(savedLocation){var savedLocData=angular.copy(this.data);return savedLocation.fromDto(savedLocData)},getFullLocId:function(){return this._get('locId')+':'+this._get('locType')+':'+this._get('cntryCd')},getLocType:function(){return this._get('locType')},getLocId:function(){return this._get('locId')},getCountryCode:function(){return this._get('cntryCd')},getPresName:function(){return this._get('prsntNm')},getLatitude:function(){return this._get('lat')},getLongitude:function(){return this._get('long')},getTimezoneAbbrev:function(){return this._get('tmZnAbbr')},getGmtDiff:function(){return this._get('gmtDiff')},getZipCode:function(){return this._get('zipCd')},getGMTOffset:function(){return this._get('gmtDiff')},getStateCode:function(){return this._get('stCd')},getStateName:function(){return this._get('stNm')},getState:function(){return this._get('stNm')},getCountry:function(){return this._get("_country")},getDaylightSavingsIndicator:function(){return this._get("dySTInd")},getDaylightSavingsActive:function(){return this._get("dySTAct")},getRegion:function(){return this._get('regSat')},getCity:function(){return this._get('cityNm')},getClsRad:function(){return this._get('clsRad')},getDmaCode:function(){return this._get('dmaCd')}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.loc.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.morecord.js. */
twc.shared.apps.factory('WxdMORecordModelClass',['RecordModel','$injector','dsxModelUtils',function(RecordModel,$injector,dsxModelUtils){var pcoUser=$injector.get('pcoUser');return RecordModel.extend({recordType:'MORecord',getTemp:function(unit){unit=unit||this.getUser().getTempUnit();return this._get('tmp'+unit)},getTempUnit:function(){return this.getUser().getTempUnit()},getUser:function(){return pcoUser},getDayNight:function(){return this._get('dyNght')},getWeatherDescription:function(){return this._get('wx')},getSkyCode:function(){return this._get('sky')},getSkyCodeExtended:function(){return this._get('iconExt')},getObsDate:function(){return this._get('locObsDay')},getObsTime:function(){return this._get('locObsTm')},getObsGmt:function(){return this._get('obsTmGmt')},getFeelsLike:function(){return this._get('flsLkIdx'+this.getUser().getTempUnit())},getTodayHi:function(){return this._get('tmpMx24'+this.getUser().getTempUnit())},getTodayLo:function(){return this._get('tmpMn24'+this.getUser().getTempUnit())},getPrecip24:function(){return dsxModelUtils.getPrecipValue(this,'prcp24')},getPrecip3_6:function(){return dsxModelUtils.getPrecipValue(this,'prcp3_6hr')},getPrecipHour:function(){return dsxModelUtils.getPrecipValue(this,'prcpHr')},getPrecipLast7Days:function(){return dsxModelUtils.getPrecipValue(this,'prcp7Dy')},getPrecipMonth:function(){return dsxModelUtils.getPrecipValue(this,'prcpMTD')},getPrecipYear:function(){return dsxModelUtils.getPrecipValue(this,'prcpYr')},getSnowDepth:function(){return dsxModelUtils.getAccumulationValue(this,'snwDep')},getSnowIncrease:function(){return dsxModelUtils.getAccumulationValue(this,'snwIncr')},getSnowTotal:function(){return dsxModelUtils.getAccumulationValue(this,'snwTot')},getSnowMTD:function(){return dsxModelUtils.getAccumulationValue(this,'snwMTD')},getSnowSeason:function(){return dsxModelUtils.getAccumulationValue(this,'snwSsn')},getSnowByYear:function(){return dsxModelUtils.getAccumulationValue(this,'snwYr')},getSunrise:function(){return this._get('sunrise')},getSunset:function(){return this._get('sunset')},getSunriseISO:function(){return this._get('sunriseISO')},getSunsetISO:function(){return this._get('sunsetISO')},getSunriseISOLocal:function(){return this._get('_sunriseISOLocal')},getSunsetISOLocal:function(){return this._get('_sunsetISOLocal')},getWindDirection:function(){return this._get('wDirAsc')},getWindDirectionDegrees:function(){return this._get('wDir')},getWindGust:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB")return this._get('wGstM');return this._get('wGst'+this.getUser().getSpeedUnit())},getWindSpeed:function(){var pLocale=TWC&&TWC.Titan&&TWC.Titan.locale;if(pLocale&&pLocale==="en_GB")return this._get('wSpdM');return this._get('wSpd'+this.getUser().getSpeedUnit())},getHumidity:function(){return this._get('rH')},getUVIndex:function(){return this._get('uvIdx')},getUVDescription:function(){return this._get('uvDes')},getBarometricText:function(){return this._get('baroTrndAsc')},getBarometric:function(){return this._get('')},getCeiling:function(){var unit=this.getUser().getSpeedUnit();return this._get('ceil'+unit==='M'?unit:'')},getClouds:function(){return this._get('clds')},getDewPoint:function(){return this._get('dwpt'+this.getUser().getTempUnit())},getHeatIndex:function(){return this._get('hI'+this.getUser().getTempUnit())},getPressure:function(){var unit=this.getUser().getPressureUnit();return(unit==='mb'?this._get('pres'):this._get('alt'))},getPressureChange:function(){return this._get('presChnge')},getVisibility:function(){return this._get('vis'+this.getUser().getSpeedUnit())},getWindChill:function(){return this._get('wC'+this.getUser().getTempUnit())},getQualifierSeverity:function(){return this._get('qulfrSvrty')},getQualifierPhrase:function(){return this._get('_extendedQulfrPhrase')},getLocalObsTime:function(){return this._get('_obsDateLocalTimeISO')}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/wxd.morecord.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.breakingnow.js. */
twc.shared.apps.factory('CmsBreakingNowModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({recordType:'CmsBreakingNowModelClass',getTitle:function(){return this._get('title')},getHeadLine:function(){return this._get('headline')},getLinkUrl:function(){return this._get('link_url')},getColor:function(){return this._get('color')},getShare:function(){return this._get('share')},getShareType:function(){return this.getShare().type},getLocations:function(){return this.getShare().locations},setResponse:function(response){this.data=response;this.header="NA"}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.breakingnow.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.affiliatevideos.js. */
twc.shared.apps.factory('CmsAffiliateVideosModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({recordType:'CmsAffiliateVideosModelClass',setResponse:function(response){this.data=response},getAssets:function(){return this._get("assets")},getNetwork:function(){return this._get("network")},getCollection:function(){return this._get('collection')}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.affiliatevideos.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsx_date/dsx_date.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module("shared",[]);twc.shared.apps.directive('dsxdate',['$rootScope','datefactory',function($rootScope,datefactory){var directoryDefinition={priority:0,replace:true,template:'<span class="wx-dsxdate" ng-bind="dsxDateOutput"></span>',scope:true,restrict:'EA',link:function($scope,$element,$attrs){$scope.dsxDateOutput='';var expsToWatch={date:$attrs.date,time:$attrs.time,datetime:$attrs.datetime,timezone:$attrs.timezone,placeholder:$attrs.placeholder,format:$attrs.format},data={};angular.forEach(expsToWatch,function(expToWatch,key){$scope.$watch(expToWatch,function(val){data[key]=val})});$scope.$watch(function(){return data},function(){if(data.datetime||data.date||data.time){var dateObj;if(data.datetime){dateObj=datefactory['new'](data.datetime,data.timezone)}else dateObj=datefactory['new'](data.date,data.time,data.timezone);if(dateObj){var formattedDate=dateObj.format(data.format);if(formattedDate)$scope.dsxDateOutput=formattedDate}}else $scope.dsxDateOutput=angular.isDefined(data.placeholder)?data.placeholder:datefactory['new']('',data.timezone).format(data.format)},true)}};return directoryDefinition}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsx_date/dsx_date.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.a.js. */
twc.shared.apps.factory('CmsAModelClass',['RecordModel',function(RecordModel){return RecordModel.extend({recordType:'a',setResponse:function(response){this.data=response;this.header="NA"},getId:function(){return this._get('id')},getType:function(){return this._get('type')},getTitle:function(teaserFlag){return(teaserFlag&&this._get('teaserTitle'))||this._get('title')},setTitle:function(overrideTitle){if(overrideTitle)this.set({title:overrideTitle})},setPlaylistUrl:function(playlist){var url=this._get("url");if(playlist&&url&&url.indexOf("pl=")===-1){var hasQuestionMark=url.indexOf("?")!==-1;this.set({playlisturl:url+(hasQuestionMark?"&":"?")+"pl="+playlist})}},getMediaUrl:function(){return(this._get("playlisturl")||this._get("url"))},getAssets:function(){return this._get('assets')},getPrimaryCollectionId:function(){return this._get('pcollid')},getDuration:function(){return this._get('duration')},getSEOUrl:function(){return this._get('seourl')},getDescription:function(){return this._get('description')},getPublishDate:function(){return this._get('publishdate')},getCreatedDate:function(){return this._get('createddate')},getLastModifiedDate:function(){return this._get('lastmodifieddate')},getSourceDate:function(){return this._get('sourcedate')},getTags:function(){return this._get('tags')},getFlags:function(){return this._get('flags')},getCollections:function(){return this._get('colls')},getVariants:function(){return this._get('variants')},getVariant:function(variant){var variants=this._get('variants');return variants?variants[variant]:null},getProviderId:function(){return this._get('providerid')},getProviderName:function(){return this._get('providername')},getTrimmedProviderName:function(){return this._get('providername')?this._get('providername').split(" ")[0]:""},getMarketId:function(){return this._get('marketid')},getVendorId:function(){return this._get('vendorid')},getSource:function(){var source=this._get('flags')&&this._get('flags').orig_source;return(source?source:"")},getTotalAssets:function(){return this._get('totalAssets')},getCredit:function(){return this._get('credit')},getSourceName:function(){return this._get('sourcename')},getUrl:function(){return this._get('url')},getCollectionData:function(){var colldata=this._get("_collectiondata")||{};return{getId:function(){return colldata.id},getAdMetrics:function(){return colldata.ad_metrics},getSponsored:function(){return colldata.sponsored},getBackgroundImage:function(){return colldata.background_image},getVideoBackgroundImage:function(){return colldata.background_image&&colldata.background_image.video||null},getArticleImage:function(){return colldata.background_image&&colldata.background_image.article||null},getTitleImage:function(){return colldata.background_image&&colldata.background_image.title||null},getUrl:function(){return colldata.url},getTitle:function(){return colldata.title}}},getAuthors:function(){return this._get('author')},getPlaylistData:function(){var pldata=this._get('_pldata')||{};return{getUrl:function(){return pldata.url},getTitle:function(){return pldata.title}}}})}]);twc.shared.apps.factory('UGCAssetModelClass',['CmsAModelClass',function(CmsAModelClass){return CmsAModelClass.extend({recordType:'ugc',getAltTitle:function(){return this._get('title')},getAssetUrl:function(){return this.getVariant("stream")},getCanonicalUrl:function(){return this._get('seourl')},getLargeThumbUrl:function(){return this.getVariant(12)},getProviderId:function(){return this._get('providerid')},getPublishDate:function(){return this._get('publishdate')},getCollectionData:function(){var colldata=this._get("_collectiondata")||{};return{getId:function(){return colldata.groupid},getAdMetrics:function(){return colldata.ad_metrics},getSponsored:function(){return colldata.sponsored},getBackgroundImage:function(){return colldata.background_image},getVideoBackgroundImage:function(){return colldata.background_image&&colldata.background_image.video||null},getArticleImage:function(){return colldata.background_image&&colldata.background_image.article||null},getTitleImage:function(){return colldata.background_image&&colldata.background_image.title||null},getUrl:function(){return colldata.url},getTitle:function(){return colldata.title}}}})}]);twc.shared.apps.factory('VideoAssetModelClass',['CmsAModelClass',function(CmsAModelClass){return CmsAModelClass.extend({recordType:'video',getAltTitle:function(){return this._get('altitle')},getVideoDescription:function(){return this._get('description')},getAssetUrl:function(){return this._get("mezzanine_url")},getCanonicalUrl:function(){return this._get('url')},getLargeThumbUrl:function(){return this.getVariant(200)},getItemIndex:function(){return this._get("itemIndex")},setItemIndex:function(idx){this.set({itemIndex:idx})}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.a.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.assetlist.js. */
twc.shared.apps.factory('CmsAssetListModelClass',['CmsAModelClass','pcoUser',function(CmsAModelClass,pcoUser){return CmsAModelClass.extend({recordType:'CmsAssetList',construct:function(){CmsAModelClass.prototype.construct.apply(this,arguments)},setResponse:function(response){this.data=response;this.header="NA"},getThumbnail:function(){var objVariants=this._get('variants'),thumbnailUrl=objVariants[2]||'';return thumbnailUrl}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/dsxclient/models/v2/cms.assetlist.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/error_handler/error_handler.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module('shared',[]);twc.shared.apps.directive('errorHandler',['twcConfig','$compile',function(twcConfig,$compile){var errorHandlerDefinition={priority:0,replace:true,template:'<div data-ng-if="hasError" class="wx-module-error" data-ng-class="{dark: errorHandlerTheme === \'dark\'}">\n    <div class="wx-module-error-content">\n        <span class="wx-iconfont-global wx-icon-error-2"></span>\n        <div class="messaging">\n            <p class="error-title" data-ng-bind-template="{{errorTitle | translate}}"></p>\n            <p class="error-description"  data-ng-bind-template="{{errorDescription | translate}}"></p>\n        </div>\n    </div>\n</div>\n',scope:{errorHandler:'=',errorHandlerMode:'@',errorHandlerTheme:'@'},restrict:'A',link:function($scope){$scope.hasError=$scope.errorHandler===twcConfig.module_status_codes.ERROR;$scope.funcs={myErrorHandler:function(){switch($scope.errorHandlerMode){case'na':$scope.errorTitle='error_handler.NOT_AVAILABLE_TITLE';$scope.errorDescription='error_handler.NOT_AVAILABLE_DESCRIPTION';break;case'generic':$scope.errorTitle='error_handler.GENERIC_ERROR_TITLE';$scope.errorDescription='error_handler.GENERIC_ERROR_DESCRIPTION';break;default:$scope.errorTitle='error_handler.GENERIC_ERROR_TITLE';$scope.errorDescription='error_handler.GENERIC_ERROR_DESCRIPTION'}}};$scope.funcs.myErrorHandler();$scope.$watch('errorHandler',function(nVal,oVal){$scope.hasError=nVal==='error'});$scope.$watch('errorHandlerMode',function(nVal,oVal){if(nVal!==oVal){$scope.errorHandlerMode=nVal;$scope.funcs.myErrorHandler()}})}};return errorHandlerDefinition}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/error_handler/error_handler.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/preload/preload.directive.js. */
twc.shared=twc.shared||{};twc.shared.apps=twc.shared.apps||angular.module('shared',[]);twc.shared.apps.directive('preload',function(){var preloadDefinition={priority:0,replace:false,template:'<div class="loading clearfix"><div class="preloader" data-anim="base wrapper"><div class="left-wrap"><div class="circle left" data-anim="base left"></div></div><div class="right-wrap"><div class="circle right" data-anim="base right"></div></div></div></div>',scope:true,restrict:'A'};return preloadDefinition});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/preload/preload.directive.js. */
twc.header_main_menu = twc.header_main_menu || {};
twc.header_main_menu.app = angular.module('header_main_menu', []);;/**/
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/sqs_beacons/sqs_beacons.factory.js. */
twc.shared.apps.factory("SQSBeaconFactory",['pcoUser','PcoDevice','customEvent',function(pcoUser,PcoDevice,customEvent){viewId=TWC&&TWC.AWS&&TWC.AWS.viewId||TWC.PcoUtils.generateUUID();return{fireBeacon:function(eventType,eventData){customEvent.ifReady(['awsReady']).done(function(){var wxdId=PcoDevice.getOpenDDRId(),userId=pcoUser.getRmid(),page_id=window.location.pathname!=="/"&&window.location.pathname||jQuery('meta[name="pagecode"]').attr("value"),awsConfig=TWC&&TWC.AWS,queueUrl=TWC.AWS.sqs_url_prefix,beaconObj={};beaconObj.eventType=eventType;beaconObj.eventData=[{pageId:page_id,viewId:viewId}];beaconObj.userId=userId;beaconObj.platform="web";beaconObj.version=1;beaconObj.wxdId=wxdId;jQuery.extend(beaconObj.eventData[0],eventData);AWS.config.update({region:'us-east-1',accessKeyId:awsConfig.aws_bk,secretAccessKey:awsConfig.aws_tk});var SQS=new AWS.SQS(),params={MessageBody:JSON.stringify(beaconObj),QueueUrl:queueUrl+awsConfig.aws_acct+'/'+awsConfig.aws_queue,DelaySeconds:0};SQS.sendMessage(params,function(err,data){})})}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/sqs_beacons/sqs_beacons.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/header_savedlocations/header_savedlocations.app.js. */
twc.header_savedlocations={};twc.header_savedlocations.app=angular.module('header_savedlocations',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/header_savedlocations/header_savedlocations.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/search/search.app.js. */
twc.search=twc.search||{};twc.search.app=twc.search.app||angular.module('search',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/search/search.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/search/translations/search.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{headerSearch:{SEARCH_CITY_ZIP_PLACE:"Search city, zip or place (Disney World)",RECENT_SEARCHES:"Recent Searches",SEARCHING:"Searching",NO_RESULT:"No results found."}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/search/translations/search.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/social_sharing/social_sharing.app.js. */
twc.social_sharing=twc.social_sharing||{};twc.social_sharing.app=twc.social_sharing.app||angular.module('social_sharing',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/social_sharing/social_sharing.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/translations/current_conditions_hp.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{"current_conditions_hp.CCOVERVIEW":"Current Conditions Overview","current_conditions_hp.WEATHER":"Weather","current_conditions_hp.UPDATED":"Updated","current_conditions_hp.NOW":"Now","current_conditions_hp.TODAY":"Today","current_conditions_hp.TONIGHT":"Tonight","current_conditions_hp.FEELSLIKE":"Feels Like","current_conditions_hp.PAST":"Past","current_conditions_hp.NEXT6HRS":"Next 6 hours","current_conditions_hp.WIND":"Wind","current_conditions_hp.HUMIDITY":"Humidity","current_conditions_hp.UVINDEX":"UV Index","current_conditions_hp.DEWPOINT":"Dew Point","current_conditions_hp.PRESSURE":"Pressure","current_conditions_hp.VISIBILITY":"Visibility","current_conditions_hp.HOURLY":"Hourly Details","current_conditions_hp.ACTUALTEMP":"Actual Temperature","current_conditions_hp.APPARENTTEMP":"Apparent Temperature","current_conditions_hp.TEMP":"Temperature","current_conditions_hp.CONDDESC":"Condition Description","current_conditions_hp.CCDETAILS":"Current Conditions Details","current_conditions_hp.SHOWDETAILS":"Show Details","current_conditions_hp.HIDEDETAILS":"Hide Details","current_conditions_hp.FULLFORECAST":"Full Forecast"}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/translations/current_conditions_hp.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/wxdata.factory.js. */
twc.shared.apps.factory('wxSeverity',['twcUtil',function(twcUtil){return function(skyCode){var wxCodes=[300,310,412,1002,1012,4e3,4010,4200,4210,4300,5302,5312,5500,5509,5600,5610,5700,5709,5710,5719,429,1700,1770,1790,1780,1002,1072,1082,1212,1217,1222,1227,1092,1102,1182,1192,1172,1202,1282,1232,1237,1242,1247,1292,1272,1842,1832,1882,1887,1802,1852,1892,1897,1402,1482,1492,1472,1642,1662,1652,1632,1602,1672,1692,1682,402,482,472,492,422],severeMode=twcUtil.filter(wxCodes,function(code){return skyCode===code});return severeMode}}]).factory('wxDataUtils',['twcUtil','datefactory',function(twcUtil,datefactory){return{roundChanceOfPrecip:function(chanceOfPrecip){if(angular.isDefined(chanceOfPrecip))chanceOfPrecip=Math.round(chanceOfPrecip/5)*5;return chanceOfPrecip},roundDateHours:function(nativeDateObj){if(nativeDateObj.getMinutes()>0){var roundedHours=nativeDateObj.getHours()+Math.round(nativeDateObj.getMinutes()/60);nativeDateObj.setHours(roundedHours);nativeDateObj.setMinutes(0)};return nativeDateObj},filterExpiredDFRecord:function(csDateTime,dailyForecast){var todaysDate=datefactory['new'](csDateTime.getDateTimeISO(),csDateTime.getTimeZoneAbbr()).date;if(todaysDate!==twcUtil.dateTimeToDate(dailyForecast.items[0].getForecastDate())){dailyForecast.items.shift();return true}else return false}}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/wxdata.factory.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/wxdata.directive.js. */
twc.shared.apps.directive('wxTemperature',['pcoUser',function(pcoUser){'use strict';return{restrict:'A',template:'<span ng-if="tempPrefix" class="temp-prefix" data-ng-bind="tempPrefix"></span> <span data-ng-if="hasValue()" data-ng-bind="temp"></span><sup data-ng-if="hasValue()" class="deg">&deg;</sup><sup class="temp-unit" data-ng-if="showTempUnit" data-ng-bind="tempUnit()"></sup>\n<span data-ng-if="!hasValue()" data-ng-bind="text()"></span>',scope:{temp:'=wxTemperature',tempPrefix:'@',showTempUnit:'=',textToReplace:'@'},link:function(scope,element,attrs){scope.hasValue=function(){return scope.temp===0||(scope.temp!==-999&&scope.temp!==-572&&!!scope.temp)};scope.tempUnit=function(){return scope.hasValue()?pcoUser.getTempUnit():''};scope.text=function(){return angular.isDefined(scope.textToReplace)?scope.textToReplace:'N/A'}}}}]).directive('wxPercentage',['twcUtil','$filter',function(twcUtil,$filter){'use strict';return{restrict:'A',scope:{inputValue:'=wxPercentage'},replace:true,template:'<span data-ng-bind-template="{{input()}}"></span>',link:function(scope,element,attrs){scope.input=function(){return twcUtil.isNumeric(scope.inputValue)?scope.inputValue+'%':$filter('safeDisplay')(scope.inputValue)}}}}]).directive('wxVisibility',['pcoUser','$filter',function(pcoUser,$filter){'use strict';return{restrict:'A',template:'<span data-ng-bind="output() | safeDisplay"></span>',replace:true,scope:{visibility:'=wxVisibility'},link:function(scope,element,attrs){scope.output=function(){if(angular.isDefined(scope.visibility)&&(scope.visibility!==null)){if(scope.visibility===0){return 0+' '+pcoUser.getDistanceUnit()}else if(scope.visibility<0){return null}else if((scope.visibility.toString().toLowerCase()===$filter('translate')('wx_data.UNLIMITED'))||(scope.visibility>50)){return $filter('translate')('wx_data.UNLIMITED')}else return parseFloat(scope.visibility).toFixed(1)+' '+pcoUser.getDistanceUnit()}else return null}}}}]).directive('wxPressure',['pcoUser','$filter',function(pcoUser,$filter){'use strict';return{restrict:'A',template:'<span data-ng-bind-template="{{hasPressure()}}"></span> <span data-ng-if="hasValue() && barometricText" aria-hidden="true" class="wx-iconfont-global {{pressureIconClass()}} "></span>',scope:{pressure:'=wxPressure',barometricText:'=wxPressureText'},link:function(scope,element,attrs){var pressure=scope.pressure,trend=scope.barometricText&&scope.barometricText.toLowerCase();scope.hasValue=function(){return scope.pressure===0||!!scope.pressure};scope.unit=function(){return pcoUser._get('unit')};scope.hasPressure=function(){if(scope.hasValue()){pressure=scope.unit()==='e'?scope.pressure.toFixed(2)+' '+pcoUser.getPressureUnit():scope.pressure.toFixed(1)+' '+pcoUser.getPressureUnit();return pressure}else return'N/A'};scope.pressureIconClass=function(){var pressureIconClass=trend===$filter('translate')('wx_data.RISING').toLowerCase()||trend===$filter('translate')('wx_data.RISINGRAPIDLY').toLowerCase()?'wx-icon-arrow-up-4':trend===$filter('translate')('wx_data.FALLING').toLowerCase()||trend===$filter('translate')('wx_data.FALLINGRAPIDLY').toLowerCase()?'wx-icon-arrow-down-4':trend===$filter('translate')('wx_data.STEADY').toLowerCase()?'wx-icon-arrow-right-4':'';return trend?pressureIconClass:''}}}}]).directive('wxSnowAccumulation',['pcoUser',function(pcoUser){'use strict';return{restrict:'A',template:'<span data-ng-if="wxSnowAccumulation"><span class="accumulation-value" data-ng-bind-template="{{accumulation()}}"></span> <span class="accumulation-unit" data-ng-bind-template="{{unit()}}"></span></span>',scope:{wxSnowAccumulation:'='},link:function(scope,element,attrs){scope.accumulation=function(){return scope.wxSnowAccumulation.replace(/ /g,'')};scope.unit=function(){return pcoUser.getAccumulationUnit()}}}}]).directive('wxUvIndex',['$filter','twcUtil',function($filter,twcUtil){'use strict';return{restrict:'A',replace:true,template:'<span data-ng-bind-template="{{output() | safeDisplay}}"></span>',scope:{uvIndex:'=wxUvIndex'},link:function(scope,element,attrs){scope.output=function(){if(angular.isNumber(scope.uvIndex)){return(scope.uvIndex>=0&&scope.uvIndex<=10)?(scope.uvIndex+' '+$filter('translate')('wx_data.OUTOF')+' 10'):((scope.uvIndex>10)&&(scope.uvIndex<=12))?$filter('translate')('wx_data.EXTREME'):null}else return null}}}}]).directive('wxWindDirection',['pcoUser','$filter',function(pcoUser,$filter){'use strict';return{restrict:'A',replace:true,template:'<span class="wx-wind" data-ng-bind-template="{{output() | safeDisplay}}"></span>',scope:{windDir:'=wxWindDirection',windSpeed:'=wxWindSpeed'},link:function(scope,element,attrs){scope.output=function(){if(angular.isDefined(scope.windSpeed)&&angular.isDefined(scope.windDir)){return scope.windSpeed===0?$filter('translate')('wx_data.CALM'):scope.windDir&&scope.windDir.toLowerCase().match(/var/gi)?'Var '+scope.windSpeed+' '+pcoUser.getSpeedMeasure():scope.windDir+' '+scope.windSpeed+' '+pcoUser.getSpeedMeasure()}else return null}}}}]).directive('wxPrecip',['twcUtil',function(twcUtil){'use strict';return{restrict:'A',template:'<span aria-hidden="true" class="wx-iconfont-global {{iconClass()}}"></span><span data-ng-if="!wxPrecipIconOnly" class="precip-val" data-ng-bind="chanceOfPrecip() | safeDisplay"></span>',scope:{wxPrecip:'=',wxPrecipType:'=',wxPrecipSkyCode:'='},link:function(scope,element,attrs){scope.wxPrecipIconOnly=attrs.wxPrecipIconOnly==='true'||angular.isDefined(attrs.wxPrecipIconOnly)
function getPrecipSeverity(chanceOfPrecip){return(chanceOfPrecip<=100&&chanceOfPrecip>=60)?3:(chanceOfPrecip<60&&chanceOfPrecip>=30)?2:(chanceOfPrecip<30&&chanceOfPrecip>=0)?1:''}
function isWintryMix(){var skyCode=scope.wxPrecipSkyCode&&parseInt(scope.wxPrecipSkyCode),wintryMixCodes=[5,7];return twcUtil.filter(wintryMixCodes,function(code){return skyCode===code}).length}
function hasValue(){return scope.wxPrecip===0||!!scope.wxPrecip};scope.chanceOfPrecip=function(){return angular.isNumber(scope.wxPrecip)?scope.wxPrecip+'%':null};scope.iconClass=function(){if(scope.wxPrecipType&&!!scope.wxPrecipType){return hasValue()&&(scope.wxPrecipType==='precip')&&isWintryMix()?'wx-icon-precip-wintry-mix':hasValue()&&(scope.wxPrecipType==='rain'||scope.wxPrecipType==='precip')?'wx-icon-precip-rain-'+getPrecipSeverity(scope.wxPrecip):hasValue()&&scope.wxPrecipType==='snow'?'wx-icon-precip-snow-'+getPrecipSeverity(scope.wxPrecip):'wx-icon-precip-rain-1'}else return getPrecipSeverity(scope.wxPrecip)===''?'wx-icon-precip-rain-1':'wx-icon-precip-rain-'+getPrecipSeverity(scope.wxPrecip)}}}}]).directive('wxPrecipRangeLabel',[function(){function resolveRangeTokens(range){if(!range)return null;var tokens=null;if(range.top!==undefined||range.bottom!==undefined){if(range.top===undefined){tokens=[{val:'>',type:'symbol'},{val:range.bottom,type:'num'}]}else if(range.bottom===undefined){tokens=[{val:'<',type:'symbol'},{val:range.top,type:'num'}]}else tokens=[{val:range.bottom,type:'num'},{val:'-',type:'symbol'},{val:range.top,type:'num'}]}else if(range.value!==undefined)tokens=[{val:range.value,type:'num'}];return tokens};return{template:'<span class="wx-precip-range-label">\n    <span data-ng-if="!isEmpty()" data-ng-repeat="token in rangeTokens" \n        data-ng-class="[\'wx-token-\' + token.type, token.val===\'>\' || token.val===\'<\' ? \'comparison-symbol\' : \'\']" \n        data-ng-bind="token.val + ($index < rangeTokens.length-1 ? \' \': \'\')"\n        >\n    </span>\n    <span data-ng-if="isEmpty()" ng-bind="null | safeDisplay"></span>\n    \n    <span class="unit" data-ng-if="!isEmpty()" data-ng-bind="precipUnit"></span>\n</span>',scope:{precipRange:'=',precipUnit:'='},link:function(scope){scope.$watch('precipRange',function(precipRange){scope.rangeTokens=resolveRangeTokens(precipRange)});scope.isEmpty=function(){return!scope.rangeTokens}}}}]).directive('wxAlertBadge',['twcUtil','wxSeverity',function(twcUtil,wxSeverity){'use strict';return{restrict:'A',template:' <span data-ng-if="isSevere" class="wx-alert-badge" data-ng-class="{lrg: lrgAlertBadge}"><span data-aria-hidden="true" class="wx-iconfont-global wx-icon-alert-inset"></span></span>',scope:{skyCodeExtended:'=wxAlertBadge',altAlertCondition:'=wxAltAlertBadge',lrgAlertBadge:'=wxLrgAlertBadge'},replace:true,link:function(scope,element,attrs){var isSevere=wxSeverity(scope.skyCodeExtended);scope.isSevere=!twcUtil.isEmpty(isSevere)||scope.altAlertCondition}}}]).directive('wxObsQualifier',function(){'use strict';return{restrict:'A',template:'<span data-wx-alert-badge data-wx-alt-alert-badge="severity > 3 && qualifier"></span> <span data-ng-if="hasValue() && (severity > 1)" data-ng-bind="qualifier"></span>',scope:{qualifier:'=wxObsQualifier',severity:'=wxObsSeverity'},link:function(scope,element,attrs){scope.hasValue=function(){return scope.qualifier===0||!!scope.qualifier}}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/wxdata.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/translations/wx_data.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{wx_data:{CCOVERVIEW:"Current Conditions Overview",UPDATED:"Updated",NOW:"Now",TODAY:"Today",TONIGHT:"Tonight",FEELSLIKE:"Feels Like",PAST:"Past",NEXT6HRS:"Next 6 hours",WIND:"Wind",HUMIDITY:"Humidity",UVINDEX:"UV Index",DEWPOINT:"Dew Point",PRESSURE:"Pressure",VISIBILITY:"Visibility",LOWTEMP:"Low Temperature",TEMP:"Temperature",CONDDESC:"Condition Description",PRECIPCHANCE:"Chance of Precipitation",ASTRODETAILS:"Astronomical Details",SUNRISE:"Sunrise",SUNSET:"Sunset",MOONRISE:"Moonrise",MOONSET:"Moonset",NIGHT:"Night",AVG:"Averages",REC:"Records",UNLIMITED:"Unlimited",EXTREME:"Extreme",OUTOF:"out of",CALM:"Calm",RISING:"rising",RISINGRAPIDLY:"rising rapidly",FALLING:"falling",FALLINGRAPIDLY:"falling rapidly",STEADY:"steady"}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/translations/wx_data.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_content_font.js. */
TWC.Events.getEvent('WebFont_ready').progress(function(){WebFont.load({google:{families:['Roboto+Condensed:700:latin']}})});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_content_font.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_content.controller.js. */
twc.hp_dl_content.app.controller('twc_hp_dl_content_controller',['$scope','settings','PcoMetrics',function($scope,settings,PcoMetrics){'use strict';$scope.dlcontent={};$scope.dlcontent.headlineSettings=settings.headlineSettings;$scope.dlcontent.buttonSettings=settings.buttonSettings;$scope.dlcontent.linkTarget=settings.linkTarget;$scope.dlcontent.headlineSettings.linkIcon=(settings.headlineSettings.linkIcon&&(settings.headlineSettings.linkIcon!=='default'))?settings.headlineSettings.linkIcon:null;$scope.dlcontent.severeFlag=settings.severeFlag;$scope.dlcontent.headlineAlignmentClass=settings.headlineSettings.headlineAlignment;$scope.dlcontent.rightPromoClass=(settings.severeFlag==='wx-severe'||settings.severeFlag==='wx-hybrid')?'has-right-promo':null;$scope.moduleId=settings.module_id;$scope.pageName=PcoMetrics.getPageName()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_content.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_background_image.js. */
TWC.Events=TWC.Events||{};TWC.Events.drupalSettingsReady=TWC.Events.drupalSettingsReady||jQuery.Deferred();TWC.Events.drupalSettingsReady.done(function(){function setStyle(styleImg){var cssWithoutTransition='#wx-wrapper .panel-display #wx-local-wrap { background-image: url("'+styleImg+'"); }',head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style'),css=cssWithoutTransition;style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=css}else style.appendChild(document.createTextNode(css));head.appendChild(style)};if(window.Drupal&&window.Drupal.settings&&window.Drupal.settings.twc&&window.Drupal.settings.twc.modules&&window.Drupal.settings.twc.modules.hp_dl_content){var bgModules=window.Drupal.settings.twc.modules.hp_dl_content,bgModInstance=jQuery.isArray(bgModules)&&bgModules.length>0&&bgModules[0];if(bgModInstance){bgMod=window.Drupal.settings.twc.instance[bgModInstance];setStyle(bgMod&&bgMod.backgroundImage)}}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/hp_dl_background_image.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/translations/hp_dl_content.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{search:{SEARCH_CITY_ZIP_PLACE:"Search city, zip or place",RECENT_SEARCHES:"Recent Searches",SEARCHING:"Searching",NO_RESULT:"No results found."}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_dl_content/translations/hp_dl_content.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/hp_countdown.app.js. */
twc.hp_countdown=twc.hp_countdown||{};twc.hp_countdown.app=twc.hp_countdown.app||angular.module('hp_countdown',['ngSanitize']);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/hp_countdown.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/translations/hp_countdown.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{hpcountdown:{DAYLEFT:"Day Left",DAYSLEFT:"Days Left",SEARCH_LOCATIONS:"Search Locations",SEARCH_ANOTHER:"View forecast for another location"}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/translations/hp_countdown.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_typeahead/twc_alias.value.js. */
twc.shared.apps.value('aliases',{specialty:{alcatraz:'USCA0987:1:US','amelia island':'USFL0144:1:US','american somoa':'USAS0001:1:US','canary islands':'SPXX0210:1:SP','catalina island':'USCA0055:1:US','disney hawaii':'USHI0200:1:US','disney world':'USFL0615:1:US',disneyland:'USCA1306:1:US','grand cayman':'CJXX0001:1:CJ','green acres':'USFL0512:1:US','hawaii aulani disney resort':'USHI0200:1:US',kauai:'USHI0060:1:US','kiawah island':'USSC0174:1:US','la porte':'USCA1106:1:US',lanai:'USHI0057:1:US',manhattan:'USNY0996:1:US',maui:'USHI0031:1:US',monoco:'MNXX0001:1:MN',oahu:'USHI0026:1:US','tampa bay':'USFL0481:1:US','tel aviv':'ISXX0026:1:IS',uk:'UKXX0085:1:UK','walt disney world':'USFL0615:1:US','washington dc':'USDC0001:1:US','new york city':'USNY0996:1:US',aruba:'AAXX0001:1:AA',bahamas:'BFXX0005:1:BF',bermuda:'BDXX0001:1:BD','big bear':'USCA0093:1:US',brooklyn:'USNY0176:1:US','costa rica':'CSXX1935:1:CS',disneyworld:'USFL0615:1:US',la:'USCA0638:1:US',nyc:'USNY0996:1:US','puerto rico':'USPR0087:1:US'},state:{al:'alabama',ak:'alaska',az:'arizona',ar:'arkansas',ca:'california',co:'colorado',ct:'connecticut',de:'delaware',fl:'florida',ga:'georgia',hi:'hawaii',di:'idaho',il:'illinois','in':'indiana',ia:'iowa',ks:'kansas',ky:'kentucky',la:'louisiana',me:'maine',md:'maryland',ma:'massachusetts',mi:'michigan	mi',mn:'minnesota	mn',ms:'mississippi',mo:'missouri',mt:'montana',ne:'nebraska',nv:'nevada',nh:'new hampshire',nj:'new jersey',nm:'new mexico',ny:'new york',nc:'north carolina',nd:'north dakota',oh:'ohio',ok:'oklahoma',or:'oregon',pa:'pennsylvania',ri:'rhode island',sc:'south carolina',sd:'south dakota',tn:'tennessee',tx:'texas',ut:'utah',vt:'vermont',va:'virginia',wa:'washington',wv:'west virginia',wi:'wisconsin',wy:'wyoming',as:'american samoa',dc:'district of columbia',gu:'guam',mp:'northern mariana islands',mq:'midway island',pr:'puerto rico',vi:'virgin islands',wq:'wake island'}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_typeahead/twc_alias.value.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/seo_links/seo_links.app.js. */
twc.seo_links=twc.seo_links||{};twc.seo_links.app=twc.seo_links.app||angular.module('seo_links',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/seo_links/seo_links.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/seo_links/translations/seo_links.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{search:{SEARCH_CITY_ZIP_PLACE:"Search city, zip or place",RECENT_SEARCHES:"Recent Searches",SEARCHING:"Searching",NO_RESULT:"No results found."}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/seo_links/translations/seo_links.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/footer/footer.app.js. */
twc.footer=twc.footer||{};twc.footer.app=twc.footer.app||angular.module('footer',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/footer/footer.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/footer/translations/footer.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{search:{SEARCH_CITY_ZIP_PLACE:"Search city, zip or place",RECENT_SEARCHES:"Recent Searches",SEARCHING:"Searching",NO_RESULT:"No results found.",SEARCH_SITE:"Search Site",SEARCH_WEB:"Search Web",SEARCH_TERM:"Enter Search Term",COPYRIGHT:"The Weather Channel, LLC weather.com® Licensed by TRUSTe"}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/footer/translations/footer.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/cobrand_headers/cobrand_headers.app.js. */
twc.cobrand_headers=twc.cobrand_headers||{};twc.cobrand_headers.app=twc.cobrand_headers.app||angular.module('cobrand_headers',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/cobrand_headers/cobrand_headers.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/breaking_now.app.js. */
twc.breaking_now=twc.breaking_now||{};twc.breaking_now.app=twc.breaking_now.app||angular.module('breaking_now',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/breaking_now.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/translations/twc_social_sharing.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{twcSocialSharing:{facebook:'Share on Facebook',twitter:'Tweet',googleplus:'Post to Google+',reddit:'Post to Reddit',pinterest:'Pin It',email:'Email',qq:'QIt',sina:'Sina'}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/translations/twc_social_sharing.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/content_media/content_media.app.js. */
twc.content_media=twc.content_media||{};twc.content_media.app=twc.content_media.app||angular.module('content_media',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/content_media/content_media.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/most_popular/most_popular.app.js. */
twc.most_popular=twc.most_popular||{};twc.most_popular.app=twc.most_popular.app||angular.module('most_popular',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/most_popular/most_popular.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/most_popular/translations/most_popular.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{most_popular:{TITLE:"Most Popular"}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/most_popular/translations/most_popular.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/error_handler/translations/error_handler.en_us.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({en_US:{"error_handler.GENERIC_ERROR_TITLE":"Oops!","error_handler.GENERIC_ERROR_DESCRIPTION":"Looks like this feature didn't load properly. Please check back soon.","error_handler.NOT_AVAILABLE_TITLE":"We're Sorry...","error_handler.NOT_AVAILABLE_DESCRIPTION":"Data is not currently available for this location."}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/error_handler/translations/error_handler.en_us.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/search/search.controller.js. */
twc.search.app.controller('twc_search_controller',['$scope','$timeout','$controller','$filter','$q','DrupalSettings','settings','dsxclient','httpclient','twcConfig','pcoUser','twcUtil','customEvent','aliases','twcConstant','$injector','logger',function($scope,$timeout,$controller,$filter,$q,DrupalSettings,settings,dsxclient,httpclient,twcConfig,pcoUser,twcUtil,customEvent,aliases,twcConstant,$injector,logger){'use strict';$controller('baseSearchController',{$scope:$scope});var p=$scope.params;p.minChar=settings&&settings.minChar?parseInt(settings.minChar):3;p.resultLimit=settings&&settings.resultLimit?parseInt(settings.resultLimit):10;p.suppressRecentSearches=settings&&settings.suppress_recent_searches?JSON.parse(settings.suppress_recent_searches):false;p.settings=settings;p.moduleId=settings.module_id;var searchVis=false;$scope.createLocArray(settings.loc_type);var goToEnhance=function(term){location.href=twcConstant.pageUrl[p.moduleId]['enhance']+term+'&loctypes='+p.locTypes+'&from='+p.moduleId},goToSkiEnhance=function(term){location.href=twcConstant.pageUrl[p.moduleId]['page']+term+'&loctypes='+twcConstant.locTypes.Ski+'&from='+p.moduleId},landingPage=function(key,item){addToRecentSearch.apply($scope,[item,'deferLandingPage'])},addToRecentSearch=function(item,callback){var key=item.getKey&&item.getKey()||item.getFullLocId&&item.getFullLocId();if(item&&!!item.data&&!$filter('twcFilter').getByProperty('key',key,$scope.getRecentSearches())&&!$filter('twcFilter').getByProperty('key',key,$scope.getSavedLocations())){var rs=$scope.getRecentSearches();customEvent.getEvent('locations_changed').progress(function(e){if(e.locations.length===10||e.locations.length>rs.length)$scope[callback](item)});$scope.saveRecentSearch(item)}else $scope[callback](item)},getLocationByZip=function(zip){$scope.getLocationByZip(zip).then(function(response){var res=response.getModel({recordType:"xweb",recordName:p.xwebRecords.webLoc,locale:'en_US',locTypes:'4/US/'+zip});if(res&&res.length===1){addToRecentSearch.apply(this,[res[0],'gotLocationByZip'])}else goToEnhance(zip)},function(error){})},getLocationByLocId=function(locId){if(locId&&!$filter('twcFilter').getByProperty('loc',locId,$scope.getRecentSearches())&&!$filter('twcFilter').getByProperty('loc',locId,$scope.getSavedLocations()))$scope.getLocationByLocId(locId).then(function(response){var res=response.getModel({recordType:"wxd",recordName:p.wxdRecords.loc,locale:'en_US',fullLocId:locId});if(res){landingPage(locId,$scope.getXwebLocFromLoc(res))}else goToEnhance(locId)},function(error){})},is121Match=function(item,term){if(item&&item.result&&item.result===p.noResult)return null;var match=term.indexOf(',')>0?term.split(','):term.split(' '),shortName=item.getCountryCode().toLowerCase(),name=(shortName==='us')?item.getStateCode().toLowerCase():item.getCountry().toLowerCase();angular.forEach(match,function(v,k){match[k]=v.trim()});return(jQuery.inArray(item.getCity().toLowerCase(),match)===0&&(jQuery.inArray(name,match)===1)||jQuery.inArray(shortName,match)===1)?item.getKey():null},isValidState=function(term){var st=term.toLowerCase();if(term.length===2&&aliases.state[st]){return st}else return null};$scope.goSelectItem=function(item){if(item){logger.debug('should go to today page if location is big city or an exactly match otherwise go to multi-results page.');var fromStr='',trackStr='',term=$scope.term.toLowerCase();$scope.term=item.autoSelect?term:item.getFormattedName($scope.$root.isMobile);if(!item.result&&(!item.autoSelect||item.autoSelect&&item.isBigCity()||$scope.results.length===1||item.getLocType()===twcConstant.locTypes.Airports&&term.length===3)){if(term.length===0){fromStr='recentsearchresolved';trackStr='recentsearch'}else{fromStr=(item.autoSelect?'localsearch':'typeahead');trackStr=(item.autoSelect?'localsearchresolved':'typeaheadresolved')};$scope.tracking(fromStr,trackStr);landingPage(item.getKey(),item)}else if(p.minChar===2&&!!isValidState(term)){$scope.tracking('localsearch','localsearchresolved');goToSkiEnhance(term)}else if(aliases.specialty[term]){$scope.tracking('localsearch','localsearchresolved');getLocationByLocId(aliases.specialty[term])}else{var match=is121Match(item,term);if(!!match){$scope.tracking('localsearch','localsearchresolved');landingPage(match,item)}else{trackStr=item.result?'localsearcherror':'localsearchresults';$scope.tracking('localsearch',trackStr);goToEnhance(term)}}}};$scope.showRecentSearches=function(){var suppressed=$scope.params.suppressRecentSearches;if($scope.$root.isMobile&&suppressed)$scope.results=$scope.getSavedLocations();return suppressed===true?'Suppressed':'Recent'};$scope.deferLandingPage=function(key){var theKey=typeof key==='object'?key.getKey():key;location.href=twcConstant.pageUrl[p.moduleId]['page']+theKey};$scope.gotLocationByZip=function(item){$scope.deferLandingPage(item.getKey())};$scope.placeHolder=settings.place_holder;$scope.term='';$scope.fromString=p.moduleId+'typeahead';$scope.config=[{recordType:"xweb",recordName:p.xwebRecords.webLoc,locTypes:''}];$scope.manageLocations=function(){location.href='/life/profile'};$scope.validate=function(value){var childScope=scope.$$childHead,valid=true;logger.debug('go search');if(value===scope.placeholderText){valid=false;childScope.$apply(function(){childScope.isValid=false})};return valid};$scope.getLocTypes=function(){return p.locTypes};$scope.searchVis=function(){return searchVis};$scope.toggleVis=function(){searchVis=!searchVis};$scope.$on('openLocationSearch',function(){$scope.toggleVis()})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/search/search.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/mock/responses.js. */
twc.breaking_now.app.value('BreakingNowMock_Severe',{title:"BREAKING NOW",headline:"ALERT: High Winds and Heavy Snow Pound the Coast of New England",link_url:"http://www.weather.com/news/tornado-central/severe-weather-tracker-page",color:"#AC050F",share:{type:"social"}}).value('BreakingNowMock_Severe_MFW',{title:"BREAKING NOW",headline:"ALERT: High Winds and Heavy Snow Pound the Coast of New England",link_url:"http://www.weather.com/news/tornado-central/severe-weather-tracker-page",color:"#AC050F",share:{type:"mfw",locations:[{type:"city_state",value:"Atlanta,Georgia"},{type:"city_state",value:"Duluth,Minnesota"}]}}).value('BreakingNowMock_Severe_MFW2',{title:"BREAKING NOW",headline:"ALERT: High Winds and Heavy Snow Pound the Coast of New England",link_url:"http://www.weather.com/news/tornado-central/severe-weather-tracker-page",color:"#DD552A",share:{type:"mfw",locations:[{type:"state",value:"Georgia"},{type:"state",value:"Minnesota"}]}}).value('BreakingNowMock_Severe_MFW3',{title:"BREAKING NOW",headline:"ALERT: High Winds and Heavy Snow Pound the Coast of New England",link_url:"http://www.weather.com/news/tornado-central/severe-weather-tracker-page",color:"#0E4274",share:{type:"mfw",locations:[{type:"geolocation",value:"37.7793,-122.419|50"}]}});;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/mock/responses.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/current_conditions_hp.app.js. */
twc.current_conditions_hp=twc.current_conditions_hp||{};twc.current_conditions_hp.app=twc.current_conditions_hp.app||angular.module('current_conditions_hp',[]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/current_conditions_hp.app.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/hp_countdown.controller.js. */
twc.hp_countdown.app.controller('twc_hp_countdown_controller',['$scope','settings','AdControl','$filter','$controller','logger','$window','twcUtil','twcConstant','aliases','$rootScope','$interpolate','customEvent','pcoUser','PcoPage',function($scope,settings,AdControl,$filter,$controller,logger,$window,twcUtil,twcConstant,aliases,rscope,$interpolate,customEvent,pcoUser,PcoPage){'use strict';$controller('baseSearchController',{$scope:$scope});var p=$scope.params;p.minChar=settings&&settings.minChar?parseInt(settings.minChar):3;p.resultLimit=settings&&settings.resultLimit?parseInt(settings.resultLimit):10;p.suppressRecentSearches=settings&&settings.suppress_recent_searches?JSON.parse(settings.suppress_recent_searches):false;p.settings=settings;p.moduleId=settings.module_id;p.notifier='manage-location-update-event';customEvent.getEvent('DYNAMIC_LOC_RESOLVED').then(function(){customEvent.getEvent("gotCurrentTime").done(function(payload){$scope.$evalAsync(function(){hp.currentDate=twcUtil.fromISOToDate(payload.date).getTime()})});var goToEnhance=function(term){location.href=twcConstant.pageUrl[p.moduleId]['enhance']+term+'&loctypes='+p.locTypes+'&from='+p.moduleId+"&searchurlpath="+$scope.hpcountdown.searchUrlPath},getLocationByLocId=function(locId){if(locId&&!$filter('twcFilter').getByProperty('loc',locId,$scope.getRecentSearches())&&!$filter('twcFilter').getByProperty('loc',locId,$scope.getSavedLocations()))$scope.getLocationByLocId(locId).then(function(response){var res=response.getModel({recordType:"wxd",recordName:p.wxdRecords.loc,locale:'en_US',fullLocId:locId});if(res){$scope.landingPage(locId,$scope.getXwebLocFromLoc(res))}else goToEnhance(locId)},function(error){})},getDaysLeft=function(){if(hp.countdownDate&&hp.currentDate){var msecInDay=864e5,origDay=(hp.countdownDate-hp.currentDate)/msecInDay,parseDay=parseInt(origDay,10),countdown=(origDay-parseDay>0)?parseDay+1:parseDay||(origDay-parseDay<0)?0:parseDay;return countdown}},is121Match=function(item,term){if(item&&item.result&&item.result===p.noResult)return null;var match=term.indexOf(',')>0?term.split(','):term.split(' '),shortName=item.getCountryCode().toLowerCase(),name=(shortName==='us')?item.getStateCode().toLowerCase():item.getCountry().toLowerCase();angular.forEach(match,function(v,k){match[k]=v.trim()});return(jQuery.inArray(item.getCity().toLowerCase(),match)===0&&(jQuery.inArray(name,match)===1)||jQuery.inArray(shortName,match)===1)?item.getKey():null},formatDateForIE8=function(d){var str=d.split('-');return str[0].length===4?[str[1],str[2],str[0]].join('-'):d};$scope.config=[{recordType:"xweb",recordName:p.xwebRecords.webLoc,locTypes:''}];$scope.hpcountdown={sponsorPosition:settings.overwriteadpos||(settings.selectedadpos&&settings.selectedadpos[0]),countdownDate:pcoUser.getBrowser().ltIE9?Date.parse(formatDateForIE8(settings.countdown_date)):Date.parse(settings.countdown_date),countdownTitle:$interpolate(settings.countdown_title)(rscope),countdownTitleUrl:$interpolate(settings.countdown_title_url)(rscope),countdownTitleUrlTarget:settings.content_title_url_target,countdownTitleNoFollowTag:(settings.countdown_title_nofollow_tag===1)?'nofollow':null,countdownTitleNoFollowTag1:(settings.content_unit_1.content_link_nofollow_tag===1)?'nofollow':null,countdownTitleNoFollowTag2:(settings.content_unit_2.content_link_nofollow_tag===1)?'nofollow':null,contentUnit1:settings.content_unit_1,contentUnit2:settings.content_unit_2,eventMessage:$interpolate(settings.content_unit_1.event_message)(rscope),showEventMessage:false,contentUnit1Title:$interpolate(settings.content_unit_1.content_title)(rscope),contentUnit2Title:$interpolate(settings.content_unit_2.content_title)(rscope),contentUnit1Headline:$interpolate(settings.content_unit_1.content_headline)(rscope),contentUnit2Headline:$interpolate(settings.content_unit_2.content_headline)(rscope),contentUnit1Url:$interpolate(settings.content_unit_1.content_link_url)(rscope),eventDayContentUnit1Url:$interpolate(settings.content_unit_1.eventDay_content_link_url)(rscope),contentUnit2Url:$interpolate(settings.content_unit_2.content_link_url)(rscope),searchSwitch:settings.search_switch,searchUrlPath:settings.search_url_path,currentDate:new Date().getTime(),countdown:'',getDaysText:function(){if(this.countdown===0&&this.eventMessage){this.showEventMessage=true;return this.eventMessage}else return this.countdown>1||this.countdown<1?$filter('translate')('hpcountdown.DAYSLEFT'):$filter('translate')('hpcountdown.DAYLEFT')},isEventDay:function(){return this.countdown===0}};var hp=$scope.hpcountdown;if($scope.hpcountdown.contentUnit2.content_img){var content2ImageContainer=angular.element(".article-2");content2ImageContainer.css("background-image",'url('+$scope.hpcountdown.contentUnit2.content_img+')')};$scope.$watch('hpcountdown.currentDate',function(newVal,oldVal){var countdown=getDaysLeft();logger.debug(countdown);$scope.hpcountdown.countdown=countdown});$scope.validatePageUrl($scope.hpcountdown.searchUrlPath);$scope.createLocArray(settings.loc_type);$scope.goSelectItem=function(item){var fromStr='',trackStr='';if($scope.term&&twcUtil.isNumeric($scope.term)){if($scope.term.length===5&&item){fromStr=(item.autoSelect?'Search':'Search');trackStr=(item.autoSelect?'Search':'SearchResolved');$scope.tracking(fromStr,trackStr);$scope.landingPage(item.getKey(),item)}else $scope.$evalAsync(function(){p.resultType='NoResult';$scope.results=[{result:p.noResult}]})}else if(item){logger.debug('should go to today page if location is big city or an exactly match otherwise go to multi-results page.');var term=$scope.term.toLowerCase();$scope.term=item.autoSelect?term:item.getFormattedName($scope.$root.isMobile);if(!item.result&&(!item.autoSelect||item.autoSelect&&item.isBigCity()||$scope.results.length===1||item.getLocType()===twcConstant.locTypes.Airports&&term.length===3)){if(term.length===0){fromStr='recentsearchresolved';trackStr='recentsearch'}else{fromStr=(item.autoSelect?'Search':'Search');trackStr=(item.autoSelect?'Search':'SearchResolved')};$scope.tracking(fromStr,trackStr);$scope.landingPage(item.getKey(),item)}else if(aliases.specialty[term]){$scope.tracking('Search','SearchResolved');getLocationByLocId(aliases.specialty[term])}else{var match=is121Match(item,term);if(!!match){$scope.tracking('Search','SearchResolved');$scope.landingPage(match,item)}else{trackStr=item.result?'SearchError':'SearchResults';$scope.tracking('Search',trackStr);goToEnhance(term)}}}};$scope.setPlaceholderText=function(width){$scope.hpcountdown.placeholderText=width>895?$filter('translate')('hpcountdown.SEARCH_ANOTHER'):$filter('translate')('hpcountdown.SEARCH_LOCATIONS')};$scope.setPlaceholderText(angular.element(window).width());$scope.showRecentSearches=function(){var suppressed=$scope.params.suppressRecentSearches;if($scope.$root.isMobile&&suppressed)$scope.results=$scope.getSavedLocations();return suppressed===true?'Suppressed':'Recent'};$scope.searchSwitch=function(){return $scope.hpcountdown.searchSwitch===1};if(settings.showad)var unregister=$scope.$watch(function(){return angular.element("#"+$scope.hpcountdown.sponsorPosition)[0]},function(sponsorPos){if(sponsorPos){AdControl.createOrRefreshSlot($scope.hpcountdown.sponsorPosition,{});unregister()}})})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/hp_countdown.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/cobrand_headers/cobrand_headers.directive.js. */
twc.cobrand_headers.app.directive('wxCoBrandHeader',['PcoPage',function(PcoPage){'use strict';var templatePath='/sites/all/modules/custom/angularmods/modules/cobrand_headers/templates/',templateMapping={earthlinkHTML:templatePath+'earthlink_co_brand.html',nbcnewsHTML:templatePath+'nbcnews_co_brand.html',peoplepcHTML:templatePath+'peoplepc_co_brand.html'};return{restrict:'A',templateUrl:(function(){var partnerVal=PcoPage.getPartner(),_return;if(partnerVal==="nbcnews"){_return=templateMapping.nbcnewsHTML}else if(partnerVal==="peoplepc"){_return=templateMapping.peoplepcHTML}else if(partnerVal==="earthlink")_return=templateMapping.earthlinkHTML;return _return}())}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/cobrand_headers/cobrand_headers.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/cobrand_headers/cobrand_headers.controller.js. */
twc.cobrand_headers.app.controller('twc_cobrand_headers_controller',['$scope','DrupalSettings','settings','dsxclient','twcConfig',function($scope,DrupalSettings,settings,dsxclient,twcConfig){'use strict'}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/cobrand_headers/cobrand_headers.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/breaking_now.directive.js. */
twc.breaking_now.app.directive('breakingNow',[function(){return{priority:0,replace:false,templateUrl:'/sites/all/modules/custom/angularmods/modules/breaking_now/templates/breaking_now_content.html?v=1.0.9',scope:'=',restrict:'EA'}}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/breaking_now.directive.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/current_conditions_hp.controller.js. */
twc.current_conditions_hp.app.controller('twc_current_conditions_hp_controller',['twcPco','twcUtil','$scope','$rootScope','$q','settings','dsxclient','twcConfig','customEvent','WxdLocModelClass',function(twcPco,twcUtil,$scope,$rootScope,$q,settings,dsxclient,twcConfig,customEvent,WxdLocModelClass){'use strict';var status=twcConfig.module_status_codes,wxRecords=twcConfig.dsxclient.wxd.records,xwRecords=twcConfig.dsxclient.xweb.records,NO_LOCATION="noLocation",CCFunctions={getData:function(){var promise=$q.when(jQuery.when.apply(jQuery,[].concat(twcPco.get("page").promises,twcPco.get("user").promises)));promise.then(function(){if(twcUtil.isEmpty($rootScope.dynamiclocation)){$scope.cchp.status=NO_LOCATION}else dsxclient.execute([{$id:"obs",recordType:"wxd",recordName:wxRecords.observation,fullLocId:$rootScope.dynamicLocId},{$id:"nws",recordType:"wxd",recordName:wxRecords.bulletin,fullLocId:$rootScope.dynamicLocId},{$id:"forecast",recordType:"xweb",recordName:xwRecords.webdailyForecast,fullLocId:$rootScope.dynamicLocId}]).then(["obs","nws","forecast",function(obs,nws,forecast){$scope.cchp.location=new WxdLocModelClass($rootScope.dynamiclocation,'WxdLocModelClass');if(!obs){(settings.OnErrorShowMessage===1)?$scope.cchp.status=status.ERROR:$scope.cchp.status=NO_LOCATION}else{$scope.cchp.status=status.DEFAULT;$scope.cchp.locId=$rootScope.dynamicLocId;$scope.cchp.obs=obs;$scope.cchp.nws=nws;$scope.cchp.forecast=forecast}}])["catch"](function(){(settings.OnErrorShowMessage===1)?$scope.cchp.status=status.ERROR:$scope.cchp.status=NO_LOCATION})});promise['catch'](function(){(settings.OnErrorShowMessage===1)?$scope.cchp.status=status.ERROR:$scope.cchp.status=NO_LOCATION})},goToForecast:function(){customEvent.getEvent('from-string-event').notify({settings:settings,fromStr:"module"});window.location.href=["/weather/today/l/",$scope.cchp.locId].join("")}};$scope.cchp={};$scope.cchp.status=status.LOADING;$scope.cchp.moduleId=settings.module_id;$scope.cchp.goToForecast=function(){CCFunctions.goToForecast()};CCFunctions.getData()}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/current_conditions_hp.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/translations/current_conditions_hp.fr_fr.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({fr_FR:{"current_conditions_hp.UPDATED":"Mise à jour","current_conditions_hp.WEATHER":"Temps","current_conditions_hp.NOW":"Maintenant","current_conditions_hp.TODAY":"Aujourd'hui","current_conditions_hp.TONIGHT":"Ce soir","current_conditions_hp.FEELSLIKE":"Ressenti","current_conditions_hp.PAST":"Passé","current_conditions_hp.NEXT6HRS":"Suivant 6 heures","current_conditions_hp.WIND":"Vent","current_conditions_hp.HUMIDITY":"Humidité","current_conditions_hp.UVINDEX":"Indice UV","current_conditions_hp.DEWPOINT":"Point de rosée","current_conditions_hp.PRESSURE":"Pression","current_conditions_hp.VISIBILITY":"Visibilité","current_conditions_hp.HOURLY":"Détails Horaires","current_conditions_hp.SHOWDETAILS":"voir les détails","current_conditions_hp.HIDEDETAILS":"masquer les détails","current_conditions_hp.FULLFORECAST":"les prévisions"}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/current_conditions_hp/translations/current_conditions_hp.fr_fr.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/translations/wx_data.fr_fr.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({fr_FR:{wx_data:{UNLIMITED:"Illimité",RISING:"hausse",RISINGRAPIDLY:"hausse rapide",FALLING:"en baisse",FALLINGRAPIDLY:"en baisse rapide",STEADY:"stable",OUTOF:"de",EXTREME:"Extrême",CALM:"Calmer"}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/wx_data/translations/wx_data.fr_fr.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/translations/hp_countdown.fr_fr.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({fr_FR:{hpcountdown:{DAYLEFT:"Jour Gauche",DAYSLEFT:"Jours Gauche",SEARCH_LOCATIONS:"Emplacements de recherche",SEARCH_ANOTHER:"Prévisions Voir pour un autre lieu"}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/hp_countdown/translations/hp_countdown.fr_fr.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/breaking_now.controller.js. */
twc.breaking_now.app.controller('twc_breaking_now_controller',['$scope','dsxclient','twcPco','$rootScope','TwcSocialSharing','settings',function($scope,dsxclient,twcPco,$rootScope,TwcSocialSharing,settings){var vars={},fns={init:function(callback){dsxclient.execute([{$id:"bnModel",recordType:"cms",recordName:"BreakingNow"}]).then(["bnModel",function(bnModel){callback&&callback.apply($scope.breaking_now,[bnModel])}])},loadGigya:function(){if(!TwcSocialSharing.gigyaLoaded)TwcSocialSharing.loadGigyaAPI()}};$scope.isTouch=$rootScope.isTouch;$scope.moduleId=settings.module_id;$scope.breaking_now={model:{},fb:{},display:false,process:function(model){if(model&&model.getTitle()){fns.loadGigya();this.model=model;this.pagename=((twcPco.get('metrics')&&twcPco.get('metrics').attributes.pagename)||'');this.display=true;this.cid=twcPco.getNodeValue("metrics","contentChannel")||""}}};fns.init($scope.breaking_now.process)}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/modules/breaking_now/breaking_now.controller.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/translations/twc_social_sharing.fr_fr.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({fr_FR:{twcSocialSharing:{facebook:'Partager sur Facebook',twitter:'Tweet',googleplus:'Poster à Google+',reddit:'poster de Reddit',pinterest:'épingler',email:'Email',qq:'QIt',sina:'Sina'}}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/twc_social_sharing/translations/twc_social_sharing.fr_fr.js. */
/* Source and licensing information for the line(s) below can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/error_handler/translations/error_handler.fr_fr.js. */
twc.shared.apps.config(['twcMessageProvider',function(twcMessageProvider){twcMessageProvider.add({fr_FR:{"error_handler.GENERIC_ERROR_TITLE":"Oups!","error_handler.GENERIC_ERROR_DESCRIPTION":"On dirait que cette fonctionnalité n'a pas tout à fait charger correctement ... S'il vous plaît revenez bientôt.","error_handler.NOT_AVAILABLE_TITLE":"Nous sommes désolés...","error_handler.NOT_AVAILABLE_DESCRIPTION":"Données n'est pas actuellement disponible pour cet emplacement."}})}]);;
/* Source and licensing information for the above line(s) can be found at http://edit.weather.com/sites/all/modules/custom/angularmods/app/shared/error_handler/translations/error_handler.fr_fr.js. */
